"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const languageclient_1 = require("../languageclient");
// Public: Adapts Atom's user notifications to those of the language server protocol.
class NotificationsAdapter {
    // Public: Attach to a {LanguageClientConnection} to recieve events indicating
    // when user notifications should be displayed.
    static attach(connection, name, projectPath) {
        connection.onShowMessage((m) => NotificationsAdapter.onShowMessage(m, name, projectPath));
        connection.onShowMessageRequest((m) => NotificationsAdapter.onShowMessageRequest(m, name, projectPath));
    }
    static onShowMessageRequest(params, name, projectPath) {
        return new Promise((resolve, reject) => {
            const options = {
                dismissable: true,
                detail: name,
            };
            if (params.actions) {
                options.buttons = params.actions.map((a) => ({
                    text: a.title,
                    onDidClick: () => {
                        resolve(a);
                        if (notification != null) {
                            notification.dismiss();
                        }
                    },
                }));
            }
            const notification = addNotificationForMessage(params.type, params.message, {
                dismissable: true,
                detail: `${name} ${projectPath}`,
            });
            if (notification != null) {
                notification.onDidDismiss(() => {
                    resolve(null);
                });
            }
        });
    }
    // Public: Show a notification message using the Atom notifications API.
    //
    // * `params` The {ShowMessageParams} received from the language server
    //            indicating the details of the notification to be displayed.
    // * `name`   The name of the language server so the user can identify the
    //            context of the message.
    static onShowMessage(params, name, projectPath) {
        addNotificationForMessage(params.type, params.message, {
            dismissable: true,
            detail: `${name} ${projectPath}`,
        });
    }
    // Public: Convert a {MessageActionItem} from the language server into an
    // equivalent {NotificationButton} within Atom.
    //
    // * `actionItem` The {MessageActionItem} to be converted.
    //
    // Returns a {NotificationButton} equivalent to the {MessageActionItem} given.
    static actionItemToNotificationButton(actionItem) {
        return {
            text: actionItem.title,
        };
    }
}
exports.default = NotificationsAdapter;
function messageTypeToString(messageType) {
    switch (messageType) {
        case languageclient_1.MessageType.Error: return 'error';
        case languageclient_1.MessageType.Warning: return 'warning';
        default: return 'info';
    }
}
function addNotificationForMessage(messageType, message, options) {
    function isDuplicate(note) {
        const noteDismissed = note.isDismissed && note.isDismissed();
        const noteOptions = note.getOptions && note.getOptions() || {};
        return !noteDismissed &&
            note.getType() === messageTypeToString(messageType) &&
            noteOptions.detail === options.detail;
    }
    if (atom.notifications.getNotifications().some(isDuplicate)) {
        return null;
    }
    switch (messageType) {
        case languageclient_1.MessageType.Error:
            return atom.notifications.addError(message, options);
        case languageclient_1.MessageType.Warning:
            return atom.notifications.addWarning(message, options);
        case languageclient_1.MessageType.Log:
            // console.log(params.message);
            return null;
        case languageclient_1.MessageType.Info:
        default:
            return atom.notifications.addInfo(message, options);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9ucy1hZGFwdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2FkYXB0ZXJzL25vdGlmaWNhdGlvbnMtYWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNEQU0yQjtBQVEzQixxRkFBcUY7QUFDckY7SUFDRSw4RUFBOEU7SUFDOUUsK0NBQStDO0lBQ3hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBb0MsRUFBRSxJQUFZLEVBQUUsV0FBbUI7UUFDMUYsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsb0JBQW9CLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUMxRixVQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLG9CQUFvQixDQUFDLG9CQUFvQixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUMxRyxDQUFDO0lBRU0sTUFBTSxDQUFDLG9CQUFvQixDQUNoQyxNQUFnQyxFQUNoQyxJQUFZLEVBQ1osV0FBbUI7UUFFbkIsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQ3JDLE1BQU0sT0FBTyxHQUF3QjtnQkFDbkMsV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLE1BQU0sRUFBRSxJQUFJO2FBQ2IsQ0FBQztZQUNGLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNuQixPQUFPLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUMzQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUs7b0JBQ2IsVUFBVSxFQUFFLEdBQUcsRUFBRTt3QkFDZixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ1gsRUFBRSxDQUFDLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7NEJBQ3pCLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQzt3QkFDekIsQ0FBQztvQkFDSCxDQUFDO2lCQUNGLENBQUMsQ0FBQyxDQUFDO1lBQ04sQ0FBQztZQUVELE1BQU0sWUFBWSxHQUFHLHlCQUF5QixDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRTtnQkFDMUUsV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLE1BQU0sRUFBRSxHQUFHLElBQUksSUFBSSxXQUFXLEVBQUU7YUFDakMsQ0FBQyxDQUFDO1lBRUgsRUFBRSxDQUFDLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLFlBQVksQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFO29CQUM3QixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hCLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHdFQUF3RTtJQUN4RSxFQUFFO0lBQ0YsdUVBQXVFO0lBQ3ZFLHlFQUF5RTtJQUN6RSwwRUFBMEU7SUFDMUUscUNBQXFDO0lBQzlCLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBeUIsRUFBRSxJQUFZLEVBQUUsV0FBbUI7UUFDdEYseUJBQXlCLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFO1lBQ3JELFdBQVcsRUFBRSxJQUFJO1lBQ2pCLE1BQU0sRUFBRSxHQUFHLElBQUksSUFBSSxXQUFXLEVBQUU7U0FDakMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHlFQUF5RTtJQUN6RSwrQ0FBK0M7SUFDL0MsRUFBRTtJQUNGLDBEQUEwRDtJQUMxRCxFQUFFO0lBQ0YsOEVBQThFO0lBQ3ZFLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQyxVQUE2QjtRQUN4RSxNQUFNLENBQUM7WUFDTCxJQUFJLEVBQUUsVUFBVSxDQUFDLEtBQUs7U0FDdkIsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQW5FRCx1Q0FtRUM7QUFFRCw2QkFBNkIsV0FBbUI7SUFDOUMsTUFBTSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNwQixLQUFLLDRCQUFXLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDdkMsS0FBSyw0QkFBVyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQzNDLFNBQVMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUN6QixDQUFDO0FBQ0gsQ0FBQztBQUVELG1DQUNFLFdBQW1CLEVBQ25CLE9BQWUsRUFDZixPQUE0QjtJQUU1QixxQkFBcUIsSUFBcUI7UUFDeEMsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDN0QsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQy9ELE1BQU0sQ0FBQyxDQUFDLGFBQWE7WUFDbkIsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLG1CQUFtQixDQUFDLFdBQVcsQ0FBQztZQUNuRCxXQUFXLENBQUMsTUFBTSxLQUFLLE9BQU8sQ0FBQyxNQUFNLENBQUM7SUFDMUMsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsTUFBTSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNwQixLQUFLLDRCQUFXLENBQUMsS0FBSztZQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZELEtBQUssNEJBQVcsQ0FBQyxPQUFPO1lBQ3RCLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDekQsS0FBSyw0QkFBVyxDQUFDLEdBQUc7WUFDbEIsK0JBQStCO1lBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDZCxLQUFLLDRCQUFXLENBQUMsSUFBSSxDQUFDO1FBQ3RCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uLFxyXG4gIE1lc3NhZ2VUeXBlLFxyXG4gIE1lc3NhZ2VBY3Rpb25JdGVtLFxyXG4gIFNob3dNZXNzYWdlUGFyYW1zLFxyXG4gIFNob3dNZXNzYWdlUmVxdWVzdFBhcmFtcyxcclxufSBmcm9tICcuLi9sYW5ndWFnZWNsaWVudCc7XHJcbmltcG9ydCB7XHJcbiAgTm90aWZpY2F0aW9uLFxyXG4gIE5vdGlmaWNhdGlvbkJ1dHRvbixcclxuICBOb3RpZmljYXRpb25PcHRpb25zLFxyXG4gIE5vdGlmaWNhdGlvbkV4dCxcclxufSBmcm9tICdhdG9tJztcclxuXHJcbi8vIFB1YmxpYzogQWRhcHRzIEF0b20ncyB1c2VyIG5vdGlmaWNhdGlvbnMgdG8gdGhvc2Ugb2YgdGhlIGxhbmd1YWdlIHNlcnZlciBwcm90b2NvbC5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90aWZpY2F0aW9uc0FkYXB0ZXIge1xyXG4gIC8vIFB1YmxpYzogQXR0YWNoIHRvIGEge0xhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbn0gdG8gcmVjaWV2ZSBldmVudHMgaW5kaWNhdGluZ1xyXG4gIC8vIHdoZW4gdXNlciBub3RpZmljYXRpb25zIHNob3VsZCBiZSBkaXNwbGF5ZWQuXHJcbiAgcHVibGljIHN0YXRpYyBhdHRhY2goY29ubmVjdGlvbjogTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uLCBuYW1lOiBzdHJpbmcsIHByb2plY3RQYXRoOiBzdHJpbmcpIHtcclxuICAgIGNvbm5lY3Rpb24ub25TaG93TWVzc2FnZSgobSkgPT4gTm90aWZpY2F0aW9uc0FkYXB0ZXIub25TaG93TWVzc2FnZShtLCBuYW1lLCBwcm9qZWN0UGF0aCkpO1xyXG4gICAgY29ubmVjdGlvbi5vblNob3dNZXNzYWdlUmVxdWVzdCgobSkgPT4gTm90aWZpY2F0aW9uc0FkYXB0ZXIub25TaG93TWVzc2FnZVJlcXVlc3QobSwgbmFtZSwgcHJvamVjdFBhdGgpKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgb25TaG93TWVzc2FnZVJlcXVlc3QoXHJcbiAgICBwYXJhbXM6IFNob3dNZXNzYWdlUmVxdWVzdFBhcmFtcyxcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIHByb2plY3RQYXRoOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxNZXNzYWdlQWN0aW9uSXRlbSB8IG51bGw+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnM6IE5vdGlmaWNhdGlvbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGlzbWlzc2FibGU6IHRydWUsXHJcbiAgICAgICAgZGV0YWlsOiBuYW1lLFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAocGFyYW1zLmFjdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBwYXJhbXMuYWN0aW9ucy5tYXAoKGEpID0+ICh7XHJcbiAgICAgICAgICB0ZXh0OiBhLnRpdGxlLFxyXG4gICAgICAgICAgb25EaWRDbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKGEpO1xyXG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBub3RpZmljYXRpb24uZGlzbWlzcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gYWRkTm90aWZpY2F0aW9uRm9yTWVzc2FnZShwYXJhbXMudHlwZSwgcGFyYW1zLm1lc3NhZ2UsIHtcclxuICAgICAgICBkaXNtaXNzYWJsZTogdHJ1ZSxcclxuICAgICAgICBkZXRhaWw6IGAke25hbWV9ICR7cHJvamVjdFBhdGh9YCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobm90aWZpY2F0aW9uICE9IG51bGwpIHtcclxuICAgICAgICBub3RpZmljYXRpb24ub25EaWREaXNtaXNzKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljOiBTaG93IGEgbm90aWZpY2F0aW9uIG1lc3NhZ2UgdXNpbmcgdGhlIEF0b20gbm90aWZpY2F0aW9ucyBBUEkuXHJcbiAgLy9cclxuICAvLyAqIGBwYXJhbXNgIFRoZSB7U2hvd01lc3NhZ2VQYXJhbXN9IHJlY2VpdmVkIGZyb20gdGhlIGxhbmd1YWdlIHNlcnZlclxyXG4gIC8vICAgICAgICAgICAgaW5kaWNhdGluZyB0aGUgZGV0YWlscyBvZiB0aGUgbm90aWZpY2F0aW9uIHRvIGJlIGRpc3BsYXllZC5cclxuICAvLyAqIGBuYW1lYCAgIFRoZSBuYW1lIG9mIHRoZSBsYW5ndWFnZSBzZXJ2ZXIgc28gdGhlIHVzZXIgY2FuIGlkZW50aWZ5IHRoZVxyXG4gIC8vICAgICAgICAgICAgY29udGV4dCBvZiB0aGUgbWVzc2FnZS5cclxuICBwdWJsaWMgc3RhdGljIG9uU2hvd01lc3NhZ2UocGFyYW1zOiBTaG93TWVzc2FnZVBhcmFtcywgbmFtZTogc3RyaW5nLCBwcm9qZWN0UGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBhZGROb3RpZmljYXRpb25Gb3JNZXNzYWdlKHBhcmFtcy50eXBlLCBwYXJhbXMubWVzc2FnZSwge1xyXG4gICAgICBkaXNtaXNzYWJsZTogdHJ1ZSxcclxuICAgICAgZGV0YWlsOiBgJHtuYW1lfSAke3Byb2plY3RQYXRofWAsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYzogQ29udmVydCBhIHtNZXNzYWdlQWN0aW9uSXRlbX0gZnJvbSB0aGUgbGFuZ3VhZ2Ugc2VydmVyIGludG8gYW5cclxuICAvLyBlcXVpdmFsZW50IHtOb3RpZmljYXRpb25CdXR0b259IHdpdGhpbiBBdG9tLlxyXG4gIC8vXHJcbiAgLy8gKiBgYWN0aW9uSXRlbWAgVGhlIHtNZXNzYWdlQWN0aW9uSXRlbX0gdG8gYmUgY29udmVydGVkLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtOb3RpZmljYXRpb25CdXR0b259IGVxdWl2YWxlbnQgdG8gdGhlIHtNZXNzYWdlQWN0aW9uSXRlbX0gZ2l2ZW4uXHJcbiAgcHVibGljIHN0YXRpYyBhY3Rpb25JdGVtVG9Ob3RpZmljYXRpb25CdXR0b24oYWN0aW9uSXRlbTogTWVzc2FnZUFjdGlvbkl0ZW0pOiBOb3RpZmljYXRpb25CdXR0b24ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGV4dDogYWN0aW9uSXRlbS50aXRsZSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtZXNzYWdlVHlwZVRvU3RyaW5nKG1lc3NhZ2VUeXBlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gIHN3aXRjaCAobWVzc2FnZVR5cGUpIHtcclxuICAgIGNhc2UgTWVzc2FnZVR5cGUuRXJyb3I6IHJldHVybiAnZXJyb3InO1xyXG4gICAgY2FzZSBNZXNzYWdlVHlwZS5XYXJuaW5nOiByZXR1cm4gJ3dhcm5pbmcnO1xyXG4gICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZE5vdGlmaWNhdGlvbkZvck1lc3NhZ2UoXHJcbiAgbWVzc2FnZVR5cGU6IG51bWJlcixcclxuICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgb3B0aW9uczogTm90aWZpY2F0aW9uT3B0aW9ucyxcclxuKTogTm90aWZpY2F0aW9uIHwgbnVsbCB7XHJcbiAgZnVuY3Rpb24gaXNEdXBsaWNhdGUobm90ZTogTm90aWZpY2F0aW9uRXh0KTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBub3RlRGlzbWlzc2VkID0gbm90ZS5pc0Rpc21pc3NlZCAmJiBub3RlLmlzRGlzbWlzc2VkKCk7XHJcbiAgICBjb25zdCBub3RlT3B0aW9ucyA9IG5vdGUuZ2V0T3B0aW9ucyAmJiBub3RlLmdldE9wdGlvbnMoKSB8fCB7fTtcclxuICAgIHJldHVybiAhbm90ZURpc21pc3NlZCAmJlxyXG4gICAgICBub3RlLmdldFR5cGUoKSA9PT0gbWVzc2FnZVR5cGVUb1N0cmluZyhtZXNzYWdlVHlwZSkgJiZcclxuICAgICAgbm90ZU9wdGlvbnMuZGV0YWlsID09PSBvcHRpb25zLmRldGFpbDtcclxuICB9XHJcbiAgaWYgKGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkuc29tZShpc0R1cGxpY2F0ZSkpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xyXG4gICAgY2FzZSBNZXNzYWdlVHlwZS5FcnJvcjpcclxuICAgICAgcmV0dXJuIGF0b20ubm90aWZpY2F0aW9ucy5hZGRFcnJvcihtZXNzYWdlLCBvcHRpb25zKTtcclxuICAgIGNhc2UgTWVzc2FnZVR5cGUuV2FybmluZzpcclxuICAgICAgcmV0dXJuIGF0b20ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKG1lc3NhZ2UsIG9wdGlvbnMpO1xyXG4gICAgY2FzZSBNZXNzYWdlVHlwZS5Mb2c6XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHBhcmFtcy5tZXNzYWdlKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBjYXNlIE1lc3NhZ2VUeXBlLkluZm86XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gYXRvbS5ub3RpZmljYXRpb25zLmFkZEluZm8obWVzc2FnZSwgb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==