module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1721)}({1:function(e,t){e.exports=require("path")},10:function(e,t){e.exports=require("crypto")},100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(76),i=n(61);let a="Content-Length: ",s="\r\n";!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class o{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=o;t.StreamMessageWriter=class extends o{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[a,n.toString(),s,s];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends o{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends o{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),r=[a,n.toString(),s,s];try{this.sending=!0,this.socket.write(r.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static isWhitespace(e){return" "===e||"\t"===e||r.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"\t":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return n;default:return n}return-1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}}t.Util=r},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static isWhitespace(e){return" "===e||"\t"===e||r.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"\t":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return n;default:return n}return-1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}}t.Util=r},11:function(e,t){e.exports=require("url")},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(143);t.Argument=r.Argument;var i=n(670);t.JSONArgument=i.JSONArgument;const a=n(671);t.Comment=a.Comment;const s=n(672);var o=n(675);t.Flag=o.Flag;const c=n(80);t.Instruction=c.Instruction;var u=n(193);t.Line=u.Line;const g=n(673);t.ParserDirective=g.ParserDirective;var l=n(290);t.Property=l.Property;var h=n(674);t.Variable=h.Variable;var d=n(676);t.Add=d.Add;const m=n(289);t.Arg=m.Arg;const f=n(291);t.Cmd=f.Cmd;const p=n(292);t.Copy=p.Copy;const _=n(294);t.Entrypoint=_.Entrypoint;const R=n(293);t.Env=R.Env;const A=n(195);t.From=A.From;const v=n(295);t.Healthcheck=v.Healthcheck;var b=n(95);t.JSONInstruction=b.JSONInstruction;var S=n(677);t.Label=S.Label;var C=n(288);t.ModifiableInstruction=C.ModifiableInstruction;var E=n(296);t.Onbuild=E.Onbuild;var D=n(194);t.PropertyInstruction=D.PropertyInstruction;var I=n(678);t.Shell=I.Shell;var k=n(679);t.Stopsignal=k.Stopsignal;var y=n(681);t.User=y.User;var T=n(682);t.Volume=T.Volume;var N=n(680);t.Workdir=N.Workdir,function(e){e.ADD="ARG",e.ARG="ARG",e.CMD="CMD",e.COPY="COPY",e.ENTRYPOINT="ENTRYPOINT",e.ENV="ENV",e.EXPOSE="EXPOSE",e.FROM="FROM",e.HEALTHCHECK="HEALTHCHECK",e.LABEL="LABEL",e.MAINTAINER="MAINTAINER",e.ONBUILD="ONBUILD",e.RUN="RUN",e.SHELL="SHELL",e.STOPSIGNAL="STOPSIGNAL",e.USER="USER",e.VOLUME="VOLUME",e.WORKDIR="WORKDIR"}(t.Keyword||(t.Keyword={})),function(e){e.escape="escape"}(t.Directive||(t.Directive={})),t.DefaultVariables=["FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],function(e){e.parse=function(e){return(new s.Parser).parse(e)}}(t.DockerfileParser||(t.DockerfileParser={}))},143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Argument=class{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];var r=function(){function e(){}return e.isWhitespace=function(t){return" "===t||"\t"===t||e.isNewline(t)},e.isNewline=function(e){return"\r"===e||"\n"===e},e.isInsideRange=function(e,t){return null!==t&&(t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line)},e.rangeEquals=function(t,n){return e.positionEquals(t.start,n.start)&&e.positionEquals(t.end,n.end)},e.positionEquals=function(e,t){return e.line==t.line&&e.character===t.character},e.positionBefore=function(e,t){return e.line<t.line||!(e.line>t.line)&&e.character<t.character},e}();t.Util=r},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Argument=class{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},17:function(e,t,n){"use strict";var r,i,a,s,o,c,u,g,l,h,d,m,f,p,_,R,A,v;n.r(t),n.d(t,"Position",function(){return r}),n.d(t,"Range",function(){return i}),n.d(t,"Location",function(){return a}),n.d(t,"Color",function(){return s}),n.d(t,"ColorInformation",function(){return o}),n.d(t,"ColorPresentation",function(){return c}),n.d(t,"FoldingRangeKind",function(){return u}),n.d(t,"FoldingRange",function(){return g}),n.d(t,"DiagnosticRelatedInformation",function(){return l}),n.d(t,"DiagnosticSeverity",function(){return h}),n.d(t,"Diagnostic",function(){return d}),n.d(t,"Command",function(){return m}),n.d(t,"TextEdit",function(){return f}),n.d(t,"TextDocumentEdit",function(){return p}),n.d(t,"CreateFile",function(){return _}),n.d(t,"RenameFile",function(){return R}),n.d(t,"DeleteFile",function(){return A}),n.d(t,"WorkspaceEdit",function(){return v}),n.d(t,"WorkspaceChange",function(){return V}),n.d(t,"TextDocumentIdentifier",function(){return b}),n.d(t,"VersionedTextDocumentIdentifier",function(){return S}),n.d(t,"TextDocumentItem",function(){return C}),n.d(t,"MarkupKind",function(){return E}),n.d(t,"MarkupContent",function(){return D}),n.d(t,"CompletionItemKind",function(){return I}),n.d(t,"InsertTextFormat",function(){return k}),n.d(t,"CompletionItem",function(){return y}),n.d(t,"CompletionList",function(){return T}),n.d(t,"MarkedString",function(){return N}),n.d(t,"Hover",function(){return O}),n.d(t,"ParameterInformation",function(){return P}),n.d(t,"SignatureInformation",function(){return M}),n.d(t,"DocumentHighlightKind",function(){return w}),n.d(t,"DocumentHighlight",function(){return x}),n.d(t,"SymbolKind",function(){return L}),n.d(t,"SymbolInformation",function(){return F}),n.d(t,"DocumentSymbol",function(){return B}),n.d(t,"CodeActionKind",function(){return U}),n.d(t,"CodeActionContext",function(){return q}),n.d(t,"CodeAction",function(){return K}),n.d(t,"CodeLens",function(){return G}),n.d(t,"FormattingOptions",function(){return W}),n.d(t,"DocumentLink",function(){return j}),n.d(t,"EOL",function(){return J}),n.d(t,"TextDocument",function(){return Y}),n.d(t,"TextDocumentSaveReason",function(){return $}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Q.objectLiteral(t)&&Q.number(t.line)&&Q.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(Q.number(e)&&Q.number(t)&&Q.number(n)&&Q.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return Q.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Q.defined(t)&&i.is(t.range)&&(Q.string(t.uri)||Q.undefined(t.uri))}}(a||(a={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return Q.number(t.red)&&Q.number(t.green)&&Q.number(t.blue)&&Q.number(t.alpha)}}(s||(s={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&s.is(t.color)}}(o||(o={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return Q.string(t.label)&&(Q.undefined(t.textEdit)||f.is(t))&&(Q.undefined(t.additionalTextEdits)||Q.typedArray(t.additionalTextEdits,f.is))}}(c||(c={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(u||(u={})),function(e){e.create=function(e,t,n,r,i){var a={startLine:e,endLine:t};return Q.defined(n)&&(a.startCharacter=n),Q.defined(r)&&(a.endCharacter=r),Q.defined(i)&&(a.kind=i),a},e.is=function(e){var t=e;return Q.number(t.startLine)&&Q.number(t.startLine)&&(Q.undefined(t.startCharacter)||Q.number(t.startCharacter))&&(Q.undefined(t.endCharacter)||Q.number(t.endCharacter))&&(Q.undefined(t.kind)||Q.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Q.defined(t)&&a.is(t.location)&&Q.string(t.message)}}(l||(l={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.create=function(e,t,n,r,i,a){var s={range:e,message:t};return Q.defined(n)&&(s.severity=n),Q.defined(r)&&(s.code=r),Q.defined(i)&&(s.source=i),Q.defined(a)&&(s.relatedInformation=a),s},e.is=function(e){var t=e;return Q.defined(t)&&i.is(t.range)&&Q.string(t.message)&&(Q.number(t.severity)||Q.undefined(t.severity))&&(Q.number(t.code)||Q.string(t.code)||Q.undefined(t.code))&&(Q.string(t.source)||Q.undefined(t.source))&&(Q.undefined(t.relatedInformation)||Q.typedArray(t.relatedInformation,l.is))}}(d||(d={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return Q.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return Q.defined(t)&&Q.string(t.title)&&Q.string(t.command)}}(m||(m={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Q.objectLiteral(t)&&Q.string(t.newText)&&i.is(t.range)}}(f||(f={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Q.defined(t)&&S.is(t.textDocument)&&Array.isArray(t.edits)}}(p||(p={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&Q.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Q.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Q.boolean(t.options.ignoreIfExists)))}}(_||(_={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Q.string(t.oldUri)&&Q.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Q.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Q.boolean(t.options.ignoreIfExists)))}}(R||(R={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Q.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Q.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Q.boolean(t.options.ignoreIfNotExists)))}}(A||(A={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every(function(e){return Q.string(e.kind)?_.is(e)||R.is(e)||A.is(e):p.is(e)}))}}(v||(v={}));var b,S,C,E,D,I,k,y,T,N,O,P,M,w,x,L,F,H=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(f.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(f.replace(e,t))},e.prototype.delete=function(e){this.edits.push(f.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),V=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){if(p.is(e)){var n=new H(e.edits);t._textEditChanges[e.textDocument.uri]=n}}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new H(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(S.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new H(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new H(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(_.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(R.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(A.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Q.defined(t)&&Q.string(t.uri)}}(b||(b={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Q.defined(t)&&Q.string(t.uri)&&(null===t.version||Q.number(t.version))}}(S||(S={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return Q.defined(t)&&Q.string(t.uri)&&Q.string(t.languageId)&&Q.number(t.version)&&Q.string(t.text)}}(C||(C={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(E||(E={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(E||(E={})),function(e){e.is=function(e){var t=e;return Q.objectLiteral(e)&&E.is(t.kind)&&Q.string(t.value)}}(D||(D={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(I||(I={})),function(e){e.PlainText=1,e.Snippet=2}(k||(k={})),function(e){e.create=function(e){return{label:e}}}(y||(y={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(T||(T={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Q.string(t)||Q.objectLiteral(t)&&Q.string(t.language)&&Q.string(t.value)}}(N||(N={})),function(e){e.is=function(e){var t=e;return Q.objectLiteral(t)&&(D.is(t.contents)||N.is(t.contents)||Q.typedArray(t.contents,N.is))&&(void 0===e.range||i.is(e.range))}}(O||(O={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(P||(P={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return Q.defined(t)&&(i.documentation=t),Q.defined(n)?i.parameters=n:i.parameters=[],i}}(M||(M={})),function(e){e.Text=1,e.Read=2,e.Write=3}(w||(w={})),function(e){e.create=function(e,t){var n={range:e};return Q.number(t)&&(n.kind=t),n}}(x||(x={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(L||(L={})),function(e){e.create=function(e,t,n,r,i){var a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a}}(F||(F={}));var U,q,K,G,W,B=function(){return function(){}}();!function(e){e.create=function(e,t,n,r,i,a){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==a&&(s.children=a),s},e.is=function(e){var t=e;return t&&Q.string(t.name)&&Q.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||Q.string(t.detail))&&(void 0===t.deprecated||Q.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(B||(B={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(U||(U={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return Q.defined(t)&&Q.typedArray(t.diagnostics,d.is)&&(void 0===t.only||Q.typedArray(t.only,Q.string))}}(q||(q={})),function(e){e.create=function(e,t,n){var r={title:e};return m.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&Q.string(t.title)&&(void 0===t.diagnostics||Q.typedArray(t.diagnostics,d.is))&&(void 0===t.kind||Q.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||m.is(t.command))&&(void 0===t.edit||v.is(t.edit))}}(K||(K={})),function(e){e.create=function(e,t){var n={range:e};return Q.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return Q.defined(t)&&i.is(t.range)&&(Q.undefined(t.command)||m.is(t.command))}}(G||(G={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Q.defined(t)&&Q.number(t.tabSize)&&Q.boolean(t.insertSpaces)}}(W||(W={}));var j=function(){return function(){}}();!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return Q.defined(t)&&i.is(t.range)&&(Q.undefined(t.target)||Q.string(t.target))}}(j||(j={}));var Y,$,J=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new z(e,t,n,r)},e.is=function(e){var t=e;return!!(Q.defined(t)&&Q.string(t.uri)&&(Q.undefined(t.languageId)||Q.string(t.languageId))&&Q.number(t.lineCount)&&Q.func(t.getText)&&Q.func(t.positionAt)&&Q.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);e(i,n),e(a,n);for(var s=0,o=0,c=0;s<i.length&&o<a.length;){var u=n(i[s],a[o]);t[c++]=u<=0?i[s++]:a[o++]}for(;s<i.length;)t[c++]=i[s++];for(;o<a.length;)t[c++]=a[o++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,a=r.length-1;a>=0;a--){var s=r[a],o=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Ovelapping edit");n=n.substring(0,o)+s.newText+n.substring(c,n.length),i=o}return n}}(Y||(Y={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}($||($={}));var Q,z=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var a=Math.floor((n+i)/2);t[a]>e?i=a:n=a+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Q||(Q={}))},1721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),i=n(1722),a=n(192),s=n(683);let o=null,c=new Map,u=i.createConnection(),g=s.DockerfileLanguageServiceFactory.createLanguageService();g.setLogger({log(e){u.console.log(e)}});let l=!1,h=!1,d=!1,m=!1,f={};function p(e){return f[e]?Promise.resolve(f[e]):new Promise((t,n)=>{let a=i.Files.uriToFilePath(e);r.exists(a,n=>{n?r.readFile(a,(n,r)=>{t(i.TextDocument.create(e,"dockerfile",1,r.toString()))}):t(null)})})}function _(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.deprecatedSupport}function R(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.snippetSupport}function A(e){return e.textDocument&&e.textDocument.completion&&e.textDocument.completion.completionItem&&e.textDocument.completion.completionItem.documentationFormat}function v(e){return e.textDocument&&e.textDocument.hover&&e.textDocument.hover.contentFormat}function b(e){return e.textDocument&&e.textDocument.foldingRange&&e.textDocument.foldingRange.lineFoldingOnly}function S(e){return e.textDocument&&e.textDocument.foldingRange&&e.textDocument.foldingRange.rangeLimit}function C(e){let t=a.ValidationSeverity.WARNING,n=a.ValidationSeverity.WARNING,r=a.ValidationSeverity.WARNING,i=a.ValidationSeverity.WARNING,s=a.ValidationSeverity.WARNING,o=a.ValidationSeverity.WARNING,c=a.ValidationSeverity.WARNING,u=a.ValidationSeverity.WARNING,g=a.ValidationSeverity.WARNING;return e&&(t=D(e.deprecatedMaintainer),n=D(e.directiveCasing),r=D(e.emptyContinuationLine),i=D(e.instructionCasing),s=D(e.instructionCmdMultiple),o=D(e.instructionEntrypointMultiple),c=D(e.instructionHealthcheckMultiple),u=D(e.instructionJSONInSingleQuotes),g=D(e.instructionWorkdirRelative)),{deprecatedMaintainer:t,directiveCasing:n,emptyContinuationLine:r,instructionCasing:i,instructionCmdMultiple:s,instructionEntrypointMultiple:o,instructionHealthcheckMultiple:c,instructionJSONInSingleQuotes:u,instructionWorkdirRelative:g}}function E(e){if(h)(function(e){let t=c.get(e);t||(t=u.workspace.getConfiguration({section:"docker.languageserver.diagnostics",scopeUri:e}),c.set(e,t));return t})(e.uri).then(t=>{const n=C(t),r=g.validate(e.getText(),n);u.sendDiagnostics({uri:e.uri,diagnostics:r})});else{const t=g.validate(e.getText(),o);u.sendDiagnostics({uri:e.uri,diagnostics:t})}}function D(e){switch(e){case"ignore":return a.ValidationSeverity.IGNORE;case"warning":return a.ValidationSeverity.WARNING;case"error":return a.ValidationSeverity.ERROR}return null}function I(){const e=[];for(let t in f)e.push({section:"docker.languageserver.diagnostics",scopeUri:t});c.clear(),u.workspace.getConfiguration(e).then(t=>{const n=[];for(let r=0;r<t.length;r++){const i=e[r].scopeUri;t[r]&&!c.has(i)&&(c.set(i,Promise.resolve(t[r])),n.push(i))}for(const e of n)E(f[e])})}function k(e,t,n,r){let a=g.computeCommandEdits(t.getText(),n,r);if(a){if(d){let n=i.VersionedTextDocumentIdentifier.create(e,t.version);return{documentChanges:[i.TextDocumentEdit.create(n,a)]}}return{changes:{[e]:a}}}return null}u.onInitialized(()=>{h&&u.client.register(i.DidChangeConfigurationNotification.type)}),u.onInitialize(e=>(function(e){g.setCapabilities({completion:{completionItem:{deprecatedSupport:_(e),documentationFormat:A(e),snippetSupport:R(e)}},hover:{contentFormat:v(e)},foldingRange:{lineFoldingOnly:b(e),rangeLimit:S(e)}})}(e.capabilities),l=e.capabilities.workspace&&!0===e.capabilities.workspace.applyEdit,d=e.capabilities.workspace&&e.capabilities.workspace.workspaceEdit&&!0===e.capabilities.workspace.workspaceEdit.documentChanges,h=e.capabilities.workspace&&!0===e.capabilities.workspace.configuration,m=function(e){let t=e.textDocument&&e.textDocument.codeAction&&e.textDocument.codeAction.codeActionLiteralSupport&&e.textDocument.codeAction.codeActionLiteralSupport.codeActionKind&&e.textDocument.codeAction.codeActionLiteralSupport.codeActionKind.valueSet;if(null==t)return!1;for(let e of t)if(e===i.CodeActionKind.QuickFix)return!0;return!1}(e.capabilities),{capabilities:{textDocumentSync:i.TextDocumentSyncKind.Incremental,codeActionProvider:l,completionProvider:{resolveProvider:!0,triggerCharacters:["="," ","$","-"]},executeCommandProvider:l?{commands:[s.CommandIds.LOWERCASE,s.CommandIds.UPPERCASE,s.CommandIds.EXTRA_ARGUMENT,s.CommandIds.DIRECTIVE_TO_BACKSLASH,s.CommandIds.DIRECTIVE_TO_BACKTICK,s.CommandIds.FLAG_TO_CHOWN,s.CommandIds.FLAG_TO_COPY_FROM,s.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,s.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,s.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,s.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,s.CommandIds.CONVERT_TO_AS,s.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE]}:void 0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0,documentOnTypeFormattingProvider:{firstTriggerCharacter:"\\",moreTriggerCharacter:["`"]},hoverProvider:!0,documentSymbolProvider:!0,documentHighlightProvider:!0,renameProvider:!0,definitionProvider:!0,signatureHelpProvider:{triggerCharacters:["-","[",","," ","="]},documentLinkProvider:{resolveProvider:!0},foldingRangeProvider:!0}})),u.onNotification(i.DidChangeConfigurationNotification.type,()=>{I()}),u.onDidChangeConfiguration(e=>{if(h)I();else{let t=e.settings;o=t.docker&&t.docker.languageserver&&t.docker.languageserver.diagnostics?C(t.docker.languageserver.diagnostics):C(null),Object.keys(f).forEach(e=>{E(f[e])})}}),u.onCompletion(e=>p(e.textDocument.uri).then(t=>t?g.computeCompletionItems(t.getText(),e.position):null)),u.onSignatureHelp(e=>p(e.textDocument.uri).then(t=>null!==t?g.computeSignatureHelp(t.getText(),e.position):{signatures:[],activeSignature:null,activeParameter:null})),u.onCompletionResolve(e=>g.resolveCompletionItem(e)),u.onHover(e=>p(e.textDocument.uri).then(t=>t?g.computeHover(t.getText(),e.position):null)),u.onDocumentHighlight(e=>p(e.textDocument.uri).then(t=>t?g.computeHighlightRanges(t.getText(),e.position):[])),u.onCodeAction(e=>{if(l&&e.context.diagnostics.length>0){let t=g.computeCodeActions(e.textDocument,e.range,e.context);return m?p(e.textDocument.uri).then(n=>{let r=[];for(let a of t){let t={title:a.title,kind:i.CodeActionKind.QuickFix},s=k(e.textDocument.uri,n,a.command,a.arguments);s&&(t.edit=s),r.push(t)}return r}):t}return[]}),u.onExecuteCommand(e=>{if(l){let t=e.arguments[0];p(t).then(n=>{if(n){let r=k(t,n,e.command,e.arguments);r&&u.workspace.applyEdit(r)}return null})}}),u.onDefinition(e=>p(e.textDocument.uri).then(t=>t?g.computeDefinition(e.textDocument,t.getText(),e.position):null)),u.onRenameRequest(e=>p(e.textDocument.uri).then(t=>{if(t){let n=g.computeRename(e.textDocument,t.getText(),e.position,e.newName);return{changes:{[e.textDocument.uri]:n}}}return null})),u.onDocumentSymbol(e=>p(e.textDocument.uri).then(t=>t?g.computeSymbols(e.textDocument,t.getText()):[])),u.onDocumentFormatting(e=>p(e.textDocument.uri).then(t=>t?g.format(t.getText(),e.options):[])),u.onDocumentRangeFormatting(e=>p(e.textDocument.uri).then(t=>t?g.formatRange(t.getText(),e.range,e.options):[])),u.onDocumentOnTypeFormatting(e=>p(e.textDocument.uri).then(t=>t?g.formatOnType(t.getText(),e.position,e.ch,e.options):[])),u.onDocumentLinks(e=>p(e.textDocument.uri).then(e=>e?g.computeLinks(e.getText()):[])),u.onDocumentLinkResolve(e=>g.resolveLink(e)),u.onFoldingRanges(e=>p(e.textDocument.uri).then(e=>e?g.computeFoldingRanges(e.getText()):[])),u.onDidOpenTextDocument(e=>{let t=i.TextDocument.create(e.textDocument.uri,e.textDocument.languageId,e.textDocument.version,e.textDocument.text);f[e.textDocument.uri]=t,E(t)}),u.onDidChangeTextDocument(e=>{let t=f[e.textDocument.uri],n=t.getText(),r=n,a=e.contentChanges;for(let e=0;e<a.length;e++){if(!a[e].range&&!a[e].rangeLength){n=a[e].text;break}let r=t.offsetAt(a[e].range.start),i=null;i=a[e].range.end?t.offsetAt(a[e].range.end):r+a[e].rangeLength,n=n.substring(0,r)+a[e].text+n.substring(i)}t=i.TextDocument.create(e.textDocument.uri,t.languageId,e.textDocument.version,n),f[e.textDocument.uri]=t,r!==n&&E(t)}),u.onDidCloseTextDocument(e=>{c.delete(e.textDocument.uri),u.sendDiagnostics({uri:e.textDocument.uri,diagnostics:[]}),delete f[e.textDocument.uri]}),u.listen()},1722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(41);t.Event=r.Event;const i=n(1723),a=n(1724),s=n(669),o=n(1725);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(41));const c=n(1726);!function(e){e.uriToFilePath=c.uriToFilePath,e.resolveGlobalNodePath=c.resolveGlobalNodePath,e.resolveGlobalYarnPath=c.resolveGlobalYarnPath,e.resolve=c.resolve,e.resolveModule=c.resolveModule,e.resolveModule2=c.resolveModule2,e.resolveModulePath=c.resolveModulePath}(t.Files||(t.Files={}));let u=!1,g=void 0;function l(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(g=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let n=process.argv[t];if("--clientProcessId"===n&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=n.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();t.TextDocuments=class{constructor(){this._documents=Object.create(null),this._onDidChangeContent=new r.Emitter,this._onDidOpen=new r.Emitter,this._onDidClose=new r.Emitter,this._onDidSave=new r.Emitter,this._onWillSave=new r.Emitter}get syncKind(){return r.TextDocumentSyncKind.Full}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=r.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=r.TextDocument.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let i=Object.freeze({document:n});this._onDidOpen.fire(i),this._onDidChangeContent.fire(i)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges,r=n.length>0?n[n.length-1]:void 0;if(r){let e=this._documents[t.uri];if(e&&function(e){return s.func(e.update)}(e)){if(null===t.version||void 0===t.version)throw new Error(`Recevied document change event for ${t.uri} without valid version identifier`);e.update(r,t.version),this._onDidChangeContent.fire(Object.freeze({document:e}))}}}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}},function(e){e.create=function(){return new h}}(t.BulkRegistration||(t.BulkRegistration={}));class h{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=s.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const r=o.generateUuid();this._registrations.push({id:r,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new d(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class d{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(r.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=s.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(r.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${n.id} failed.`)}),!0}}class m{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(r.MessageType.Error,e)}warn(e){this.send(r.MessageType.Warning,e)}info(e){this.send(r.MessageType.Info,e)}log(e){this.send(r.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(r.LogMessageNotification.type,{type:e,message:t})}}class f{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:r.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(l)}showWarningMessage(e,...t){let n={type:r.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(l)}showInformationMessage(e,...t){let n={type:r.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(l)}}class p{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof h?this.registerMany(e):e instanceof d?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const i=s.string(t)?t:t.method,a=o.generateUuid();let c={registrations:[{id:a,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(r.RegistrationRequest.type,c).then(t=>(e.add({id:a,method:i}),e),e=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=s.string(e)?e:e.method,i=o.generateUuid();let a={registrations:[{id:i,method:n,registerOptions:t||{}}]};return this._connection.sendRequest(r.RegistrationRequest.type,a).then(e=>r.Disposable.create(()=>{this.unregisterSingle(i,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(r.UnregistrationRequest.type,n).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(r.RegistrationRequest.type,t).then(()=>new d(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const _=a.WorkspaceFoldersFeature(i.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this._connection.sendRequest(r.ApplyWorkspaceEditRequest.type,t)}}));class R{constructor(){this._trace=r.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==r.Trace.Off&&this._connection.sendNotification(r.LogTraceNotification.type,{message:e,verbose:this._trace===r.Trace.Verbose?t:void 0})}}class A{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(r.TelemetryEventNotification.type,e)}}function v(e,t){return function(n){return t(e(n))}}function b(e,t){return function(n){return t(e(n))}}function S(e,t){return function(n){return t(e(n))}}function C(e,t){return function(n){return t(e(n))}}function E(e,t){return function(n){return t(e(n))}}function D(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=v,t.combineTelemetryFeatures=b,t.combineTracerFeatures=S,t.combineClientFeatures=C,t.combineWindowFeatures=E,t.combineWorkspaceFeatures=D,t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,v),tracer:n(e.tracer,t.tracer,S),telemetry:n(e.telemetry,t.telemetry,b),client:n(e.client,t.client,C),window:n(e.window,t.window,E),workspace:n(e.workspace,t.workspace,D)}},t.createConnection=function(e,t,n,i){let a,o,c,l;return void 0!==e&&"features"===e.__brand&&(a=e,e=t,t=n,n=i),r.ConnectionStrategy.is(e)?l=e:(o=e,c=t,l=n),function(e,t,n,i){if(!e&&!t&&process.argv.length>2){let n=void 0,i=void 0,s=process.argv.slice(2);for(let o=0;o<s.length;o++){let c=s[o];if("--node-ipc"===c){e=new r.IPCMessageReader(process),t=new r.IPCMessageWriter(process);break}if("--stdio"===c){e=process.stdin,t=process.stdout;break}if("--socket"===c){n=parseInt(s[o+1]);break}if("--pipe"===c){i=s[o+1];break}var a=c.split("=");if("--socket"===a[0]){n=parseInt(a[1]);break}if("--pipe"===a[0]){i=a[1];break}}if(n){let i=r.createServerSocketTransport(n);e=i[0],t=i[1]}else if(i){let n=r.createServerPipeTransport(i);e=n[0],t=n[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+o);if(!t)throw new Error("Connection output stream is not set. "+o);if(s.func(e.read)&&s.func(e.on)){let t=e;t.on("end",()=>{process.exit(u?0:1)}),t.on("close",()=>{process.exit(u?0:1)})}const c=i&&i.console?new(i.console(m)):new m,l=r.createProtocolConnection(e,t,c,n);c.rawAttach(l);const h=i&&i.tracer?new(i.tracer(R)):new R,d=i&&i.telemetry?new(i.telemetry(A)):new A,v=i&&i.client?new(i.client(p)):new p,b=i&&i.window?new(i.window(f)):new f,S=i&&i.workspace?new(i.workspace(_)):new _,C=[c,h,d,v,b,S];let E=void 0,D=void 0,I=void 0,k={listen:()=>l.listen(),sendRequest:(e,...t)=>l.sendRequest(s.string(e)?e:e.method,...t),onRequest:(e,t)=>l.onRequest(e,t),sendNotification:(e,t)=>{const n=s.string(e)?e:e.method;1===arguments.length?l.sendNotification(n):l.sendNotification(n,t)},onNotification:(e,t)=>l.onNotification(e,t),onInitialize:e=>D=e,onInitialized:e=>l.onNotification(r.InitializedNotification.type,e),onShutdown:e=>E=e,onExit:e=>I=e,get console(){return c},get telemetry(){return d},get tracer(){return h},get client(){return v},get window(){return b},get workspace(){return S},onDidChangeConfiguration:e=>l.onNotification(r.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>l.onNotification(r.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>l.onNotification(r.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>l.onNotification(r.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>l.onNotification(r.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>l.onNotification(r.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>l.onRequest(r.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>l.onNotification(r.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>l.sendNotification(r.PublishDiagnosticsNotification.type,e),onHover:e=>l.onRequest(r.HoverRequest.type,e),onCompletion:e=>l.onRequest(r.CompletionRequest.type,e),onCompletionResolve:e=>l.onRequest(r.CompletionResolveRequest.type,e),onSignatureHelp:e=>l.onRequest(r.SignatureHelpRequest.type,e),onDefinition:e=>l.onRequest(r.DefinitionRequest.type,e),onTypeDefinition:e=>l.onRequest(r.TypeDefinitionRequest.type,e),onImplementation:e=>l.onRequest(r.ImplementationRequest.type,e),onReferences:e=>l.onRequest(r.ReferencesRequest.type,e),onDocumentHighlight:e=>l.onRequest(r.DocumentHighlightRequest.type,e),onDocumentSymbol:e=>l.onRequest(r.DocumentSymbolRequest.type,e),onWorkspaceSymbol:e=>l.onRequest(r.WorkspaceSymbolRequest.type,e),onCodeAction:e=>l.onRequest(r.CodeActionRequest.type,e),onCodeLens:e=>l.onRequest(r.CodeLensRequest.type,e),onCodeLensResolve:e=>l.onRequest(r.CodeLensResolveRequest.type,e),onDocumentFormatting:e=>l.onRequest(r.DocumentFormattingRequest.type,e),onDocumentRangeFormatting:e=>l.onRequest(r.DocumentRangeFormattingRequest.type,e),onDocumentOnTypeFormatting:e=>l.onRequest(r.DocumentOnTypeFormattingRequest.type,e),onRenameRequest:e=>l.onRequest(r.RenameRequest.type,e),onDocumentLinks:e=>l.onRequest(r.DocumentLinkRequest.type,e),onDocumentLinkResolve:e=>l.onRequest(r.DocumentLinkResolveRequest.type,e),onDocumentColor:e=>l.onRequest(r.DocumentColorRequest.type,e),onColorPresentation:e=>l.onRequest(r.ColorPresentationRequest.type,e),onFoldingRanges:e=>l.onRequest(r.FoldingRangeRequest.type,e),onExecuteCommand:e=>l.onRequest(r.ExecuteCommandRequest.type,e),dispose:()=>l.dispose()};for(let e of C)e.attach(k);return l.onRequest(r.InitializeRequest.type,e=>{s.number(e.processId)&&void 0===g&&setInterval(()=>{try{process.kill(e.processId,0)}catch(e){process.exit(u?0:1)}},3e3),s.string(e.trace)&&(h.trace=r.Trace.fromString(e.trace));for(let t of C)t.initialize(e.capabilities);if(D)return function(e){return s.thenable(e)?e:Promise.resolve(e)}(D(e,(new r.CancellationTokenSource).token)).then(e=>{if(e instanceof r.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),n.textDocumentSync?s.number(n.textDocumentSync)||s.number(n.textDocumentSync.change)||(n.textDocumentSync.change=s.number(k.__textDocumentSync)?k.__textDocumentSync:r.TextDocumentSyncKind.None):n.textDocumentSync=s.number(k.__textDocumentSync)?k.__textDocumentSync:r.TextDocumentSyncKind.None;for(let e of C)e.fillServerCapabilities(n);return t});{let e={capabilities:{textDocumentSync:r.TextDocumentSyncKind.None}};for(let t of C)t.fillServerCapabilities(e.capabilities);return e}}),l.onRequest(r.ShutdownRequest.type,()=>(u=!0,E?E((new r.CancellationTokenSource).token):void 0)),l.onNotification(r.ExitNotification.type,()=>{try{I&&I()}finally{u?process.exit(0):process.exit(1)}}),l.onNotification(r.SetTraceNotification.type,e=>{h.trace=r.Trace.fromString(e.value)}),k}(o,c,l,a)},function(e){e.all={__brand:"features"}}(t.ProposedFeatures||(t.ProposedFeatures={}))},1723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(41),i=n(669);t.ConfigurationFeature=(e=>(class extends e{getConfiguration(e){return e?i.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(r.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}}))},1724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(41);t.WorkspaceFoldersFeature=(e=>(class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}))},1725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends r{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function a(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=a;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function o(e){return s.test(e)}t.isUUID=o,t.parse=function(e){if(!o(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return a().asHex()}},1726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(1);n(8),n(64);t.uriToFilePath=function(e){let t=r.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var a=0,s=n.length;a<s;a++)n[a]=decodeURIComponent(n[a]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return i.normalize(n.join("/"))},t.resolveModule=function(e,t){throw new Error("Not implemented")},t.resolve=function(e,t,n,r){throw new Error("Not implemented")},t.resolveGlobalNodePath=function(e){throw new Error("Not implemented")},t.resolveGlobalYarnPath=function(e){throw new Error("Not implemented")},t.resolveModulePath=function(e,t,n,r){throw new Error("Not implemented")},t.resolveModule2=function(e,t,n,r){throw new Error("Not implemented")}},1727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(142);t.DockerFormatter=class{getIndentation(e){let t="\t";if(e&&e.insertSpaces){t="";for(let n=0;n<e.tabSize;n++)t+=" "}return t}createFormattingEdit(e,t,n,i,a){return i?r.TextEdit.replace({start:e.positionAt(t),end:e.positionAt(n)},a):r.TextEdit.del({start:e.positionAt(t),end:e.positionAt(n)})}formatOnType(e,t,n,r){const a=i.DockerfileParser.parse(e.getText());if(a.getEscapeCharacter()===n){for(let e of a.getComments())if(e.getRange().start.line===t.line)return[];if(a.getDirective()&&0===t.line)return[];const n=e.getText();e:for(let r=e.offsetAt(t);r<n.length;r++)switch(n.charAt(r)){case" ":case"\t":break;case"\r":case"\n":break e;default:return[]}const i=[t.line+1],s=[];return s[i[0]]=!0,this.formatLines(e,e.getText(),i,s,r)}return[]}formatRange(e,t,n){const r=[];for(let e=t.start.line;e<=t.end.line;e++)r.push(e);return this.format(e,r,n)}formatDocument(e,t){const n=[];for(let t=0;t<e.lineCount;t++)n.push(t);return this.format(e,n,t)}format(e,t,n){let r=e.getText(),a=i.DockerfileParser.parse(r);const s=[];for(let t=0;t<e.lineCount;t++)s[t]=!1;for(let e of a.getInstructions()){let t=e.getRange();s[t.start.line]=!1;for(let e=t.start.line+1;e<=t.end.line;e++)s[e]=!0}return this.formatLines(e,r,t,s,n)}formatLines(e,t,n,i,a){const s=this.getIndentation(a),o=[];e:for(let a of n){let n=e.offsetAt(r.Position.create(a,0));for(let c=n;c<t.length;c++)switch(t.charAt(c)){case" ":case"\t":break;case"\r":case"\n":if(c!==n){let t=r.TextEdit.del({start:e.positionAt(n),end:e.positionAt(c)});o.push(t)}continue e;default:if(c!==n||i[a]){let t=this.createFormattingEdit(e,n,c,i[a],s);o.push(t)}continue e}if(n<t.length){let i=r.TextEdit.del({start:e.positionAt(n),end:e.positionAt(t.length)});o.push(i)}}return o}}},1728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(1729),a=n(195),s=n(103),o=n(142);t.Dockerfile=class extends i.ImageTemplate{constructor(e){super(),this.initialInstructions=new i.ImageTemplate,this.buildStages=[],this.directive=null,this.foundFrom=!1,this.document=e}getEscapeCharacter(){if(null!==this.directive&&this.directive.getDirective()===o.Directive.escape){let e=this.directive.getValue();if("\\"===e||"`"===e)return e}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=r.Range.create(r.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!s.Util.isInsideRange(e,t))return null;for(let t of this.buildStages)if(t.contains(e))return t;let n=this.initialInstructions.getInstructions();if(n.length>0&&(this.initialInstructions.contains(e)||n[n.length-1].getRange().end.line>=e.line))return this.initialInstructions;if(this.buildStages.length>0){if(this.buildStages[0].getInstructions()[0].getRange().start.line>e.line&&this.initialInstructions.getInstructions().length>0)return this.buildStages[0];let t=this.buildStages[this.buildStages.length-1].getInstructions();if(t[t.length-1].getRange().end.line<e.line)return this;for(let t=0;t<this.buildStages.length-1;t++){let n=this.buildStages[t].getInstructions(),i=this.buildStages[t+1].getInstructions(),a=r.Range.create(n[n.length-1].getRange().end,i[0].getRange().start);if(s.Util.isInsideRange(e,a))return this.buildStages[t+1]}}return this}addInstruction(e){e.getKeyword()===o.Keyword.FROM?(this.currentBuildStage=new i.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirective(e){this.directive=e}getDirective(){return this.directive}resolveVariable(e,t){for(let n of this.getFROMs()){let r=n.getRange();if(r.start.line<=t&&t<=r.end.line){let n=new i.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(r.Position.create(t,0)).resolveVariable(e,t);if(null===n){let n=new i.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return n}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof a.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(r.Position.create(e,0));return t?t.getAvailableVariables(e):[]}}},1729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(289),a=n(291),s=n(292),o=n(293),c=n(294),u=n(195),g=n(295),l=n(296),h=n(103);t.ImageTemplate=class{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(h.Util.isInsideRange(r.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof i.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof a.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof c.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof g.Healthcheck&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof l.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){const t=[];for(const n of this.getARGs())if(n.isBefore(e)){const e=n.getProperty();if(e){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(const n of this.getENVs())if(n.isBefore(e))for(const e of n.getProperties()){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let r=n.length-1;r>=0;r--)if(n[r].isBefore(t))for(let t of n[r].getProperties())if(t.getName()===e)return t.getValue();let r=this.getARGs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t)){let t=r[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}contains(e){const t=this.instructions[0].getRange(),n=this.instructions[this.instructions.length-1].getRange();return h.Util.isInsideRange(e,r.Range.create(t.start,n.end))}}},1730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(142),a=n(192);t.KEYWORDS=["ADD","ARG","CMD","COPY","ENTRYPOINT","ENV","EXPOSE","FROM","HEALTHCHECK","LABEL","MAINTAINER","ONBUILD","RUN","SHELL","STOPSIGNAL","USER","VOLUME","WORKDIR"];class s{constructor(e){this.settings={deprecatedMaintainer:a.ValidationSeverity.WARNING,directiveCasing:a.ValidationSeverity.WARNING,emptyContinuationLine:a.ValidationSeverity.WARNING,instructionCasing:a.ValidationSeverity.WARNING,instructionCmdMultiple:a.ValidationSeverity.WARNING,instructionEntrypointMultiple:a.ValidationSeverity.WARNING,instructionHealthcheckMultiple:a.ValidationSeverity.WARNING,instructionJSONInSingleQuotes:a.ValidationSeverity.WARNING,instructionWorkdirRelative:a.ValidationSeverity.WARNING},e&&(this.settings=e)}parseDirective(e,t){let n=e.getDirective();if(null===n)return;let r=n.getDirective(),a=n.getValue();if(r===i.Directive.escape){if("\\"!==a&&"`"!==a&&""!==a){let e=n.getValueRange();t.push(s.createInvalidEscapeDirective(e.start,e.end,a))}if(n.getName()!==i.Directive.escape){let e=n.getNameRange(),r=this.createLowercaseDirective(e.start,e.end);r&&t.push(r)}}}checkArguments(e,t,n,r,a){let o=e instanceof i.PropertyInstruction?e.getPropertyArguments():e.getArguments();if(0===o.length){let n=e.getInstructionRange();t.push(s.createMissingArgument(n.start,n.end))}else if(-1===n[0])for(let e=0;e<o.length;e++){let n=r(e,o[e].getValue(),o[e].getRange());if(n){let r=o[e].getRange();t.push(n(r.start,r.end,o[e].getValue()))}}else{for(let e=0;e<n.length;e++)if(n[e]===o.length){for(let e=0;e<o.length;e++){let n=o[e].getRange(),i=r(e,o[e].getValue(),n);i instanceof Function?t.push(i(n.start,n.end,o[e].getValue())):null!==i&&t.push(i)}return}let e=o[o.length-1].getRange();a?t.push(a(e.start,e.end)):t.push(s.createExtraArgument(e.start,e.end))}}checkVariables(e,t){for(let n of e.getVariables()){let e=n.getModifier();null!==e&&(""===e?t.push(s.createVariableUnsupportedModifier(n.getRange(),n.toString(),e)):"+"!==e&&"-"!==e&&t.push(s.createVariableUnsupportedModifier(n.getModifierRange(),n.toString(),e)))}}checkProperty(e,t,n,r,i,a,o){let c=r.getName();if(""===c){let e=r.getRange();o.push(s.createSyntaxMissingNames(e.start,e.end,n))}else if(-1!==c.indexOf("=")){let t=r.getNameRange(),n=e.getText(t),i=n.indexOf("=");return void("'"===n.charAt(0)?o.push(s.createSyntaxMissingSingleQuote(t.start,e.positionAt(e.offsetAt(t.start)+i),n.substring(0,n.indexOf("=")))):'"'===n.charAt(0)&&o.push(s.createSyntaxMissingDoubleQuote(t.start,e.positionAt(e.offsetAt(t.start)+i),n.substring(0,n.indexOf("=")))))}let u=r.getValue();if(null===u){if(!a){let e=r.getNameRange();i?o.push(s.createENVRequiresTwoArguments(e.start,e.end)):o.push(s.createSyntaxMissingEquals(e.start,e.end,c))}}else if('"'===u.charAt(0)){let e=!1;for(let n=1;n<u.length;n++)switch(u.charAt(n)){case t:n++;break;case'"':n===u.length-1&&(e=!0)}if(!e){let e=r.getValueRange();o.push(s.createSyntaxMissingDoubleQuote(e.start,e.end,r.getUnescapedValue()))}}else if("'"===u.charAt(0)&&"'"!==u.charAt(u.length-1)){let e=r.getValueRange();o.push(s.createSyntaxMissingSingleQuote(e.start,e.end,u))}}validate(e){this.document=e;let t=[],n=i.DockerfileParser.parse(e.getText());this.parseDirective(n,t);let r=n.getInstructions();0!==r.length&&n.getARGs().length!==r.length||t.push(s.createNoSourceImage(e.positionAt(0),e.positionAt(0)));let a=[],o=[],c=[],u=[];for(let e of r)e instanceof i.Cmd?a.push(e):e instanceof i.Entrypoint?o.push(e):e instanceof i.Healthcheck?c.push(e):e instanceof i.From&&(a.length>1&&(u=u.concat(a)),o.length>1&&(u=u.concat(o)),c.length>1&&(u=u.concat(c)),a=[],o=[],c=[]);a.length>1&&(u=u.concat(a)),o.length>1&&(u=u.concat(o)),c.length>1&&(u=u.concat(c));for(let e of u)if(e instanceof i.Cmd){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionCmdMultiple,"CMD");n&&t.push(n)}else if(e instanceof i.Entrypoint){let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionEntrypointMultiple,"ENTRYPOINT");n&&t.push(n)}else{let n=this.createMultipleInstructions(e.getInstructionRange(),this.settings.instructionHealthcheckMultiple,"HEALTHCHECK");n&&t.push(n)}const g={},l=n.getFROMs();for(let e of l){let t=e.getBuildStage();t&&(g[t=t.toLowerCase()]||(g[t]=[]),g[t].push(e.getBuildStageRange()))}for(let e in g)if(g[e].length>1)for(let n of g[e])t.push(s.createDuplicateBuildStageName(n,e));let h=n.getEscapeCharacter(),d=!1;for(let r of n.getInstructions()){let n=r.getKeyword();if("FROM"===n)d=!0;else if(!d&&"ARG"!==n){let e=r.getInstructionRange();t.push(s.createNoSourceImage(e.start,e.end)),d=!0}this.validateInstruction(e,h,r,n,!1,t),this.checkVariables(r,t)}for(let r of n.getOnbuildTriggers())this.validateInstruction(e,h,r,r.getKeyword(),!0,t);return t}validateInstruction(e,n,i,a,o,c){if(-1===t.KEYWORDS.indexOf(a)){let e=i.getInstructionRange();c.push(s.createUnknownInstruction(e.start,e.end,a))}else{if(a!==i.getInstruction()){let e=i.getInstructionRange(),t=this.createUppercaseInstruction(e.start,e.end);t&&c.push(t)}if("MAINTAINER"===a){let e=i.getInstructionRange(),t=this.createMaintainerDeprecated(e.start,e.end);t&&c.push(t)}const t=i.getRange();if(t.start.line!==t.end.line&&!o){const n=e.getText(),i=t.end.line;let a=-1;for(let o=t.start.line;o<=i;o++){if(0===n.substring(e.offsetAt(r.Position.create(o,0)),e.offsetAt(r.Position.create(o+1,0))).trim().length){if(-1===a){a=o;continue}}else if(-1!==a){const e=s.createEmptyContinuationLine(r.Position.create(a,0),r.Position.create(o,0),this.settings.emptyContinuationLine);e&&c.push(e),a=-1}}if(-1!==a){const e=s.createEmptyContinuationLine(r.Position.create(a,0),r.Position.create(i+1,0),this.settings.emptyContinuationLine);e&&c.push(e),a=-1}}switch(a){case"CMD":this.checkJSONQuotes(i,c);break;case"ENTRYPOINT":case"RUN":case"VOLUME":this.checkArguments(i,c,[-1],function(){return null}),this.checkJSONQuotes(i,c);break;case"ARG":this.checkArguments(i,c,[-1],function(e){return e>0?s.createARGRequiresOneArgument:null},s.createARGRequiresOneArgument);let t=i.getProperty();t&&this.checkProperty(e,n,a,t,!0,!0,c);break;case"ENV":case"LABEL":this.checkArguments(i,c,[-1],function(){return null});let r=i.getProperties();if(1===r.length)this.checkProperty(e,n,a,r[0],!0,!1,c);else if(0!==r.length)for(let t of r)this.checkProperty(e,n,a,t,!1,!1,c);break;case"FROM":this.checkArguments(i,c,[1,3],function(t,n,r){switch(t){case 0:for(let e of i.getVariables())if(s.rangeContains(r,e.getRange()))return null;let a=i,o=a.getImageDigestRange();if(null===o){let t=a.getImageTagRange();if(null===t)return null;let n=e.getText(t);return""===n?s.createInvalidReferenceFormat(r):new RegExp(/^[\w][\w.-]{0,127}$/).test(n)?null:s.createInvalidReferenceFormat(a.getImageTagRange())}let c=e.getText(o),u=c.indexOf(":");if(-1===u)return""===c?s.createInvalidReferenceFormat(r):s.createInvalidReferenceFormat(a.getImageDigestRange());let g=new RegExp(/[A-Fa-f0-9_+.-]+/),l=c.substring(0,u);if(!g.test(l))return s.createInvalidReferenceFormat(a.getImageDigestRange());let h=c.substring(u+1);return new RegExp(/[A-Fa-f0-9]+/).test(h)?null:s.createInvalidReferenceFormat(a.getImageDigestRange());case 1:return"AS"===n.toUpperCase()?null:s.createInvalidAs;case 2:return n=n.toLowerCase(),new RegExp(/^[a-z]([a-z0-9_\-.]*)*$/).test(n)?null:s.createInvalidBuildStageName(r,n);default:return null}},s.createRequiresOneOrThreeArguments);break;case"HEALTHCHECK":let o=i.getArguments();const u=i.getFlags();if(0===o.length)c.push(s.createHEALTHCHECKRequiresAtLeastOneArgument(i.getInstructionRange()));else{const e=o[0].getValue().toUpperCase();if("NONE"===e){if(o.length>1){const e=o[1].getRange().start,t=o[o.length-1].getRange().end;c.push(s.createHealthcheckNoneUnnecessaryArgument(e,t))}break}if("CMD"===e){if(1===o.length){const e=o[0].getRange();c.push(s.createHealthcheckCmdArgumentMissing(e.start,e.end))}}else c.push(s.createHealthcheckTypeUnknown(o[0].getRange(),e))}const g=["interval","retries","start-period","timeout"];for(const e of u){const t=e.getName();if(-1===g.indexOf(t)){const n=e.getRange();c.push(s.createUnknownHealthcheckFlag(n.start,""===t?n.end:e.getNameRange().end,e.getName()))}else if("retries"===t){const t=e.getValue();if(t){const n=e.getValueRange(),r=parseInt(t);isNaN(r)||-1!==t.indexOf(".")?c.push(s.createInvalidSyntax(n.start,n.end,t)):r<1&&c.push(s.createFlagAtLeastOne(n.start,n.end,"--retries",r.toString()))}}}this.checkFlagValue(u,g,c),this.checkFlagDuration(u,["interval","start-period","timeout"],c),this.checkDuplicateFlags(u,g,c);break;case"ONBUILD":this.checkArguments(i,c,[-1],function(){return null});let l=i,h=l.getTrigger();switch(h){case"FROM":case"MAINTAINER":c.push(s.createOnbuildTriggerDisallowed(l.getTriggerRange(),h));break;case"ONBUILD":c.push(s.createOnbuildChainingDisallowed(l.getTriggerRange()))}break;case"SHELL":this.checkArguments(i,c,[-1],function(){return null}),this.checkJSON(e,i,c);break;case"STOPSIGNAL":this.checkArguments(i,c,[1],function(e,t){if(0===t.indexOf("SIG")||-1!=t.indexOf("$"))return null;for(var n=0;n<t.length;n++)if("0">t.charAt(n)||"9"<t.charAt(n))return s.createInvalidStopSignal;return null});let d=i.getExpandedArguments();if(1===d.length){let e=d[0].getValue(),t=i.getVariables();if(0===t.length){if(-1!==e.indexOf("$")){let t=d[0].getRange();c.push(s.createInvalidStopSignal(t.start,t.end,e))}}else for(let n of t){let t=n.getRange(),r=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));if(e.includes(r)&&!n.isDefined()){let e=d[0].getRange();c.push(s.createInvalidStopSignal(e.start,e.end,""));break}}}break;case"EXPOSE":let m=i.getExpandedArguments();if(0===m.length){let e=i.getInstructionRange();c.push(s.createMissingArgument(e.start,e.end))}else{const e=/^([0-9])+(-[0-9]+)?(:([0-9])+(-[0-9]*)?)?(\/(\w*))?(\/\w*)*$/;e:for(let t=0;t<m.length;t++){const n=m[t].getValue(),r=e.exec(n);if(r){if(r[7]){const e=r[7].toLowerCase();if(""!==e&&"tcp"!==e&&"udp"!==e&&"sctp"!==e){const n=m[t].getRange(),i=this.document.offsetAt(n.start),a=this.document.getText().substring(i,this.document.offsetAt(n.end)),o=i+a.indexOf(r[7].substring(0,1)),u=1===e.length?i+o+1:i+a.length;c.push(s.createInvalidProto(this.document.positionAt(o),this.document.positionAt(u),r[7]))}}}else{let e=i.getVariables();for(let t of e){let e=t.getRange(),r=this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end));if(n.includes(r))continue e}c.push(s.createInvalidPort(m[t].getRange(),n))}}}break;case"ADD":const f=i,p=i.getArguments();if(1===p.length)if(f.getClosingBracket()){const e=f.getJSONStrings();if(0===e.length)c.push(s.createADDRequiresAtLeastTwoArguments(i.getArgumentsRange()));else if(1===e.length)c.push(s.createADDRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else c.push(s.createADDRequiresAtLeastTwoArguments(p[0].getRange()));else if(0===p.length)c.push(s.createADDRequiresAtLeastTwoArguments(i.getInstructionRange()));else if(2===p.length){if(f.getClosingBracket()){const e=f.getJSONStrings();if(0===e.length)c.push(s.createADDRequiresAtLeastTwoArguments(i.getArgumentsRange()));else if(1===e.length)c.push(s.createADDRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}}else if(f.getClosingBracket()){const e=f.getJSONStrings();if(e.length>2){const t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createADDDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else{const e=p[p.length-1].getValue(),t=e.charAt(e.length-1);"\\"!==t&&"/"!==t&&c.push(s.createADDDestinationNotDirectory(p[p.length-1].getRange()))}const _=f.getFlags();for(let e of _){const t=e.getName(),n=e.getRange();if(""===t)c.push(s.createUnknownAddFlag(n.start,n.end,t));else if("chown"!==t){let r=e.getNameRange();c.push(s.createUnknownAddFlag(n.start,r.end,t))}}this.checkFlagValue(_,["chown"],c),this.checkDuplicateFlags(_,["chown"],c),this.checkJSONQuotes(i,c);break;case"COPY":let R=i,A=i.getArguments(),v=R.getFlags();if(v.length>0){for(let e of v){const t=e.getName(),n=e.getRange();if(""===t)c.push(s.createUnknownCopyFlag(n.start,n.end,t));else if("from"!==t&&"chown"!==t){let r=e.getNameRange();c.push(s.createUnknownCopyFlag(n.start,r.end,t))}}let e=R.getFromFlag();if(e){let t=e.getValue();if(null!==t){if(!new RegExp(/^[a-zA-Z0-9].*$/).test(t)){let n=""===t?e.getRange():e.getValueRange();c.push(s.createFlagInvalidFrom(n.start,n.end,t))}}}}if(1===A.length)if(R.getClosingBracket()){const e=R.getJSONStrings();if(0===e.length)c.push(s.createCOPYRequiresAtLeastTwoArguments(i.getArgumentsRange()));else if(1===e.length)c.push(s.createCOPYRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else c.push(s.createCOPYRequiresAtLeastTwoArguments(A[0].getRange()));else if(0===A.length)c.push(s.createCOPYRequiresAtLeastTwoArguments(i.getInstructionRange()));else if(2===A.length){if(R.getClosingBracket()){const e=R.getJSONStrings();if(0===e.length)c.push(s.createCOPYRequiresAtLeastTwoArguments(i.getArgumentsRange()));else if(1===e.length)c.push(s.createCOPYRequiresAtLeastTwoArguments(e[0].getJSONRange()));else if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}}else if(R.getClosingBracket()){let e=R.getJSONStrings();if(e.length>2){let t=e[e.length-1].getValue(),n=t.charAt(t.length-2);"\\"!==n&&"/"!==n&&c.push(s.createCOPYDestinationNotDirectory(e[e.length-1].getJSONRange()))}}else{let e=A[A.length-1].getValue(),t=e.charAt(e.length-1);"\\"!==t&&"/"!==t&&c.push(s.createCOPYDestinationNotDirectory(A[A.length-1].getRange()))}this.checkFlagValue(v,["chown","from"],c),this.checkDuplicateFlags(v,["chown","from"],c),this.checkJSONQuotes(i,c);break;case"WORKDIR":this.checkArguments(i,c,[-1],function(){return null});let b=i.getArgumentsContent();if(b){let e=new RegExp(/^(\$|([a-zA-Z](\$|:(\$|\\|\/)))).*$/);if(!b.startsWith("/")&&!e.test(b)){let e=this.createWORKDIRNotAbsolute(i.getArgumentsRange());e&&c.push(e)}}break;default:this.checkArguments(i,c,[-1],function(){return null})}}}checkFlagValue(e,t,n){for(let r of e){let e=r.getName();if(null===r.getValue()&&-1!==t.indexOf(e)){let t=r.getNameRange();n.push(s.createFlagMissingValue(t.start,t.end,e))}}}checkFlagDuration(e,t,n){e:for(let r of e){let e=r.getName();if(-1!==t.indexOf(e)){let t=r.getValue();if(null!==t&&0!==t.length){switch(t.charAt(0)){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case".":case"-":break;default:let e=r.getValueRange();n.push(s.createFlagInvalidDuration(e.start,e.end,t));continue e}let i=!1,a=0,o=0,c=!1,u=!1,g=0;t:for(let l=0;l<t.length;l++)switch(i=!1,t.charAt(l)){case"-":if(c){let e=r.getValueRange();n.push(s.createFlagUnknownUnit(e,t.charAt(l),t));continue e}if(u){let e=r.getValueRange();n.push(s.createFlagInvalidDuration(e.start,e.end,t));continue e}u=!0;continue;case".":g++;continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=!0;continue;default:if(g>1){let e=r.getValueRange();n.push(s.createFlagMissingDuration(e.start,e.end,t));continue e}g=0;let h=parseFloat(t.substring(a,l));for(let c=l+1;c<t.length;c++)if(s.isNumberRelated(t.charAt(c))){let u=t.substring(l,c);if(h<0||"-"===t.charAt(a)&&0===h){let t=r.getNameRange();n.push(s.createFlagLessThan1ms(t.start,t.end,e));continue e}switch(u){case"h":o+=1e3*h*60*60,a=l=c-1,i=!0;continue t;case"m":o+=1e3*h*60,a=l=c-1,i=!0;continue t;case"s":o+=1e3*h,a=l=c-1,i=!0;continue t;case"ms":o+=h,a=l=c-1,i=!0;continue t;case"us":case"µs":o+=h/1e3,a=l=c-1,i=!0;continue t;case"ns":o+=h/1e6,a=l=c-1,i=!0;continue t;default:let e=r.getValueRange();n.push(s.createFlagUnknownUnit(e,u,t));continue e}}if(h<0||"-"===t.charAt(a)&&0===h){let t=r.getNameRange();n.push(s.createFlagLessThan1ms(t.start,t.end,e));continue e}let d=t.substring(l,t.length);switch(d){case"h":o+=1e3*h*60*60,i=!0;break t;case"m":o+=1e3*h*60,i=!0;break t;case"s":o+=1e3*h,i=!0;break t;case"ms":o+=h,i=!0;break t;case"us":case"µs":o+=h/1e3,i=!0;break t;case"ns":o+=h/1e6,i=!0;break t;default:let e=r.getValueRange();n.push(s.createFlagUnknownUnit(e,d,t))}continue e}if(i){if(o<1){let t=r.getNameRange();n.push(s.createFlagLessThan1ms(t.start,t.end,e))}}else{let e=r.getValueRange();n.push(s.createFlagMissingDuration(e.start,e.end,t))}}}}}static isNumberRelated(e){switch(e){case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return!0}return!1}checkDuplicateFlags(e,t,n){let r=e.map(function(e){return e.getName()});for(let i of t){let t=r.indexOf(i),a=r.lastIndexOf(i);if(t!==a){let i=e[t].getNameRange();n.push(s.createFlagDuplicate(i.start,i.end,r[t])),i=e[a].getNameRange(),n.push(s.createFlagDuplicate(i.start,i.end,r[t]))}}}checkJSON(e,t,n){if(null===t.getArgumentsContent())return;let r=t.getArgumentsRange(),i=t.getArguments();if(1===i.length&&"[]"===i[0].getValue()||2===i.length&&"["===i[0].getValue()&&"]"===i[1].getValue())return void n.push(s.createShellRequiresOne(r));const a=t.getClosingBracket();if(a){let i=e.getText();'"'!==(i=(i=i.substring(e.offsetAt(t.getOpeningBracket().getRange().end),e.offsetAt(a.getRange().start))).trim()).charAt(i.length-1)&&n.push(s.createShellJsonForm(r))}else n.push(s.createShellJsonForm(r))}checkJSONQuotes(e,t){let n=e.getArgumentsContent();if(null===n)return;let r=e.getArgumentsRange(),i=e.getArguments();if(1===i.length&&"[]"===i[0].getValue()||2===i.length&&"["===i[0].getValue()&&"]"===i[1].getValue())return;let a=!1,o=null,c=!1;e:for(let e=0;e<n.length;e++)switch(n.charAt(e)){case"[":null===o&&(o="[",a=!0);break;case"'":if("["===o||","===o){c=!0,o="'";continue}if("'"!==o)break e;if(!c)break e;c=!1;break;case",":if(!a)break e;if(!c){if("'"!==o)break e;o=","}break;case"]":if(!c){if("'"===o||","===o){o=null;const e=s.createJSONInSingleQuotes(r,this.settings.instructionJSONInSingleQuotes);e&&t.push(e)}break e}break;case" ":case"\t":break;default:if(!c)break e}}static formatMessage(e,...t){for(let n=0;n<t.length;n++)e=e.replace("${"+n+"}",t[n]);return e}static getDiagnosticMessage_DirectiveCasing(){return s.dockerProblems.directiveCasing}static getDiagnosticMessage_DirectiveEscapeInvalid(e){return s.formatMessage(s.dockerProblems.directiveEscapeInvalid,e)}static getDiagnosticMessage_NoSourceImage(){return s.dockerProblems.noSourceImage}static getDiagnosticMessage_EmptyContinuationLine(){return s.dockerProblems.emptyContinuationLine}static getDiagnosticMessage_DuplicateBuildStageName(e){return s.formatMessage(s.dockerProblems.duplicateBuildStageName,e)}static getDiagnosticMessage_InvalidBuildStageName(e){return s.formatMessage(s.dockerProblems.invalidBuildStageName,e)}static getDiagnosticMessage_FlagAtLeastOne(e,t){return s.formatMessage(s.dockerProblems.flagAtLeastOne,e,t)}static getDiagnosticMessage_FlagDuplicate(e){return s.formatMessage(s.dockerProblems.flagDuplicate,e)}static getDiagnosticMessage_FlagInvalidDuration(e){return s.formatMessage(s.dockerProblems.flagInvalidDuration,e)}static getDiagnosticMessage_FlagLessThan1ms(e){return s.formatMessage(s.dockerProblems.flagLessThan1ms,e)}static getDiagnosticMessage_FlagMissingDuration(e){return s.formatMessage(s.dockerProblems.flagMissingDuration,e)}static getDiagnosticMessage_FlagInvalidFromValue(e){return s.formatMessage(s.dockerProblems.flagInvalidFrom,e)}static getDiagnosticMessage_FlagMissingValue(e){return s.formatMessage(s.dockerProblems.flagMissingValue,e)}static getDiagnosticMessage_FlagUnknown(e){return s.formatMessage(s.dockerProblems.flagUnknown,e)}static getDiagnosticMessage_FlagUnknownUnit(e,t){return s.formatMessage(s.dockerProblems.flagUnknownUnit,e,t)}static getDiagnosticMessage_InvalidAs(){return s.dockerProblems.invalidAs}static getDiagnosticMessage_InvalidPort(e){return s.formatMessage(s.dockerProblems.invalidPort,e)}static getDiagnosticMessage_InvalidProto(e){return s.formatMessage(s.dockerProblems.invalidProtocol,e)}static getDiagnosticMessage_InvalidReferenceFormat(){return s.dockerProblems.invalidReferenceFormat}static getDiagnosticMessage_InvalidSignal(e){return s.formatMessage(s.dockerProblems.invalidStopSignal,e)}static getDiagnosticMessage_InvalidSyntax(e){return s.formatMessage(s.dockerProblems.invalidSyntax,e)}static getDiagnosticMessage_InstructionExtraArgument(){return s.dockerProblems.instructionExtraArgument}static getDiagnosticMessage_InstructionMissingArgument(){return s.dockerProblems.instructionMissingArgument}static getDiagnosticMessage_ADDDestinationNotDirectory(){return s.formatMessage(s.dockerProblems.invalidDestination,"ADD")}static getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(){return s.formatMessage(s.dockerProblems.instructionRequiresAtLeastTwoArguments,"ADD")}static getDiagnosticMessage_ARGRequiresOneArgument(){return s.formatMessage(s.dockerProblems.instructionRequiresOneArgument,"ARG")}static getDiagnosticMessage_COPYDestinationNotDirectory(){return s.formatMessage(s.dockerProblems.invalidDestination,"COPY")}static getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(){return s.formatMessage(s.dockerProblems.instructionRequiresAtLeastTwoArguments,"COPY")}static getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(){return s.formatMessage(s.dockerProblems.instructionRequiresAtLeastOneArgument,"HEALTHCHECK")}static getDiagnosticMessage_ENVRequiresTwoArguments(){return s.formatMessage(s.dockerProblems.instructionRequiresTwoArguments,"ENV")}static getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(){return s.dockerProblems.fromRequiresOneOrThreeArguments}static getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(){return s.formatMessage(s.dockerProblems.instructionUnnecessaryArgument,"HEALTHCHECK NONE")}static getDiagnosticMessage_InstructionMultiple(e){return s.formatMessage(s.dockerProblems.instructionMultiple,e)}static getDiagnosticMessage_InstructionUnknown(e){return s.formatMessage(s.dockerProblems.instructionUnknown,e)}static getDiagnosticMessage_SyntaxMissingEquals(e){return s.formatMessage(s.dockerProblems.syntaxMissingEquals,e)}static getDiagnosticMessage_SyntaxMissingNames(e){return s.formatMessage(s.dockerProblems.syntaxMissingNames,e)}static getDiagnosticMessage_SyntaxMissingSingleQuote(e){return s.formatMessage(s.dockerProblems.syntaxMissingSingleQuote,e)}static getDiagnosticMessage_SyntaxMissingDoubleQuote(e){return s.formatMessage(s.dockerProblems.syntaxMissingDoubleQuote,e)}static getDiagnosticMessage_InstructionCasing(){return s.dockerProblems.instructionCasing}static getDiagnosticMessage_InstructionJSONInSingleQuotes(){return s.dockerProblems.instructionJSONInSingleQuotes}static getDiagnosticMessage_OnbuildChainingDisallowed(){return s.dockerProblems.onbuildChainingDisallowed}static getDiagnosticMessage_OnbuildTriggerDisallowed(e){return s.formatMessage(s.dockerProblems.onbuildTriggerDisallowed,e)}static getDiagnosticMessage_VariableModifierUnsupported(e,t){return s.formatMessage(s.dockerProblems.variableModifierUnsupported,e,t)}static getDiagnosticMessage_ShellJsonForm(){return s.dockerProblems.shellJsonForm}static getDiagnosticMessage_ShellRequiresOne(){return s.dockerProblems.shellRequiresOne}static getDiagnosticMessage_DeprecatedMaintainer(){return s.dockerProblems.deprecatedMaintainer}static getDiagnosticMessage_HealthcheckCmdArgumentMissing(){return s.dockerProblems.healthcheckCmdArgumentMissing}static getDiagnosticMessage_HealthcheckTypeUnknown(e){return s.formatMessage(s.dockerProblems.healthcheckTypeUnknown,e)}static getDiagnosticMessage_WORKDIRPathNotAbsolute(){return s.formatMessage(s.dockerProblems.workdirPathNotAbsolute)}static createInvalidEscapeDirective(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_DirectiveEscapeInvalid(n),a.ValidationCode.INVALID_ESCAPE_DIRECTIVE)}static createDuplicateBuildStageName(e,t){return s.createError(e.start,e.end,s.getDiagnosticMessage_DuplicateBuildStageName(t),a.ValidationCode.DUPLICATE_BUILD_STAGE_NAME)}static createInvalidBuildStageName(e,t){return s.createError(e.start,e.end,s.getDiagnosticMessage_InvalidBuildStageName(t),a.ValidationCode.INVALID_BUILD_STAGE_NAME)}static createFlagAtLeastOne(e,t,n,r){return s.createError(e,t,s.getDiagnosticMessage_FlagAtLeastOne(n,r),a.ValidationCode.FLAG_AT_LEAST_ONE)}static createFlagDuplicate(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagDuplicate(n),a.ValidationCode.FLAG_DUPLICATE)}static createFlagInvalidDuration(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagInvalidDuration(n),a.ValidationCode.FLAG_INVALID_DURATION)}static createFlagLessThan1ms(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagLessThan1ms(n),a.ValidationCode.FLAG_LESS_THAN_1MS)}static createFlagMissingDuration(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagMissingDuration(n),a.ValidationCode.FLAG_MISSING_DURATION)}static createFlagInvalidFrom(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagInvalidFromValue(n),a.ValidationCode.FLAG_INVALID_FROM_VALUE)}static createFlagMissingValue(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagMissingValue(n),a.ValidationCode.FLAG_MISSING_VALUE)}static createUnknownAddFlag(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagUnknown(n),a.ValidationCode.UNKNOWN_ADD_FLAG)}static createUnknownCopyFlag(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagUnknown(n),a.ValidationCode.UNKNOWN_COPY_FLAG)}static createUnknownHealthcheckFlag(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_FlagUnknown(n),a.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG)}static createFlagUnknownUnit(e,t,n){return s.createError(e.start,e.end,s.getDiagnosticMessage_FlagUnknownUnit(t,n),a.ValidationCode.FLAG_UNKNOWN_UNIT)}static createInvalidAs(e,t){return s.createError(e,t,s.getDiagnosticMessage_InvalidAs(),a.ValidationCode.INVALID_AS)}static createInvalidPort(e,t){return s.createError(e.start,e.end,s.getDiagnosticMessage_InvalidPort(t),a.ValidationCode.INVALID_PORT)}static createInvalidProto(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_InvalidProto(n),a.ValidationCode.INVALID_PROTO)}static createInvalidReferenceFormat(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_InvalidReferenceFormat(),a.ValidationCode.INVALID_REFERENCE_FORMAT)}static createInvalidStopSignal(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_InvalidSignal(n),a.ValidationCode.INVALID_SIGNAL)}static createInvalidSyntax(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_InvalidSyntax(n),a.ValidationCode.INVALID_SYNTAX)}static createMissingArgument(e,t){return s.createError(e,t,s.getDiagnosticMessage_InstructionMissingArgument(),a.ValidationCode.ARGUMENT_MISSING)}static createExtraArgument(e,t){return s.createError(e,t,s.getDiagnosticMessage_InstructionExtraArgument(),a.ValidationCode.ARGUMENT_EXTRA)}static createHealthcheckNoneUnnecessaryArgument(e,t){return s.createError(e,t,s.getDiagnosticMessage_HealthcheckNoneUnnecessaryArgument(),a.ValidationCode.ARGUMENT_UNNECESSARY)}static createARGRequiresOneArgument(e,t){return s.createError(e,t,s.getDiagnosticMessage_ARGRequiresOneArgument(),a.ValidationCode.ARGUMENT_REQUIRES_ONE)}static createADDDestinationNotDirectory(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_ADDDestinationNotDirectory(),a.ValidationCode.INVALID_DESTINATION)}static createADDRequiresAtLeastTwoArguments(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_ADDRequiresAtLeastTwoArguments(),a.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createCOPYDestinationNotDirectory(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_COPYDestinationNotDirectory(),a.ValidationCode.INVALID_DESTINATION)}static createCOPYRequiresAtLeastTwoArguments(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_COPYRequiresAtLeastTwoArguments(),a.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_TWO)}static createENVRequiresTwoArguments(e,t){return s.createError(e,t,s.getDiagnosticMessage_ENVRequiresTwoArguments(),a.ValidationCode.ARGUMENT_REQUIRES_TWO)}static createHEALTHCHECKRequiresAtLeastOneArgument(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_HEALTHCHECKRequiresAtLeastOneArgument(),a.ValidationCode.ARGUMENT_REQUIRES_AT_LEAST_ONE)}static createHealthcheckCmdArgumentMissing(e,t){return s.createError(e,t,s.getDiagnosticMessage_HealthcheckCmdArgumentMissing(),a.ValidationCode.HEALTHCHECK_CMD_ARGUMENT_MISSING)}static createHealthcheckTypeUnknown(e,t){return s.createError(e.start,e.end,s.getDiagnosticMessage_HealthcheckTypeUnknown(t),a.ValidationCode.UNKNOWN_TYPE)}static createOnbuildChainingDisallowed(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_OnbuildChainingDisallowed(),a.ValidationCode.ONBUILD_CHAINING_DISALLOWED)}static createOnbuildTriggerDisallowed(e,t){return s.createError(e.start,e.end,s.getDiagnosticMessage_OnbuildTriggerDisallowed(t),a.ValidationCode.ONBUILD_TRIGGER_DISALLOWED)}static createShellJsonForm(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_ShellJsonForm(),a.ValidationCode.SHELL_JSON_FORM)}static createShellRequiresOne(e){return s.createError(e.start,e.end,s.getDiagnosticMessage_ShellRequiresOne(),a.ValidationCode.SHELL_REQUIRES_ONE)}static createRequiresOneOrThreeArguments(e,t){return s.createError(e,t,s.getDiagnosticMessage_InstructionRequiresOneOrThreeArguments(),a.ValidationCode.ARGUMENT_REQUIRES_ONE_OR_THREE)}static createNoSourceImage(e,t){return s.createError(e,t,s.getDiagnosticMessage_NoSourceImage(),a.ValidationCode.NO_SOURCE_IMAGE)}static createSyntaxMissingEquals(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_SyntaxMissingEquals(n),a.ValidationCode.SYNTAX_MISSING_EQUALS)}static createSyntaxMissingSingleQuote(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_SyntaxMissingSingleQuote(n),a.ValidationCode.SYNTAX_MISSING_SINGLE_QUOTE)}static createSyntaxMissingDoubleQuote(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_SyntaxMissingDoubleQuote(n),a.ValidationCode.SYNTAX_MISSING_DOUBLE_QUOTE)}static createSyntaxMissingNames(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_SyntaxMissingNames(n),a.ValidationCode.SYNTAX_MISSING_NAMES)}static createVariableUnsupportedModifier(e,t,n){return s.createError(e.start,e.end,s.getDiagnosticMessage_VariableModifierUnsupported(t,n),a.ValidationCode.UNSUPPORTED_MODIFIER)}static createUnknownInstruction(e,t,n){return s.createError(e,t,s.getDiagnosticMessage_InstructionUnknown(n),a.ValidationCode.UNKNOWN_INSTRUCTION)}static createError(e,t,n,i){return s.createDiagnostic(r.DiagnosticSeverity.Error,e,t,n,i)}static createJSONInSingleQuotes(e,t){return t===a.ValidationSeverity.ERROR?s.createError(e.start,e.end,s.getDiagnosticMessage_InstructionJSONInSingleQuotes(),a.ValidationCode.JSON_IN_SINGLE_QUOTES):t===a.ValidationSeverity.WARNING?s.createWarning(e.start,e.end,s.getDiagnosticMessage_InstructionJSONInSingleQuotes(),a.ValidationCode.JSON_IN_SINGLE_QUOTES):null}static createEmptyContinuationLine(e,t,n){return n===a.ValidationSeverity.ERROR?s.createError(e,t,s.getDiagnosticMessage_EmptyContinuationLine(),a.ValidationCode.EMPTY_CONTINUATION_LINE):n===a.ValidationSeverity.WARNING?s.createWarning(e,t,s.getDiagnosticMessage_EmptyContinuationLine(),a.ValidationCode.EMPTY_CONTINUATION_LINE):null}createMultipleInstructions(e,t,n){return t===a.ValidationSeverity.ERROR?s.createError(e.start,e.end,s.getDiagnosticMessage_InstructionMultiple(n),a.ValidationCode.MULTIPLE_INSTRUCTIONS):t===a.ValidationSeverity.WARNING?s.createWarning(e.start,e.end,s.getDiagnosticMessage_InstructionMultiple(n),a.ValidationCode.MULTIPLE_INSTRUCTIONS):null}createLowercaseDirective(e,t){return this.settings.directiveCasing===a.ValidationSeverity.ERROR?s.createError(e,t,s.getDiagnosticMessage_DirectiveCasing(),a.ValidationCode.CASING_DIRECTIVE):this.settings.directiveCasing===a.ValidationSeverity.WARNING?s.createWarning(e,t,s.getDiagnosticMessage_DirectiveCasing(),a.ValidationCode.CASING_DIRECTIVE):null}createUppercaseInstruction(e,t){return this.settings.instructionCasing===a.ValidationSeverity.ERROR?s.createError(e,t,s.getDiagnosticMessage_InstructionCasing(),a.ValidationCode.CASING_INSTRUCTION):this.settings.instructionCasing===a.ValidationSeverity.WARNING?s.createWarning(e,t,s.getDiagnosticMessage_InstructionCasing(),a.ValidationCode.CASING_INSTRUCTION):null}createMaintainerDeprecated(e,t){return this.settings.deprecatedMaintainer===a.ValidationSeverity.ERROR?s.createError(e,t,s.getDiagnosticMessage_DeprecatedMaintainer(),a.ValidationCode.DEPRECATED_MAINTAINER):this.settings.deprecatedMaintainer===a.ValidationSeverity.WARNING?s.createWarning(e,t,s.getDiagnosticMessage_DeprecatedMaintainer(),a.ValidationCode.DEPRECATED_MAINTAINER):null}createWORKDIRNotAbsolute(e){return this.settings.instructionWorkdirRelative===a.ValidationSeverity.ERROR?s.createError(e.start,e.end,s.getDiagnosticMessage_WORKDIRPathNotAbsolute(),a.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):this.settings.instructionWorkdirRelative===a.ValidationSeverity.WARNING?s.createWarning(e.start,e.end,s.getDiagnosticMessage_WORKDIRPathNotAbsolute(),a.ValidationCode.WORKDIR_IS_NOT_ABSOLUTE):null}static createWarning(e,t,n,i){return s.createDiagnostic(r.DiagnosticSeverity.Warning,e,t,n,i)}static createDiagnostic(e,t,n,r,i){return{range:{start:t,end:n},message:r,severity:e,code:i,source:"dockerfile-utils"}}static rangeContains(e,t){if(e.start.line===t.start.line){if(e.end.line===t.end.line)return e.start.character<=t.start.character&&e.end.character>=t.end.character}else{if(e.end.line===t.end.line)return e.start.line<t.start.line&&e.end.character>=t.end.character;if(e.start.line<t.start.line)return e.end.line===t.end.line?e.end.character>=t.end.character:e.end.line>t.end.line}return!1}}s.dockerProblems={directiveCasing:"Parser directives should be written in lowercase letters",directiveEscapeInvalid:"invalid ESCAPE '${0}'. Must be ` or \\",noSourceImage:"No source image provided with `FROM`",emptyContinuationLine:"Empty continuation line",fromRequiresOneOrThreeArguments:"FROM requires either one or three arguments",invalidAs:"Second argument should be AS",invalidPort:"Invalid containerPort: ${0}",invalidProtocol:"Invalid proto: ${0}",invalidReferenceFormat:"invalid reference format",invalidStopSignal:"Invalid signal: ${0}",invalidSyntax:'parsing "${0}": invalid syntax',invalidDestination:"When using ${0} with more than one source file, the destination must be a directory and end with a / or a \\",syntaxMissingEquals:'Syntax error - can\'t find = in "${0}". Must be of the form: name=value',syntaxMissingNames:"${0} names can not be blank",syntaxMissingSingleQuote:'failed to process "${0}": unexpected end of statement while looking for matching single-quote',syntaxMissingDoubleQuote:'failed to process "${0}": unexpected end of statement while looking for matching double-quote',duplicateBuildStageName:"duplicate name ${0}",invalidBuildStageName:'invalid name for build stage: "${0}", name can\'t start with a number or contain symbols',flagAtLeastOne:"${0} must be at least 1 (not ${1})",flagDuplicate:"Duplicate flag specified: ${0}",flagInvalidDuration:"time: invalid duration ${0}",flagInvalidFrom:"invalid from flag value ${0}: invalid reference format",flagLessThan1ms:'Interval "${0}" cannot be less than 1ms',flagMissingDuration:"time: missing unit in duration ${0}",flagMissingValue:"Missing a value on flag: ${0}",flagUnknown:"Unknown flag: ${0}",flagUnknownUnit:"time: unknown unit ${0} in duration ${1}",instructionExtraArgument:"Instruction has an extra argument",instructionMissingArgument:"Instruction has no arguments",instructionMultiple:"There can only be one ${0} instruction in a Dockerfile",instructionRequiresOneArgument:"${0} requires exactly one argument",instructionRequiresAtLeastOneArgument:"${0} requires at least one argument",instructionRequiresAtLeastTwoArguments:"${0} requires at least two arguments",instructionRequiresTwoArguments:"${0} must have two arguments",instructionUnnecessaryArgument:"${0} takes no arguments",instructionUnknown:"Unknown instruction: ${0}",instructionCasing:"Instructions should be written in uppercase letters",instructionJSONInSingleQuotes:"Instruction written as a JSON array but is using single quotes instead of double quotes",variableModifierUnsupported:'failed to process "${0}": unsupported modifier (${1}) in substitution',onbuildChainingDisallowed:"Chaining ONBUILD via `ONBUILD ONBUILD` isn't allowed",onbuildTriggerDisallowed:"${0} isn't allowed as an ONBUILD trigger",shellJsonForm:"SHELL requires the arguments to be in JSON form",shellRequiresOne:"SHELL requires at least one argument",deprecatedMaintainer:"MAINTAINER has been deprecated",healthcheckCmdArgumentMissing:"Missing command after HEALTHCHECK CMD",healthcheckTypeUnknown:'Unknown type"${0}" in HEALTHCHECK (try CMD)',workdirPathNotAbsolute:"WORKDIR paths should be absolute"},t.Validator=s},1731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(192),a=n(1732),s=n(1735),o=n(1736),c=n(1737),u=n(306),g=n(697),l=n(1738),h=n(1739),d=n(1740),m=n(307),f=n(1741),p=n(1742),_=n(698),R=n(1743),A=n(1744),v=function(){function e(){this.markdownDocumentation=new _.MarkdownDocumentation,this.plainTextDocumentation=new m.PlainTextDocumentation,this.snippetSupport=!1,this.deprecatedSupport=!1,this.foldingRangeLineFoldingOnly=!1,this.foldingRangeLimit=Number.MAX_VALUE}return e.prototype.setLogger=function(e){this.logger=e},e.prototype.setCapabilities=function(e){this.completionDocumentationFormat=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.documentationFormat,this.hoverContentFormat=e&&e.hover&&e.hover.contentFormat,this.snippetSupport=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.snippetSupport,this.deprecatedSupport=e&&e.completion&&e.completion.completionItem&&e.completion.completionItem.deprecatedSupport,this.foldingRangeLineFoldingOnly=e&&e.foldingRange&&e.foldingRange.lineFoldingOnly,this.foldingRangeLimit=e&&e.foldingRange&&e.foldingRange.rangeLimit},e.prototype.computeCodeActions=function(e,t,n){return(new o.DockerCommands).analyzeDiagnostics(n.diagnostics,e.uri)},e.prototype.computeLinks=function(e){return(new d.DockerLinks).getLinks(e)},e.prototype.resolveLink=function(e){return(new d.DockerLinks).resolveLink(e)},e.prototype.computeCommandEdits=function(e,t,n){return(new o.DockerCommands).computeCommandEdits(e,t,n)},e.prototype.computeCompletionItems=function(e,t){var n=r.TextDocument.create("","",0,e);return new a.DockerAssist(n,new s.DockerRegistryClient(this.logger),this.snippetSupport,this.deprecatedSupport).computeProposals(t)},e.prototype.resolveCompletionItem=function(e){return e.documentation?e:(new A.DockerCompletion).resolveCompletionItem(e,this.completionDocumentationFormat)},e.prototype.computeDefinition=function(e,t,n){return(new u.DockerDefinition).computeDefinition(e,t,n)},e.prototype.computeFoldingRanges=function(e){return(new c.DockerFolding).computeFoldingRanges(e,this.foldingRangeLineFoldingOnly,this.foldingRangeLimit)},e.prototype.computeHighlightRanges=function(e,t){return(new g.DockerHighlight).computeHighlightRanges(e,t)},e.prototype.computeHover=function(e,t){return new p.DockerHover(this.markdownDocumentation,this.plainTextDocumentation).onHover(e,t,this.hoverContentFormat)},e.prototype.computeSymbols=function(e,t){return(new l.DockerSymbols).parseSymbolInformation(e,t)},e.prototype.computeSignatureHelp=function(e,t){return(new h.DockerSignatures).computeSignatures(e,t)},e.prototype.computeRename=function(e,t,n,r){return(new f.DockerRename).rename(e,t,n,r)},e.prototype.validate=function(e,t){return i.validate(e,t)},e.prototype.format=function(e,t){return i.format(e,t)},e.prototype.formatRange=function(e,t,n){return(new R.DockerFormatter).formatRange(e,t,n)},e.prototype.formatOnType=function(e,t,n,r){return(new R.DockerFormatter).formatOnType(e,t,n,r)},e}();t.LanguageService=v},1732:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,o)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),s=n(144),o=n(57),c=function(){function e(e,t,n,r){this.document=e,this.dockerRegistryClient=t,this.snippetSupport=n,this.deprecatedSupport=r}return e.prototype.computeProposals=function(t){var n=this.document.getText(),r=this.document.offsetAt(t),i=o.DockerfileParser.parse(n),a=i.getEscapeCharacter(),c=i.getDirective();if(null!==c&&0===t.line){var u=c.getNameRange();return t.character<=u.start.character?[this.createEscape(0,r,o.Directive.escape)]:t.character<=u.end.character?[this.createEscape(t.character-u.start.character,r,o.Directive.escape)]:[]}var g=i.getComments();if(0!==g.length)if(0===t.line){var l=g[0].getRange();if(0===l.start.line&&l.start.character<t.character){if(null===(u=g[0].getContentRange())||t.character<=u.start.character)return[this.createEscape(0,r,o.Directive.escape)];var h=g[0].getContent();if(t.character<=u.end.character){var d=h.substring(0,t.character-u.start.character);if(0===o.Directive.escape.indexOf(d.toLowerCase()))return[this.createEscape(d.length,r,o.Directive.escape)]}return[]}}else for(var m=0,f=g;m<f.length;m++){if((u=(h=f[m]).getRange()).start.line===t.line&&u.start.character<t.character&&t.character<=u.end.character)return[]}var p=e.calculateTruePrefix(n,r,a);if(""!==p){var _=p.lastIndexOf("$");if(-1!==_&&"\\"!==p.charAt(_-1)){var R=p.substring(_+1).toLowerCase(),A=R.length+1,v=[];if(""===R){for(var b=0,S=i.getAvailableVariables(t.line);b<S.length;b++){var C=S[b],E=i.resolveVariable(C,t.line);v.push(this.createVariableCompletionItem(C,A,r,!0,E))}for(var D=0,I=o.DefaultVariables;D<I.length;D++){C=I[D],E=i.resolveVariable(C,t.line);v.push(this.createVariableCompletionItem(C,A,r,!0,E))}}else{var k=!1;"{"===R.charAt(0)&&(k=!0,R=R.substring(1));for(var y=i.getAvailableVariables(t.line),T=0,N=o.DefaultVariables;T<N.length;T++){C=N[T];-1===y.indexOf(C)&&y.push(C)}for(var O=0,P=y;O<P.length;O++){if(0===(C=P[O]).toLowerCase().indexOf(R)){E=i.resolveVariable(C,t.line);v.push(this.createVariableCompletionItem(C,A,r,k,E))}}}return v.sort(function(e,t){return e.label.toLowerCase()===t.label.toLowerCase()?-1*e.label.localeCompare(t.label):e.label.localeCompare(t.label)}),v}}var M="";e:for(var w=0,x=i.getInstructions();w<x.length;w++){var L=x[w];if(s.Util.isInsideRange(t,L.getInstructionRange()))break;if(s.Util.isInsideRange(t,L.getRange()))switch(L.getKeyword()){case"ADD":return this.createAddProposals(L,t,r,p);case"COPY":return this.createCopyProposals(i,L,t,r,p);case"FROM":return this.createFromProposals(L,t,p);case"HEALTHCHECK":var F=L.getSubcommand();return F&&F.isBefore(t)?[]:this.createHealthcheckProposals(r,p);case"ONBUILD":var H=L.getArguments();if(0===H.length||s.Util.isInsideRange(t,H[0].getRange())){M="ONBUILD";break e}var V=L.getTriggerInstruction();switch(V.getKeyword()){case"ADD":return this.createAddProposals(V,t,r,p);case"COPY":return this.createCopyProposals(i,V,t,r,p);case"HEALTHCHECK":var U=V.getSubcommand();return U&&U.isBefore(t)?[]:this.createHealthcheckProposals(r,p)}return[];default:return[]}}if(""===p)return 0===i.getInstructions().length?[this.createFROM(0,r,"FROM")]:this.createProposals(s.KEYWORDS,M,0,r);for(var q=[],K=p.toUpperCase(),G=0;G<s.KEYWORDS.length;G++){if(s.KEYWORDS[G]===K)return[];0===s.KEYWORDS[G].indexOf(K)&&q.push(s.KEYWORDS[G])}return 0===q.length?[]:this.createProposals(q,M,p.length,r)},e.prototype.createProposals=function(e,t,n,r){for(var i=[],a=0;a<e.length;a++)switch(e[a]){case"ARG":this.snippetSupport?(i.push(this.createARG_NameOnly(n,r)),i.push(this.createARG_DefaultValue(n,r))):i.push(this.createARG(n,r));break;case"HEALTHCHECK":i.push(this.createHEALTHCHECK_CMD(n,r)),i.push(this.createHEALTHCHECK_NONE(n,r));break;case"FROM":case"MAINTAINER":case"ONBUILD":if(t)break;default:i.push(this.createSingleProposals(e[a],n,r))}return i},e.prototype.createAddProposals=function(e,t,n,r){var i=e.getFlags(),a=e.getArguments();return 0===a.length&&0===e.getFlags().length?[this.createADD_FlagChown(0,n)]:a.length>0&&s.Util.isInsideRange(t,a[0].getRange())&&"-"===r?[this.createADD_FlagChown(r.length,n)]:i.length>0&&"--"===i[0].toString()?[this.createADD_FlagChown(r.length,n)]:a.length>0&&s.Util.isInsideRange(t,a[0].getRange())&&0==="--chown=".indexOf(r)||i.length>0&&0==="--chown=".indexOf(i[0].toString())?[this.createADD_FlagChown(r.length,n)]:[]},e.prototype.createCopyProposals=function(e,t,n,r,i){var a=t.getFromFlag();if(a&&s.Util.isInsideRange(n,a.getValueRange())){for(var o={},c=[],u=0,g=!1,l=this.document.getText().substring(this.document.offsetAt(a.getValueRange().start),r).toLowerCase(),h=0,d=e.getFROMs();h<d.length;h++){var m=d[h];if(!t.isAfter(m))break;var f=m.getImage(),p=m.getBuildStage();if(p){var _=p.toLowerCase();0!==_.indexOf(l)||o[_]||(o[_]=!0,c.push(this.createSourceImageCompletionItem(p,f,u,l.length,r))),g=!1}else o[u]||(o[u]=!0,c.push(this.createSourceImageCompletionItem(u.toString(),f,u,l.length,r)),g=!0);u++}return g&&c.length>0&&c.pop(),c}var R=t.getFlags(),A=t.getArguments();return 0===A.length&&0===t.getFlags().length?[this.createCOPY_FlagChown(0,r),this.createCOPY_FlagFrom(0,r)]:A.length>0&&s.Util.isInsideRange(n,A[0].getRange())&&"-"===i?[this.createCOPY_FlagChown(i.length,r),this.createCOPY_FlagFrom(i.length,r)]:R.length>0&&"--"===R[0].toString()?[this.createCOPY_FlagChown(i.length,r),this.createCOPY_FlagFrom(i.length,r)]:A.length>0&&s.Util.isInsideRange(n,A[0].getRange())&&0==="--chown=".indexOf(i)||R.length>0&&0==="--chown=".indexOf(R[0].toString())?[this.createCOPY_FlagChown(i.length,r)]:A.length>0&&s.Util.isInsideRange(n,A[0].getRange())&&0==="--from=".indexOf(i)||R.length>0&&0==="--from=".indexOf(R[0].toString())?[this.createCOPY_FlagFrom(i.length,r)]:[]},e.prototype.createFromProposals=function(e,t,n){var o=this;if(s.Util.isInsideRange(t,e.getImageTagRange())){var c=n.indexOf(":"),u=n.indexOf(":");n=c===u?n.substring(c+1):n.substring(c+1,u);var g=this.dockerRegistryClient;return new Promise(function(s){return r(o,void 0,void 0,function(){var r,o,c,u,l;return i(this,function(i){switch(i.label){case 0:return r=[],[4,g.getTags(e.getImageName())];case 1:for(o=i.sent(),c=0,u=o;c<u.length;c++)0===(l=u[c]).indexOf(n)&&r.push({textEdit:this.createTextEdit(n.length,this.document.offsetAt(t),l),label:l,kind:a.CompletionItemKind.Property,insertTextFormat:a.InsertTextFormat.PlainText});return s(r),[2]}})})})}return[]},e.prototype.createHealthcheckProposals=function(e,t){var n=[];t.length<3&&0==="CMD".indexOf(t.toUpperCase())&&n.push(this.createHEALTHCHECK_CMD_Subcommand(t.length,e)),t.length<4&&0==="NONE".indexOf(t.toUpperCase())&&n.push(this.createHEALTHCHECK_NONE_Subcommand(t.length,e)),0==="--interval".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagInterval(t.length,e)),0==="--retries".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagRetries(t.length,e)),0==="--start-period".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagStartPeriod(t.length,e)),0==="--timeout".indexOf(t)&&n.push(this.createHEALTHCHECK_FlagTimeout(t.length,e));for(var r=0;r<n.length;r++)n[r].sortText=r.toString();return n},e.calculateTruePrefix=function(e,t,n){var r=e.charAt(t-1);switch(r){case"\n":for(var i="",a=t-1;a>=0;a--)if("\n"===e.charAt(a))if(e.charAt(a-1)===n)a--;else{if("\r"!==e.charAt(a-1)||e.charAt(a-2)!==n)break;a-=2}else{if(" "===e.charAt(a)||"\t"===e.charAt(a))break;i=e.charAt(a).toUpperCase()+i}if(""!==i)return i;break;case"\r":case" ":case"\t":break;default:for(var o=r,c=t-2;c>=0&&(r=e.charAt(c),!s.Util.isWhitespace(r));c--)o=r+o;return o}return""},e.prototype.createSingleProposals=function(e,t,n){switch(e){case"ADD":return this.createADD(t,n,e);case"CMD":return this.createCMD(t,n,e);case"COPY":return this.createCOPY(t,n,e);case"ENTRYPOINT":return this.createENTRYPOINT(t,n,e);case"ENV":return this.createENV(t,n,e);case"EXPOSE":return this.createEXPOSE(t,n,e);case"FROM":return this.createFROM(t,n,e);case"LABEL":return this.createLABEL(t,n,e);case"MAINTAINER":return this.createMAINTAINER(t,n,e);case"ONBUILD":return this.createONBUILD(t,n,e);case"RUN":return this.createRUN(t,n,e);case"SHELL":return this.createSHELL(t,n,e);case"STOPSIGNAL":return this.createSTOPSIGNAL(t,n,e);case"WORKDIR":return this.createWORKDIR(t,n,e);case"VOLUME":return this.createVOLUME(t,n,e);case"USER":return this.createUSER(t,n,e)}throw new Error("Unknown keyword found: "+e)},e.prototype.createADD=function(e,t,n){return this.createKeywordCompletionItem("ADD","ADD source dest",e,t,"ADD ${1:source} ${2:dest}",n)},e.prototype.createARG=function(e,t){return this.createKeywordCompletionItem("ARG","ARG",e,t,"ARG","ARG")},e.prototype.createARG_NameOnly=function(e,t){return this.createKeywordCompletionItem("ARG","ARG name",e,t,"ARG ${1:name}","ARG_NameOnly")},e.prototype.createARG_DefaultValue=function(e,t){return this.createKeywordCompletionItem("ARG","ARG name=defaultValue",e,t,"ARG ${1:name}=${2:defaultValue}","ARG_DefaultValue")},e.prototype.createCMD=function(e,t,n){return this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,t,'CMD [ "${1:executable}" ]',n)},e.prototype.createCOPY=function(e,t,n){return this.createKeywordCompletionItem("COPY","COPY source dest",e,t,"COPY ${1:source} ${2:dest}",n)},e.prototype.createENTRYPOINT=function(e,t,n){return this.createKeywordCompletionItem("ENTRYPOINT",'ENTRYPOINT [ "executable" ]',e,t,'ENTRYPOINT [ "${1:executable}" ]',n)},e.prototype.createENV=function(e,t,n){return this.createKeywordCompletionItem("ENV","ENV key=value",e,t,"ENV ${1:key}=${2:value}",n)},e.prototype.createEXPOSE=function(e,t,n){return this.createKeywordCompletionItem("EXPOSE","EXPOSE port",e,t,"EXPOSE ${1:port}",n)},e.prototype.createFROM=function(e,t,n){return this.createKeywordCompletionItem("FROM","FROM baseImage",e,t,"FROM ${1:baseImage}",n)},e.prototype.createHEALTHCHECK_CMD=function(e,t){return this.snippetSupport?this.createKeywordCompletionItem("HEALTHCHECK",'HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 CMD [ "executable" ]',e,t,'HEALTHCHECK --interval=${1:30s} --timeout=${2:30s} --start-period=${3:5s} --retries=${4:3} CMD [ "${5:executable}" ]',"HEALTHCHECK_CMD"):{data:"HEALTHCHECK_CMD",textEdit:this.createTextEdit(e,t,"HEALTHCHECK CMD"),label:"HEALTHCHECK CMD",kind:a.CompletionItemKind.Keyword,insertTextFormat:a.InsertTextFormat.PlainText}},e.prototype.createHEALTHCHECK_CMD_Subcommand=function(e,t){return this.snippetSupport?this.createKeywordCompletionItem("CMD",'CMD [ "executable" ]',e,t,'CMD [ "${1:executable}" ]',"HEALTHCHECK_CMD"):{data:"HEALTHCHECK_CMD",textEdit:this.createTextEdit(e,t,"CMD"),label:"CMD",kind:a.CompletionItemKind.Keyword,insertTextFormat:a.InsertTextFormat.PlainText}},e.prototype.createADD_FlagChown=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,t,"--chown=${1:user:group}","ADD_FlagChown"):this.createFlagCompletionItem("--chown=",e,t,"--chown=","ADD_FlagChown")},e.prototype.createCOPY_FlagChown=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--chown=user:group",e,t,"--chown=${1:user:group}","COPY_FlagChown"):this.createFlagCompletionItem("--chown=",e,t,"--chown=","COPY_FlagChown")},e.prototype.createCOPY_FlagFrom=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--from=stage",e,t,"--from=${1:stage}","COPY_FlagFrom"):this.createFlagCompletionItem("--from=",e,t,"--from=","COPY_FlagFrom")},e.prototype.createHEALTHCHECK_FlagInterval=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--interval=30s",e,t,"--interval=${1:30s}","HEALTHCHECK_FlagInterval"):this.createFlagCompletionItem("--interval=",e,t,"--interval=","HEALTHCHECK_FlagInterval")},e.prototype.createHEALTHCHECK_FlagRetries=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--retries=3",e,t,"--retries=${1:3}","HEALTHCHECK_FlagRetries"):this.createFlagCompletionItem("--retries=",e,t,"--retries=","HEALTHCHECK_FlagRetries")},e.prototype.createHEALTHCHECK_FlagStartPeriod=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--start-period=5s",e,t,"--start-period=${1:5s}","HEALTHCHECK_FlagStartPeriod"):this.createFlagCompletionItem("--start-period=",e,t,"--start-period=","HEALTHCHECK_FlagStartPeriod")},e.prototype.createHEALTHCHECK_FlagTimeout=function(e,t){return this.snippetSupport?this.createFlagCompletionItem("--timeout=30s",e,t,"--timeout=${1:30s}","HEALTHCHECK_FlagTimeout"):this.createFlagCompletionItem("--timeout=",e,t,"--timeout=","HEALTHCHECK_FlagTimeout")},e.prototype.createHEALTHCHECK_NONE=function(e,t){return this.createPlainTextCompletionItem("HEALTHCHECK NONE",e,t,"HEALTHCHECK NONE","HEALTHCHECK_NONE")},e.prototype.createHEALTHCHECK_NONE_Subcommand=function(e,t){return this.createPlainTextCompletionItem("NONE",e,t,"NONE","HEALTHCHECK_NONE")},e.prototype.createLABEL=function(e,t,n){return this.createKeywordCompletionItem("LABEL",'LABEL key="value"',e,t,'LABEL ${1:key}="${2:value}"',n)},e.prototype.createMAINTAINER=function(e,t,n){var r=this.createKeywordCompletionItem("MAINTAINER","MAINTAINER name",e,t,"MAINTAINER ${1:name}",n);return this.deprecatedSupport&&(r.deprecated=!0),r},e.prototype.createONBUILD=function(e,t,n){return this.createKeywordCompletionItem("ONBUILD","ONBUILD INSTRUCTION",e,t,"ONBUILD ${1:INSTRUCTION}",n)},e.prototype.createRUN=function(e,t,n){return this.createKeywordCompletionItem("RUN","RUN command",e,t,"RUN ${1:command}",n)},e.prototype.createSHELL=function(e,t,n){return this.createKeywordCompletionItem("SHELL",'SHELL [ "executable" ]',e,t,'SHELL [ "${1:executable}" ]',n)},e.prototype.createSTOPSIGNAL=function(e,t,n){return this.createKeywordCompletionItem("STOPSIGNAL","STOPSIGNAL signal",e,t,"STOPSIGNAL ${1:signal}",n)},e.prototype.createUSER=function(e,t,n){return this.createKeywordCompletionItem("USER","USER daemon",e,t,"USER ${1:daemon}",n)},e.prototype.createVOLUME=function(e,t,n){return this.createKeywordCompletionItem("VOLUME",'VOLUME [ "/data" ]',e,t,'VOLUME [ "${1:/data}" ]',n)},e.prototype.createWORKDIR=function(e,t,n){return this.createKeywordCompletionItem("WORKDIR","WORKDIR /the/workdir/path",e,t,"WORKDIR ${1:/the/workdir/path}",n)},e.prototype.createEscape=function(e,t,n){return this.createKeywordCompletionItem(o.Directive.escape,"escape=`",e,t,"escape=${1:`}",n)},e.prototype.createKeywordCompletionItem=function(e,t,n,r,i,s){return this.snippetSupport||(t=e,i=e),{data:s,textEdit:this.createTextEdit(n,r,i),label:t,kind:a.CompletionItemKind.Keyword,insertTextFormat:this.snippetSupport?a.InsertTextFormat.Snippet:a.InsertTextFormat.PlainText}},e.prototype.createPlainTextCompletionItem=function(e,t,n,r,i){return{data:i,textEdit:this.createTextEdit(t,n,r),label:e,kind:a.CompletionItemKind.Keyword,insertTextFormat:a.InsertTextFormat.PlainText}},e.prototype.createFlagCompletionItem=function(e,t,n,r,i){return{data:i,textEdit:this.createTextEdit(t,n,r),label:e,kind:a.CompletionItemKind.Field,insertTextFormat:this.snippetSupport?a.InsertTextFormat.Snippet:a.InsertTextFormat.PlainText}},e.prototype.createSourceImageCompletionItem=function(e,t,n,r,i){return{textEdit:this.createTextEdit(r,i,e),label:e,documentation:t,kind:a.CompletionItemKind.Reference,insertTextFormat:a.InsertTextFormat.PlainText,sortText:n.toString()}},e.prototype.createVariableCompletionItem=function(e,t,n,r,i){return e=r?"${"+e+"}":"$"+e,{textEdit:this.createTextEdit(t,n,e),label:e,kind:a.CompletionItemKind.Variable,insertTextFormat:a.InsertTextFormat.PlainText,documentation:i}},e.prototype.createTextEdit=function(e,t,n){return 0===e?a.TextEdit.insert(this.document.positionAt(t),n):a.TextEdit.replace(a.Range.create(this.document.positionAt(t-e),this.document.positionAt(t)),n)},e}();t.DockerAssist=c},1733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(1734),a=n(198),s=n(104),o=n(57);t.Dockerfile=class extends i.ImageTemplate{constructor(e){super(),this.initialInstructions=new i.ImageTemplate,this.buildStages=[],this.directive=null,this.foundFrom=!1,this.document=e}getEscapeCharacter(){if(null!==this.directive&&this.directive.getDirective()===o.Directive.escape){let e=this.directive.getValue();if("\\"===e||"`"===e)return e}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=r.Range.create(r.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!s.Util.isInsideRange(e,t))return null;for(let t of this.buildStages)if(t.contains(e))return t;let n=this.initialInstructions.getInstructions();if(n.length>0&&(this.initialInstructions.contains(e)||n[n.length-1].getRange().end.line>=e.line))return this.initialInstructions;if(this.buildStages.length>0){if(this.buildStages[0].getInstructions()[0].getRange().start.line>e.line&&this.initialInstructions.getInstructions().length>0)return this.buildStages[0];let t=this.buildStages[this.buildStages.length-1].getInstructions();if(t[t.length-1].getRange().end.line<e.line)return this;for(let t=0;t<this.buildStages.length-1;t++){let n=this.buildStages[t].getInstructions(),i=this.buildStages[t+1].getInstructions(),a=r.Range.create(n[n.length-1].getRange().end,i[0].getRange().start);if(s.Util.isInsideRange(e,a))return this.buildStages[t+1]}}return this}addInstruction(e){e.getKeyword()===o.Keyword.FROM?(this.currentBuildStage=new i.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirective(e){this.directive=e}getDirective(){return this.directive}resolveVariable(e,t){for(let n of this.getFROMs()){let r=n.getRange();if(r.start.line<=t&&t<=r.end.line){let n=new i.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(r.Position.create(t,0)).resolveVariable(e,t);if(null===n){let n=new i.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return n}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof a.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(r.Position.create(e,0));return t?t.getAvailableVariables(e):[]}}},1734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(298),a=n(300),s=n(301),o=n(302),c=n(303),u=n(198),g=n(304),l=n(305),h=n(104);t.ImageTemplate=class{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(h.Util.isInsideRange(r.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof i.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof a.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof c.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof g.Healthcheck&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof l.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){const t=[];for(const n of this.getARGs())if(n.isBefore(e)){const e=n.getProperty();if(e){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(const n of this.getENVs())if(n.isBefore(e))for(const e of n.getProperties()){const n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let r=n.length-1;r>=0;r--)if(n[r].isBefore(t))for(let t of n[r].getProperties())if(t.getName()===e)return t.getValue();let r=this.getARGs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t)){let t=r[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}contains(e){const t=this.instructions[0].getRange(),n=this.instructions[this.instructions.length-1].getRange();return h.Util.isInsideRange(e,r.Range.create(t.start,n.end))}}},1735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=function(){function e(e){this.logger=e}return e.prototype.getTags=function(e,t){var n=this;return-1===e.indexOf("/")&&(e="library/"+e),this.requestToken(e).then(function(r){return null===r?[]:n.listTags(r.token,e).then(function(e){if(!t)return e.tags;for(var n=[],r=0,i=e.tags;r<i.length;r++){var a=i[r];0===a.indexOf(t)&&n.push(a)}return n})})},e.prototype.requestToken=function(e){var t=this;return this.performHttpsGet({hostname:"auth.docker.io",port:443,path:"/token?service=registry.docker.io&scope=repository:"+e+":pull",headers:{Accept:"application/json"}}).catch(function(e){return t.log(e),null})},e.prototype.listTags=function(e,t){var n=this;return this.performHttpsGet({hostname:"registry-1.docker.io",port:443,path:"/v2/"+t+"/tags/list",headers:{Accept:"application/json",Authorization:"Bearer "+e}}).catch(function(e){return n.log(e),{tags:[]}})},e.prototype.performHttpsGet=function(e){return new Promise(function(t,n){var i=r.get(e,function(e){if(200!==e.statusCode){var r=new Error(e.statusMessage);r.statusCode=e.statusCode,n(r)}else{var i="";e.on("data",function(e){i+=e}),e.on("end",function(){t(JSON.parse(i))})}});i.end(),i.on("error",function(e){n(e)})})},e.prototype.log=function(e){this.logger&&this.logger.log(e.toString())},e}();t.DockerRegistryClient=i},1736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(192),a=n(683),s=function(){function e(){}return e.prototype.analyzeDiagnostics=function(e,t){for(var n=[],r=0;r<e.length;r++)switch("string"==typeof e[r].code&&(e[r].code=parseInt(e[r].code)),e[r].code){case i.ValidationCode.CASING_DIRECTIVE:n.push({title:"Convert directive to lowercase",command:a.CommandIds.LOWERCASE,arguments:[t,e[r].range]});break;case i.ValidationCode.CASING_INSTRUCTION:n.push({title:"Convert instruction to uppercase",command:a.CommandIds.UPPERCASE,arguments:[t,e[r].range]});break;case i.ValidationCode.ARGUMENT_EXTRA:n.push({title:"Remove extra argument",command:a.CommandIds.EXTRA_ARGUMENT,arguments:[t,e[r].range]});break;case i.ValidationCode.INVALID_ESCAPE_DIRECTIVE:n.push({title:"Convert to backslash",command:a.CommandIds.DIRECTIVE_TO_BACKSLASH,arguments:[t,e[r].range]}),n.push({title:"Convert to backtick",command:a.CommandIds.DIRECTIVE_TO_BACKTICK,arguments:[t,e[r].range]});break;case i.ValidationCode.INVALID_AS:n.push({title:"Convert to AS",command:a.CommandIds.CONVERT_TO_AS,arguments:[t,e[r].range]});break;case i.ValidationCode.UNKNOWN_HEALTHCHECK_FLAG:n.push({title:"Convert to --interval",command:a.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL,arguments:[t,e[r].range]}),n.push({title:"Convert to --retries",command:a.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES,arguments:[t,e[r].range]}),n.push({title:"Convert to --start-period",command:a.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD,arguments:[t,e[r].range]}),n.push({title:"Convert to --timeout",command:a.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT,arguments:[t,e[r].range]});break;case i.ValidationCode.UNKNOWN_ADD_FLAG:n.push({title:"Convert to --chown",command:a.CommandIds.FLAG_TO_CHOWN,arguments:[t,e[r].range]});break;case i.ValidationCode.UNKNOWN_COPY_FLAG:n.push({title:"Convert to --chown",command:a.CommandIds.FLAG_TO_CHOWN,arguments:[t,e[r].range]}),n.push({title:"Convert to --from",command:a.CommandIds.FLAG_TO_COPY_FROM,arguments:[t,e[r].range]});break;case i.ValidationCode.EMPTY_CONTINUATION_LINE:e[r].range.start.line+1===e[r].range.end.line?n.push({title:"Remove empty continuation line",command:a.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[t,e[r].range]}):n.push({title:"Remove empty continuation lines",command:a.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE,arguments:[t,e[r].range]})}return n},e.prototype.computeCommandEdits=function(e,t,n){var i=r.TextDocument.create("","",0,e),s=n[1];switch(t){case a.CommandIds.LOWERCASE:var o=i.getText().substring(i.offsetAt(s.start),i.offsetAt(s.end));return[r.TextEdit.replace(s,o.toLowerCase())];case a.CommandIds.UPPERCASE:var c=i.getText().substring(i.offsetAt(s.start),i.offsetAt(s.end));return[r.TextEdit.replace(s,c.toUpperCase())];case a.CommandIds.EXTRA_ARGUMENT:return[r.TextEdit.del(s)];case a.CommandIds.DIRECTIVE_TO_BACKSLASH:return[r.TextEdit.replace(s,"\\")];case a.CommandIds.DIRECTIVE_TO_BACKTICK:return[r.TextEdit.replace(s,"`")];case a.CommandIds.CONVERT_TO_AS:return[r.TextEdit.replace(s,"AS")];case a.CommandIds.FLAG_TO_CHOWN:return[r.TextEdit.replace(s,"--chown")];case a.CommandIds.FLAG_TO_HEALTHCHECK_INTERVAL:return[r.TextEdit.replace(s,"--interval")];case a.CommandIds.FLAG_TO_HEALTHCHECK_RETRIES:return[r.TextEdit.replace(s,"--retries")];case a.CommandIds.FLAG_TO_HEALTHCHECK_START_PERIOD:return[r.TextEdit.replace(s,"--start-period")];case a.CommandIds.FLAG_TO_HEALTHCHECK_TIMEOUT:return[r.TextEdit.replace(s,"--timeout")];case a.CommandIds.FLAG_TO_COPY_FROM:return[r.TextEdit.replace(s,"--from")];case a.CommandIds.REMOVE_EMPTY_CONTINUATION_LINE:return[r.TextEdit.del(s)]}return null},e}();t.DockerCommands=s},1737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(57),a=function(){function e(){}return e.prototype.createFoldingRange=function(e,t,n,i,a,s){return e?{startLine:t,endLine:n,kind:s}:r.FoldingRange.create(t,n,i,a,s)},e.prototype.computeFoldingRanges=function(e,t,n){if(n<1)return[];var a=i.DockerfileParser.parse(e).getComments();if(a.length<2)return[];for(var s=[],o=!1,c=a[0].getRange(),u=r.Position.create(c.start.line+1,c.start.character),g=1;g<a.length;g++){var l=a[g].getRange();if(l.start.line===u.line)u=r.Position.create(l.end.line+1,l.end.character),o=!0;else{if(o&&(s.push(this.createFoldingRange(t,c.start.line,u.line-1,c.end.character,u.character,r.FoldingRangeKind.Comment)),s.length===n))return s;c=l,u=r.Position.create(c.start.line+1,c.start.character),o=!1}}return o&&s.push(this.createFoldingRange(t,c.start.line,u.line-1,c.end.character,u.character,r.FoldingRangeKind.Comment)),s},e}();t.DockerFolding=a},1738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(57),a=function(){function e(){}return e.prototype.createSymbolInformation=function(e,t,n,r,i){return i?{name:e,location:{uri:t,range:n},kind:r,deprecated:!0}:{name:e,location:{uri:t,range:n},kind:r}},e.prototype.parseSymbolInformation=function(e,t){var n=i.DockerfileParser.parse(t),a=n.getDirective(),s=[];null!==a&&s.push(this.createSymbolInformation(a.getName(),e.uri,a.getNameRange(),r.SymbolKind.Property,!1));for(var o=0,c=n.getInstructions();o<c.length;o++){var u=c[o],g=u.getKeyword();s.push(this.createSymbolInformation(u.getInstruction(),e.uri,u.getInstructionRange(),r.SymbolKind.Function,g===i.Keyword.MAINTAINER))}return s},e}();t.DockerSymbols=a},1739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(307),a=n(57),s=n(144),o=function(){function e(){this.documentation=new i.PlainTextDocumentation}return e.prototype.computeSignatures=function(e,t){var n=r.TextDocument.create("","",0,e),i=a.DockerfileParser.parse(n.getText());if(0===t.line){var o=i.getDirective();if(null!==o&&o.getDirective()===a.Directive.escape)return{signatures:[{label:"escape=`\\`",documentation:this.documentation.getDocumentation("signatureEscape"),parameters:[{label:"\\",documentation:this.documentation.getDocumentation("signatureEscape_Param")}]}],activeSignature:0,activeParameter:0}}for(var c=0,u=i.getComments();c<u.length;c++){var g=u[c];if(s.Util.isInsideRange(t,g.getRange()))return{signatures:[],activeSignature:null,activeParameter:null}}var l=this.getInstructionSignatures(n,i.getOnbuildTriggers(),t);return l||(l=this.getInstructionSignatures(n,i.getInstructions(),t))||(l={signatures:[],activeSignature:null,activeParameter:null}),l},e.prototype.getInstructionSignatures=function(e,t,n){for(var r=0,i=t;r<i.length;r++){var a=i[r];if(s.Util.isInsideRange(n,a.getRange())){if(s.Util.isInsideRange(n,a.getInstructionRange()))return null;switch(a.getKeyword()){case"ADD":var o=a,c={label:"ADD [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureAdd_Signature0_Param3")}]},u={label:'ADD [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureAdd_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureAdd_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,o,n,[u],c,!0,!1,!1,!1);case"ARG":var g={signatures:[{label:"ARG name",documentation:this.documentation.getDocumentation("signatureArg_Signature0"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature0_Param")}]},{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},l=a.getTextContent().indexOf("=");return-1!==l&&(g={signatures:[{label:"ARG name=defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param0")},{label:"defaultValue",documentation:this.documentation.getDocumentation("signatureArg_Signature1_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(n)>e.offsetAt(a.getRange().start)+l&&(g.activeParameter=1)),g;case"CMD":var h=a,d={label:'CMD [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature0_Param3")},{label:"]"}]},m={label:'CMD [ "parameter", "parameter2", ... ]',documentation:this.documentation.getDocumentation("signatureCmd_Signature1"),parameters:[{label:"["},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param1")},{label:'"parameter2"',documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature1_Param3")},{label:"]"}]},f={label:"CMD executable parameter ...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCmd_Signature2_Param2")}]};return this.getJSONInstructionSignatureHelp(e,h,n,[d,m],f,!1,!0,!1,!0);case"COPY":var p=a,_=p.getFromFlag();if(null!==_)if(null!==(M=_.getValueRange())&&s.Util.isInsideRange(n,M))return{signatures:[{label:"--from=stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom"),parameters:[{label:"stage",documentation:this.documentation.getDocumentation("signatureCopyFlagFrom_Param")}]}],activeSignature:0,activeParameter:0};var R={label:"COPY [flags] source ... dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param0")},{label:"source",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param2")},{label:"dest",documentation:this.documentation.getDocumentation("signatureCopy_Signature0_Param3")}]},A={label:'COPY [flags] [ "source", ..., "dest" ]',documentation:this.documentation.getDocumentation("signatureCopy_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param0")},{label:"["},{label:'"source"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param3")},{label:'"dest"',documentation:this.documentation.getDocumentation("signatureCopy_Signature1_Param4")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,p,n,[A],R,!0,!1,!1,!1);case"ENTRYPOINT":var v=a,b={label:'ENTRYPOINT [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature0_Param3")},{label:"]"}]},S={label:"ENTRYPOINT executable parameter ...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1"),parameters:[{label:"executable",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureEntrypoint_Signature1_Param2")}]};return this.getJSONInstructionSignatureHelp(e,v,n,[b],S,!1,!0,!1,!0);case"ENV":var C=[{label:"ENV key value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature0_Param1")}]},{label:"ENV key=value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature1_Param1")}]},{label:"ENV key=value key2=value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureEnv_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,n,C,a.getProperties());case"EXPOSE":var E={signatures:[{label:"EXPOSE port ...",documentation:this.documentation.getDocumentation("signatureExpose"),parameters:[{label:"port",documentation:this.documentation.getDocumentation("signatureExpose_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureExpose_Param1")}]}],activeSignature:0,activeParameter:0},D=a.getArguments();return D.length>0&&e.offsetAt(n)>e.offsetAt(D[0].getRange().end)&&(E.activeParameter=1),E;case"FROM":return this.getFromSignatureHelp(n,a);case"HEALTHCHECK":for(var I={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature0"),parameters:[{label:"CMD"}]},k={label:"HEALTHCHECK [flags] CMD ...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1"),parameters:[{label:"[flags]",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param0")},{label:"CMD"},{label:"...",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature1_Param2")}]},y={label:"HEALTHCHECK NONE",documentation:this.documentation.getDocumentation("signatureHealthcheck_Signature2"),parameters:[{label:"NONE"}]},T=a,N=T.getFlags(),O=0,P=N;O<P.length;O++){var M,w=P[O];if(null!==(M=w.getValueRange())&&s.Util.isInsideRange(n,M)){switch(w.getName()){case"interval":return{signatures:[{label:"HEALTHCHECK --interval=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagInterval_Param")}]}],activeSignature:0,activeParameter:0};case"retries":return{signatures:[{label:"HEALTHCHECK --retries=3 ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"3",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagRetries_Param")}]}],activeSignature:0,activeParameter:0};case"start-period":return{signatures:[{label:"HEALTHCHECK --start-period=5s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"5s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagStartPeriod_Param")}]}],activeSignature:0,activeParameter:0};case"timeout":return{signatures:[{label:"HEALTHCHECK --timeout=30s ...",documentation:this.documentation.getDocumentation("signatureHealthcheck"),parameters:[{label:"30s",documentation:this.documentation.getDocumentation("signatureHealthcheckFlagTimeout_Param")}]}],activeSignature:0,activeParameter:0}}break}}var x=T.getArguments();if(0==N.length&&0===x.length)return{signatures:[I,y],activeSignature:0,activeParameter:0};var L=T.getSubcommand();if(null===L)return{signatures:[k],activeSignature:0,activeParameter:0};var F=L.isBefore(n),H=L.isAfter(n),V=L.getValue();return 0==="NONE".indexOf(V.toUpperCase())?F?null:{signatures:[y],activeSignature:0,activeParameter:0}:{signatures:[k],activeSignature:0,activeParameter:F?2:H?0:1};case"LABEL":var U=[{label:"LABEL key value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature0_Param1")}]},{label:"LABEL key=value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature1_Param1")}]},{label:"LABEL key=value key2=value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2"),parameters:[{label:"key",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param0")},{label:"value",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param1")},{label:"key2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param2")},{label:"value2",documentation:this.documentation.getDocumentation("signatureLabel_Signature2_Param3")}]}];return this.getPropertySignatureHelp(e,n,U,a.getProperties());case"MAINTAINER":return{signatures:[{label:"MAINTAINER name",documentation:this.documentation.getDocumentation("signatureMaintainer"),parameters:[{label:"name",documentation:this.documentation.getDocumentation("signatureMaintainer_Param")}]}],activeSignature:0,activeParameter:0};case"ONBUILD":var q=a.getArguments();return q.length>0&&q[0].isBefore(n)?null:{signatures:[{label:"ONBUILD INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild"),parameters:[{label:"INSTRUCTION",documentation:this.documentation.getDocumentation("signatureOnbuild_Param")}]}],activeSignature:0,activeParameter:0};case"RUN":var K=a,G={label:"RUN command parameter ...",documentation:this.documentation.getDocumentation("signatureRun_Signature0"),parameters:[{label:"command",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param0")},{label:"parameter",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature0_Param2")}]},W={label:'RUN [ "command", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureRun_Signature1"),parameters:[{label:"["},{label:'"command"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureRun_Signature1_Param3")},{label:"]"}]};return this.getJSONInstructionSignatureHelp(e,K,n,[W],G,!1,!1,!1,!0);case"SHELL":var B=a,j={signatures:[{label:'SHELL [ "executable", "parameter", ... ]',documentation:this.documentation.getDocumentation("signatureShell"),parameters:[{label:"["},{label:'"executable"',documentation:this.documentation.getDocumentation("signatureShell_Param1")},{label:'"parameter"',documentation:this.documentation.getDocumentation("signatureShell_Param2")},{label:"...",documentation:this.documentation.getDocumentation("signatureShell_Param3")},{label:"]"}]}],activeSignature:0,activeParameter:null};return j.activeParameter=this.getJSONSignatureActiveParameter(e,B,n,!1,!1,!0),-1===j.activeParameter?null:j;case"STOPSIGNAL":return{signatures:[{label:"STOPSIGNAL signal",documentation:this.documentation.getDocumentation("signatureStopsignal"),parameters:[{label:"signal",documentation:this.documentation.getDocumentation("signatureStopsignal_Param")}]}],activeSignature:0,activeParameter:0};case"USER":var Y={signatures:[{label:"USER user",documentation:this.documentation.getDocumentation("signatureUser_Signature0"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature0_Param")}]},{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature2_Param")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},$=a.getTextContent().indexOf(":");return-1!==$&&(Y={signatures:[{label:"USER user:group",documentation:this.documentation.getDocumentation("signatureUser_Signature1"),parameters:[{label:"user",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param0")},{label:"group",documentation:this.documentation.getDocumentation("signatureUser_Signature1_Param1")}]},{label:"USER uid:gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3"),parameters:[{label:"uid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param0")},{label:"gid",documentation:this.documentation.getDocumentation("signatureUser_Signature3_Param1")}]}],activeSignature:0,activeParameter:0},e.offsetAt(n)>e.offsetAt(a.getRange().start)+$&&(Y.activeParameter=1)),Y;case"VOLUME":var J=a,Q={label:'VOLUME [ "/vol", ... ]',documentation:this.documentation.getDocumentation("signatureVolume_Signature1"),parameters:[{label:"["},{label:'"/vol"',documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param1")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature1_Param2")},{label:"]"}]},z={label:"VOLUME /vol ...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0"),parameters:[{label:"/vol",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param0")},{label:"...",documentation:this.documentation.getDocumentation("signatureVolume_Signature0_Param1")}]};return this.getJSONInstructionSignatureHelp(e,J,n,[Q],z,!1,!0,!0,!0);case"WORKDIR":return{signatures:[{label:"WORKDIR /the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir"),parameters:[{label:"/the/workdir/path",documentation:this.documentation.getDocumentation("signatureWorkdir_Param")}]}],activeSignature:0,activeParameter:0}}}}return null},e.prototype.getFromSignatureHelp=function(e,t){var n=[{label:"FROM baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature0_Param")}]},{label:"FROM baseImage:tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature1_Param1")}]},{label:"FROM baseImage@digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature2_Param1")}]},{label:"FROM baseImage AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param0")},{label:""},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature3_Param2")}]},{label:"FROM baseImage:tag AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param0")},{label:"tag",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature4_Param3")}]},{label:"FROM baseImage@digest AS stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5"),parameters:[{label:"baseImage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param0")},{label:"digest",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param1")},{label:"AS"},{label:"stage",documentation:this.documentation.getDocumentation("signatureFrom_Signature5_Param3")}]}],r=t.getArguments();if(r.length>=3&&r[2].isBefore(e))return null;if(0===r.length)return{signatures:n,activeSignature:0,activeParameter:0};var i=r[0].getValue(),a=-1!==i.indexOf("@"),s=!a&&-1!==i.indexOf(":"),o=r.length>1||r[0].isBefore(e);return{signatures:this.getFromSignatures(n,s,a,o),activeSignature:0,activeParameter:this.getFromActiveParameter(e,t,s,a,r)}},e.prototype.getFromSignatures=function(e,t,n,r){return n?r?[e[5]]:[e[2],e[5]]:t?r?[e[4]]:[e[1],e[4]]:r?[e[3],e[4],e[5]]:e},e.prototype.getFromActiveParameter=function(e,t,n,r,i){var a=n&&s.Util.isInsideRange(e,t.getImageTagRange()),o=r&&s.Util.isInsideRange(e,t.getImageDigestRange());if(1===i.length){if(i[0].isBefore(e))return 2}else if(2===i.length){if(i[1].isBefore(e))return 3;if(s.Util.isInsideRange(e,i[1].getRange())||i[0].isBefore(e))return 2}else{if(s.Util.isInsideRange(e,i[2].getRange())||i[1].isBefore(e))return 3;if(s.Util.isInsideRange(e,i[1].getRange())||i[0].isBefore(e))return 2}return a||o?1:0},e.prototype.getJSONInstructionSignatureHelp=function(e,t,n,r,i,a,s,o,c){var u=this.getJSONSignatureActiveParameter(e,t,n,a,o,c);return-1===u?{signatures:[i],activeSignature:0,activeParameter:u=this.getSignatureActiveParameter(t,n,a,o?1:2,c)}:0===u?s?(r.push(i),{signatures:r,activeSignature:0,activeParameter:0}):(r.unshift(i),{signatures:r,activeSignature:0,activeParameter:0}):1===u&&a?s?(r.push(i),{signatures:r,activeSignature:0,activeParameter:1}):(r.unshift(i),{signatures:r,activeSignature:0,activeParameter:1}):{signatures:r,activeSignature:0,activeParameter:u}},e.prototype.getJSONSignatureActiveParameter=function(e,t,n,r,i,a){var o=r?1:0;if(r){var c=t.getFlags();if(c.length>0){var u=c[c.length-1].getRange().end;if(s.Util.positionBefore(n,u)||s.Util.positionEquals(n,u))return 0}}var g=t.getClosingBracket();if(g){if((m=g.getRange()).end.line===n.line&&m.end.character===n.character)return i?3+o:4+o;if(g.isBefore(n))return-1}var l=t.getJSONStrings();if(!i&&l.length>1&&l[1].isBefore(n))return 2===l.length?3+o:a||s.Util.isInsideRange(n,l[l.length-1].getRange())?3+o:2+o;if(l.length>0&&l[0].isBefore(n)){if(l.length>2)return 2+o;var h=e.offsetAt(l[0].getRange().end),d=e.offsetAt(n);return-1===e.getText().substring(h,d).indexOf(",")?1+o:a?2+o:3+o}var m,f=t.getOpeningBracket();return f?(m=f.getRange()).end.line===n.line&&m.end.character===n.character||f.isBefore(n)?1+o:0+o:0===t.getArguments().length?0+o:-1},e.prototype.getSignatureActiveParameter=function(e,t,n,r,i){var a=n?1:0,o=e.getArguments();if(i)for(var c=o.length-1;c>=0;c--){if(o[c].isBefore(t))return Math.min(c+1,r)+a;if(s.Util.isInsideRange(t,o[c].getRange()))return Math.min(c,r)+a}switch(o.length){case 1:return o[0].isBefore(t)?2+a:0+a;default:return o[o.length-1].isBefore(t)||s.Util.isInsideRange(t,o[o.length-1].getRange())?2+a:o[0].isBefore(t)?1+a:0+a}},e.prototype.getPropertySignatureHelp=function(e,t,n,r){return{signatures:this.getPropertySignatures(e,t,n,r),activeSignature:0,activeParameter:this.getPropertySignatureActiveParameter(e,t,r)}},e.prototype.getPropertySignatures=function(t,n,r,i){if(0===i.length)return r;if(1!==i.length)return[r[2]];var a=i[0].getValueRange();return null===a?e.isNameBefore(i[0],n)?[r[0]]:r:-1===t.getText().substring(t.offsetAt(i[0].getNameRange().end),t.offsetAt(a.start)).indexOf("=")?[r[0]]:e.isValueBefore(i[0],n)?[r[2]]:[r[1],r[2]]},e.prototype.getPropertySignatureActiveParameter=function(t,n,r){if(0===r.length)return 0;for(var i=r.length-1;i>0;i--){if(e.isInValue(r[i],n))return 3;if(e.isNameBefore(r[i],n)||e.isInName(r[i],n))return 2}return e.isInValue(r[0],n)?1:e.isValueBefore(r[0],n)?-1===t.getText().substring(t.offsetAt(r[0].getNameRange().end),t.offsetAt(r[0].getValueRange().start)).indexOf("=")?1:2:e.isNameBefore(r[0],n)?1:0},e.isInName=function(e,t){return s.Util.isInsideRange(t,e.getNameRange())},e.isNameBefore=function(t,n){var r=t.getNameRange();return!e.isInName(t,n)&&(r.start.line<n.line||r.start.line===n.line&&r.end.character<n.character)},e.isInValue=function(e,t){var n=e.getValueRange();return!!n&&s.Util.isInsideRange(t,n)},e.isValueBefore=function(e,t){var n=e.getValueRange();return null!==n&&(n.start.line<t.line||n.start.line===t.line&&(n.start.line===n.end.line?n.end.character<t.character:n.start.character<t.character))},e}();t.DockerSignatures=o},1740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),i=function(){function e(){}return e.prototype.getLinks=function(e){for(var t=[],n=0,i=r.DockerfileParser.parse(e).getFROMs();n<i.length;n++){var a=i[n],s=a.getImageName();s&&(-1===s.indexOf("/")?t.push({range:a.getImageNameRange(),data:"_/"+s+"/"}):t.push({range:a.getImageNameRange(),data:"r/"+s+"/"}))}return t},e.prototype.resolveLink=function(e){return e.data&&(e.target="https://hub.docker.com/"+e.data),e},e}();t.DockerLinks=i},1741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(697),a=function(){function e(){}return e.prototype.rename=function(e,t,n,a){for(var s=[],o=0,c=(new i.DockerHighlight).computeHighlightRanges(t,n);o<c.length;o++){var u=c[o];s.push(r.TextEdit.replace(u.range,a))}return s},e}();t.DockerRename=a},1742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(57),a=n(144),s=n(306),o=function(){function e(e,t){this.markdown=e,this.plainText=t}return e.prototype.onHover=function(e,t,n){var o=i.DockerfileParser.parse(e),c=o.getContainingImage(t);if(!c)return null;var u=this.computeHoverKey(o,t);if(u){if(n&&n.length>0){switch(n[0]){case r.MarkupKind.Markdown:var g=this.markdown.getMarkdown(u);return g?{contents:{kind:r.MarkupKind.Markdown,value:g.contents}}:null;case r.MarkupKind.PlainText:var l=this.plainText.getDocumentation(u);if(l)return{contents:{kind:r.MarkupKind.PlainText,value:l}}}return null}return this.markdown.getMarkdown(u)}for(var h=0,d=c.getInstructions();h<d.length;h++){if((v=d[h])instanceof i.Arg){var m=v.getProperty();if(m&&a.Util.isInsideRange(t,m.getNameRange())&&null!==m.getValue())return{contents:m.getValue()}}if(v instanceof i.Env)for(var f=0,p=v.getProperties();f<p.length;f++){var _=p[f];if(a.Util.isInsideRange(t,_.getNameRange())&&null!==_.getValue())return{contents:_.getValue()}}}for(var R=0,A=c.getInstructions();R<A.length;R++)for(var v,b=0,S=(v=A[R]).getVariables();b<S.length;b++){var C=S[b];if(a.Util.isInsideRange(t,C.getNameRange())){var E=o.resolveVariable(C.getName(),C.getNameRange().start.line);if(E||""===E)return{contents:E};if(null===E)return null}}var D=s.DockerDefinition.findDefinition(o,t);return D&&null!==D.getValue()?{contents:D.getValue()}:null},e.prototype.computeHoverKey=function(e,t){var n=e.getDirective(),r=e.getContainingImage(t);if(0===t.line&&null!==n&&n.getDirective()===i.Directive.escape){var s=n.getNameRange();if(a.Util.isInsideRange(t,s))return i.Directive.escape}for(var o=0,c=r.getInstructions();o<c.length;o++){var u=c[o],g=u.getInstructionRange();if(a.Util.isInsideRange(t,g))return u.getKeyword();if(u instanceof i.Onbuild){s=u.getTriggerRange();if(a.Util.isInsideRange(t,s))return u.getTrigger()}var l=this.getFlagsHover(t,u);if(null!==l)return l}},e.prototype.getFlagsHover=function(e,t){switch(t.getKeyword()){case"ADD":for(var n=0,r=t.getFlags();n<r.length;n++){var i=r[n];if(a.Util.isInsideRange(e,i.getNameRange()))switch(i.getName()){case"chown":return"ADD_FlagChown"}}break;case"COPY":for(var s=0,o=t.getFlags();s<o.length;s++){i=o[s];if(a.Util.isInsideRange(e,i.getNameRange()))switch(i.getName()){case"chown":return"COPY_FlagChown";case"from":return"COPY_FlagFrom"}}break;case"HEALTHCHECK":for(var c=0,u=t.getFlags();c<u.length;c++){i=u[c];if(a.Util.isInsideRange(e,i.getNameRange())){switch(i.getName()){case"interval":return"HEALTHCHECK_FlagInterval";case"retries":return"HEALTHCHECK_FlagRetries";case"start-period":return"HEALTHCHECK_FlagStartPeriod";case"timeout":return"HEALTHCHECK_FlagTimeout"}return null}}break;case"ONBUILD":var g=t.getTriggerInstruction();if(null!==g)return this.getFlagsHover(e,g)}return null},e}();t.DockerHover=o},1743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(57),a=function(){function e(){}return e.prototype.getIndentation=function(e){var t="\t";if(e&&e.insertSpaces){t="";for(var n=0;n<e.tabSize;n++)t+=" "}return t},e.prototype.createFormattingEdit=function(e,t,n,i,a){return i?r.TextEdit.replace({start:e.positionAt(t),end:e.positionAt(n)},a):r.TextEdit.del({start:e.positionAt(t),end:e.positionAt(n)})},e.prototype.formatOnType=function(e,t,n,a){var s=i.DockerfileParser.parse(e);if(s.getEscapeCharacter()===n){for(var o=0,c=s.getComments();o<c.length;o++){if(c[o].getRange().start.line===t.line)return[]}if(s.getDirective()&&0===t.line)return[];var u=r.TextDocument.create("","",0,e);e:for(var g=u.offsetAt(t);g<e.length;g++)switch(e.charAt(g)){case" ":case"\t":break;case"\r":case"\n":break e;default:return[]}var l=[t.line+1],h=[];return h[l[0]]=!0,this.formatLines(u,u.getText(),l,h,a)}return[]},e.prototype.formatRange=function(e,t,n){for(var r=[],i=t.start.line;i<=t.end.line;i++)r.push(i);return this.format(e,r,n)},e.prototype.format=function(e,t,n){for(var a=r.TextDocument.create("","",0,e),s=i.DockerfileParser.parse(e),o=[],c=0;c<a.lineCount;c++)o[c]=!1;for(var u=0,g=s.getInstructions();u<g.length;u++){var l=g[u].getRange();o[l.start.line]=!1;for(c=l.start.line+1;c<=l.end.line;c++)o[c]=!0}return this.formatLines(a,e,t,o,n)},e.prototype.formatLines=function(e,t,n,i,a){var s=this.getIndentation(a),o=[];e:for(var c=0,u=n;c<u.length;c++){for(var g=u[c],l=e.offsetAt(r.Position.create(g,0)),h=l;h<t.length;h++)switch(t.charAt(h)){case" ":case"\t":break;case"\r":case"\n":if(h!==l){var d=r.TextEdit.del({start:e.positionAt(l),end:e.positionAt(h)});o.push(d)}continue e;default:if(h!==l||i[g]){d=this.createFormattingEdit(e,l,h,i[g],s);o.push(d)}continue e}if(l<t.length){d=r.TextEdit.del({start:e.positionAt(l),end:e.positionAt(t.length)});o.push(d)}}return o},e}();t.DockerFormatter=a},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(698),a=n(307),s=function(){function e(){this.dockerMarkdown=new i.MarkdownDocumentation,this.dockerPlainText=new a.PlainTextDocumentation}return e.prototype.resolveCompletionItem=function(e,t){if(!e.documentation&&e.data)if(null==t)e.documentation=this.dockerPlainText.getDocumentation(e.data);else{for(var n=0,i=t;n<i.length;n++){var a=i[n];if(a===r.MarkupKind.PlainText)return e.documentation={kind:r.MarkupKind.PlainText,value:this.dockerPlainText.getDocumentation(e.data)},e;if(a===r.MarkupKind.Markdown)return e.documentation={kind:r.MarkupKind.Markdown,value:this.dockerMarkdown.getMarkdown(e.data).contents},e}e.documentation=this.dockerPlainText.getDocumentation(e.data)}return e},e}();t.DockerCompletion=s},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(1727),a=n(1730);!function(e){e[e.CASING_INSTRUCTION=0]="CASING_INSTRUCTION",e[e.CASING_DIRECTIVE=1]="CASING_DIRECTIVE",e[e.ARGUMENT_MISSING=2]="ARGUMENT_MISSING",e[e.ARGUMENT_EXTRA=3]="ARGUMENT_EXTRA",e[e.ARGUMENT_REQUIRES_ONE=4]="ARGUMENT_REQUIRES_ONE",e[e.ARGUMENT_REQUIRES_AT_LEAST_ONE=5]="ARGUMENT_REQUIRES_AT_LEAST_ONE",e[e.ARGUMENT_REQUIRES_TWO=6]="ARGUMENT_REQUIRES_TWO",e[e.ARGUMENT_REQUIRES_AT_LEAST_TWO=7]="ARGUMENT_REQUIRES_AT_LEAST_TWO",e[e.ARGUMENT_REQUIRES_ONE_OR_THREE=8]="ARGUMENT_REQUIRES_ONE_OR_THREE",e[e.ARGUMENT_UNNECESSARY=9]="ARGUMENT_UNNECESSARY",e[e.DUPLICATE_BUILD_STAGE_NAME=10]="DUPLICATE_BUILD_STAGE_NAME",e[e.EMPTY_CONTINUATION_LINE=11]="EMPTY_CONTINUATION_LINE",e[e.INVALID_BUILD_STAGE_NAME=12]="INVALID_BUILD_STAGE_NAME",e[e.FLAG_AT_LEAST_ONE=13]="FLAG_AT_LEAST_ONE",e[e.FLAG_DUPLICATE=14]="FLAG_DUPLICATE",e[e.FLAG_INVALID_DURATION=15]="FLAG_INVALID_DURATION",e[e.FLAG_LESS_THAN_1MS=16]="FLAG_LESS_THAN_1MS",e[e.FLAG_MISSING_DURATION=17]="FLAG_MISSING_DURATION",e[e.FLAG_MISSING_VALUE=18]="FLAG_MISSING_VALUE",e[e.FLAG_UNKNOWN_UNIT=19]="FLAG_UNKNOWN_UNIT",e[e.NO_SOURCE_IMAGE=20]="NO_SOURCE_IMAGE",e[e.INVALID_ESCAPE_DIRECTIVE=21]="INVALID_ESCAPE_DIRECTIVE",e[e.INVALID_AS=22]="INVALID_AS",e[e.INVALID_DESTINATION=23]="INVALID_DESTINATION",e[e.INVALID_PORT=24]="INVALID_PORT",e[e.INVALID_PROTO=25]="INVALID_PROTO",e[e.INVALID_REFERENCE_FORMAT=26]="INVALID_REFERENCE_FORMAT",e[e.INVALID_SIGNAL=27]="INVALID_SIGNAL",e[e.INVALID_SYNTAX=28]="INVALID_SYNTAX",e[e.ONBUILD_CHAINING_DISALLOWED=29]="ONBUILD_CHAINING_DISALLOWED",e[e.ONBUILD_TRIGGER_DISALLOWED=30]="ONBUILD_TRIGGER_DISALLOWED",e[e.SHELL_JSON_FORM=31]="SHELL_JSON_FORM",e[e.SHELL_REQUIRES_ONE=32]="SHELL_REQUIRES_ONE",e[e.SYNTAX_MISSING_EQUALS=33]="SYNTAX_MISSING_EQUALS",e[e.SYNTAX_MISSING_NAMES=34]="SYNTAX_MISSING_NAMES",e[e.SYNTAX_MISSING_SINGLE_QUOTE=35]="SYNTAX_MISSING_SINGLE_QUOTE",e[e.SYNTAX_MISSING_DOUBLE_QUOTE=36]="SYNTAX_MISSING_DOUBLE_QUOTE",e[e.MULTIPLE_INSTRUCTIONS=37]="MULTIPLE_INSTRUCTIONS",e[e.UNKNOWN_INSTRUCTION=38]="UNKNOWN_INSTRUCTION",e[e.UNKNOWN_ADD_FLAG=39]="UNKNOWN_ADD_FLAG",e[e.UNKNOWN_COPY_FLAG=40]="UNKNOWN_COPY_FLAG",e[e.UNKNOWN_HEALTHCHECK_FLAG=41]="UNKNOWN_HEALTHCHECK_FLAG",e[e.UNKNOWN_TYPE=42]="UNKNOWN_TYPE",e[e.UNSUPPORTED_MODIFIER=43]="UNSUPPORTED_MODIFIER",e[e.DEPRECATED_MAINTAINER=44]="DEPRECATED_MAINTAINER",e[e.HEALTHCHECK_CMD_ARGUMENT_MISSING=45]="HEALTHCHECK_CMD_ARGUMENT_MISSING",e[e.FLAG_INVALID_FROM_VALUE=46]="FLAG_INVALID_FROM_VALUE",e[e.JSON_IN_SINGLE_QUOTES=47]="JSON_IN_SINGLE_QUOTES",e[e.WORKDIR_IS_NOT_ABSOLUTE=48]="WORKDIR_IS_NOT_ABSOLUTE"}(t.ValidationCode||(t.ValidationCode={})),function(e){e[e.IGNORE=0]="IGNORE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ValidationSeverity||(t.ValidationSeverity={})),t.format=function(e,t){const n=r.TextDocument.create("","",0,e);return(new i.DockerFormatter).formatDocument(n,t)},t.validate=function(e,t){const n=r.TextDocument.create("","",0,e);return new a.Validator(t).validate(n)}},193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Line=class{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(80),a=n(290),s=n(143),o=n(103);t.PropertyInstruction=class extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new a.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new a.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new a.Property(this.document,this.escapeChar,e[0]),new a.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,i=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(i)),this.properties=[new a.Property(this.document,this.escapeChar,e[0],new s.Argument(t,r.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new a.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"\t":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":t:for(let r=n-1;r>=0;r--)switch(e.charAt(r)){case" ":case"\t":case"\r":case"\n":case this.escapeChar:continue;default:t=r;break t}break e;default:t=n;break e}return t}getPropertyArguments(){const e=[];let t=this.getInstructionRange(),n=this.document.offsetAt(t.end),i=n-this.document.offsetAt(t.start),a=this.getTextContent(),c=a.substring(i),u=o.Util.findLeadingNonWhitespace(c,this.escapeChar);if(-1===u)return[];let g=!1,l=!1,h=-1,d=this.findTrailingNonWhitespace(c);a=c.substring(u,d+1);let m=0,f=!1;e:for(let t=0;t<a.length;t++){let i=a.charAt(t);switch(i){case this.escapeChar:if(t+1===a.length){l=!0;break e}switch(g||(h=t),a.charAt(t+1)){case" ":case"\t":if(!o.Util.isWhitespace(a.charAt(t+2))){t+=1;continue e}t:for(let i=t+2;i<a.length;i++)switch(a.charAt(i)){case"\r":i++;case"\n":g=!0,t=i;continue e;case" ":case"\t":break;default:e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=i;break t}t=m-1;continue e;case"\r":t++;case"\n":g=!0,t+=1;continue e;case this.escapeChar:-1===m&&(m=t),t+=1;continue e;default:-1===m&&(m=t);continue e}case"'":case'"':-1===m&&(m=t);for(let o=t+1;o<a.length;o++)switch(a.charAt(o)){case i:if(" "!==a.charAt(o+1)&&""!==a.charAt(o+1)){t=o;continue e}e.push(new s.Argument(a.substring(m,o+1),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue e;case this.escapeChar:o++}break e;case" ":case"\t":g?-1!==m&&(f=!0):-1!==m&&(e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":f=!1;break;case"#":if(g){for(let e=t+1;e<a.length;e++)switch(a.charAt(e)){case"\r":e++;case"\n":t=e,f=!1;continue e}if(-1!==m){let t=a.substring(m,h);e.push(new s.Argument(t,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+h)))),m=-1}break e}-1===m&&(m=t);break;default:if(f&&(-1!==m&&(e.push(new s.Argument(a.substring(m,h),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+h)))),m=-1),f=!1),g=!1,-1===m&&(m=t),"$"===i&&"{"===a.charAt(t+1)){let e=!1,n=!1,r=!1;for(let i=t+1;i<a.length;i++)switch(a.charAt(i)){case this.escapeChar:r=!0;break;case"\r":case"\n":break;case"'":e=!e,r=!1;break;case'"':n=!n,r=!1;break;case" ":case"\t":if(r||e||n)break;t=i-1;continue e;case"}":t=i;continue e;default:r=!1}break e}}}if(-1!==m&&m!==a.length){let t=l?a.length-1:a.length,i=a.substring(m,t);e.push(new s.Argument(i,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}}},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(80);t.From=class extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getImage(){return this.getRangeContent(this.getImageRange())}getImageName(){return this.getRangeContent(this.getImageNameRange())}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),r=this.getImageDigestRange();return null===n?null!==r&&(e.end=this.document.positionAt(this.document.offsetAt(r.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){const e=this.getImageRange();if(e&&null===this.getImageDigestRange()){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,":");if(n>t.indexOf("/"))return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let r=t.indexOf(n);const i=this.getVariables();for(let a=0;a<i.length;a++){const s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){const i=this.document.offsetAt(o.end)-e,s=t.substring(i).indexOf(n);if(-1===s)return-1;r=s+i,a=-1}}return r}lastIndexOf(e,t,n){let r=t.lastIndexOf(n);const i=this.getVariables();for(let a=0;a<i.length;a++){const s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(r=t.substring(0,r).lastIndexOf(n)))return-1;a=-1}}return r}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){const e=this.getImageRange();if(e){const t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);const i=this.getRangeContent(e),a=this.indexOf(this.document.offsetAt(e.start),i,":"),s=this.indexOf(this.document.offsetAt(e.start),i,"/"),o=this.lastIndexOf(this.document.offsetAt(e.start),i,"/");if(-1!==s&&s!==o||-1!==a){const t=this.document.offsetAt(e.start);return r.Range.create(e.start,this.document.positionAt(t+s))}}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return 3===e.length&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}}},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Line=class{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(81),a=n(299),s=n(145),o=n(104);t.PropertyInstruction=class extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new a.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new a.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new a.Property(this.document,this.escapeChar,e[0]),new a.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,i=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(i)),this.properties=[new a.Property(this.document,this.escapeChar,e[0],new s.Argument(t,r.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new a.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"\t":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":t:for(let r=n-1;r>=0;r--)switch(e.charAt(r)){case" ":case"\t":case"\r":case"\n":case this.escapeChar:continue;default:t=r;break t}break e;default:t=n;break e}return t}getPropertyArguments(){const e=[];let t=this.getInstructionRange(),n=this.document.offsetAt(t.end),i=n-this.document.offsetAt(t.start),a=this.getTextContent(),c=a.substring(i),u=o.Util.findLeadingNonWhitespace(c,this.escapeChar);if(-1===u)return[];let g=!1,l=!1,h=-1,d=this.findTrailingNonWhitespace(c);a=c.substring(u,d+1);let m=0,f=!1;e:for(let t=0;t<a.length;t++){let i=a.charAt(t);switch(i){case this.escapeChar:if(t+1===a.length){l=!0;break e}switch(g||(h=t),a.charAt(t+1)){case" ":case"\t":if(!o.Util.isWhitespace(a.charAt(t+2))){t+=1;continue e}t:for(let i=t+2;i<a.length;i++)switch(a.charAt(i)){case"\r":i++;case"\n":g=!0,t=i;continue e;case" ":case"\t":break;default:e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=i;break t}t=m-1;continue e;case"\r":t++;case"\n":g=!0,t+=1;continue e;case this.escapeChar:-1===m&&(m=t),t+=1;continue e;default:-1===m&&(m=t);continue e}case"'":case'"':-1===m&&(m=t);for(let o=t+1;o<a.length;o++)switch(a.charAt(o)){case i:if(" "!==a.charAt(o+1)&&""!==a.charAt(o+1)){t=o;continue e}e.push(new s.Argument(a.substring(m,o+1),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue e;case this.escapeChar:o++}break e;case" ":case"\t":g?f=!0:-1!==m&&(e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":f=!1;break;case"#":if(g){for(let e=t+1;e<a.length;e++)switch(a.charAt(e)){case"\r":e++;case"\n":t=e,f=!1;continue e}if(-1!==m){let t=a.substring(m,h);e.push(new s.Argument(t,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+h)))),m=-1}break e}-1===m&&(m=t);break;default:if(f&&(-1!==m&&(e.push(new s.Argument(a.substring(m,h),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+h)))),m=-1),f=!1),g=!1,-1===m&&(m=t),"$"===i&&"{"===a.charAt(t+1)){let e=!1,n=!1,r=!1;for(let i=t+1;i<a.length;i++)switch(a.charAt(i)){case this.escapeChar:r=!0;break;case"\r":case"\n":break;case"'":e=!e,r=!1;break;case'"':n=!n,r=!1;break;case" ":case"\t":if(r||e||n)break;t=i-1;continue e;case"}":t=i;continue e;default:r=!1}break e}}}if(-1!==m&&m!==a.length){let t=l?a.length-1:a.length,i=a.substring(m,t);e.push(new s.Argument(i,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}}},198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(81);t.From=class extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getImage(){return this.getRangeContent(this.getImageRange())}getImageName(){return this.getRangeContent(this.getImageNameRange())}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),r=this.getImageDigestRange();return null===n?null!==r&&(e.end=this.document.positionAt(this.document.offsetAt(r.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){const e=this.getImageRange();if(e&&null===this.getImageDigestRange()){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,":");if(n>t.indexOf("/"))return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let r=t.indexOf(n);const i=this.getVariables();for(let a=0;a<i.length;a++){const s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){const i=this.document.offsetAt(o.end)-e,s=t.substring(i).indexOf(n);if(-1===s)return-1;r=s+i,a=-1}}return r}lastIndexOf(e,t,n){let r=t.lastIndexOf(n);const i=this.getVariables();for(let a=0;a<i.length;a++){const s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(r=t.substring(0,r).lastIndexOf(n)))return-1;a=-1}}return r}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){const e=this.getImageRange();if(e){const t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);const i=this.getRangeContent(e),a=this.indexOf(this.document.offsetAt(e.start),i,":"),s=this.indexOf(this.document.offsetAt(e.start),i,"/"),o=this.lastIndexOf(this.document.offsetAt(e.start),i,"/");if(-1!==s&&s!==o||-1!==a){const t=this.document.offsetAt(e.start);return r.Range.create(e.start,this.document.positionAt(t+s))}}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return 3===e.length&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}}},23:function(e,t){e.exports=require("os")},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(61);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class a extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,a.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=a;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.RequestType=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.RequestType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.RequestType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.RequestType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.RequestType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.RequestType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.RequestType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.RequestType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.RequestType9=class extends s{constructor(e){super(e,9),this._=void 0}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0),this._=void 0}};t.NotificationType1=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType2=class extends s{constructor(e){super(e,2),this._=void 0}};t.NotificationType3=class extends s{constructor(e){super(e,3),this._=void 0}};t.NotificationType4=class extends s{constructor(e){super(e,4),this._=void 0}};t.NotificationType5=class extends s{constructor(e){super(e,5),this._=void 0}};t.NotificationType6=class extends s{constructor(e){super(e,6),this._=void 0}};t.NotificationType7=class extends s{constructor(e){super(e,7),this._=void 0}};t.NotificationType8=class extends s{constructor(e){super(e,8),this._=void 0}};t.NotificationType9=class extends s{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(76),i=n(61);var a;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(a=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});class o{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=a.Cancelled}dispose(){this.cancel()}}},239:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(23),a=n(10),s=n(69),o=n(99),c=n(100);t.generateRandomPipeName=function(){const e=a.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(i.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((i,a)=>{let u=s.createServer(e=>{u.close(),n([new o.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",a),u.listen(e,()=>{u.removeListener("error",a),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new o.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),i=n(99),a=n(100);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((o,c)=>{let u=r.createServer(e=>{u.close(),n([new i.SocketMessageReader(e,t),new a.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",()=>{u.removeListener("error",c),o({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new a.SocketMessageWriter(n,t)]}},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(243),i=n(35),a=n(244);t.ImplementationRequest=a.ImplementationRequest;const s=n(245);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const o=n(246);t.WorkspaceFoldersRequest=o.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=o.DidChangeWorkspaceFoldersNotification;const c=n(247);t.ConfigurationRequest=c.ConfigurationRequest;const u=n(248);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const g=n(249);t.FoldingRangeRequest=g.FoldingRangeRequest,function(e){e.is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new i.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new i.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new i.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new i.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new i.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new i.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new i.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new i.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new i.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new i.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new i.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new i.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new i.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new i.RequestType("textDocument/prepareRename")}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new i.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},243:function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function a(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=a,t.stringArray=function(e){return a(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&i(e.then)}},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.type=new r.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.type=new r.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.type=new r.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(675),a=n(80);t.ModifiableInstruction=class extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getFlags(){if(!this.flags){this.flags=[];for(let e of this.getArguments()){let t=e.getValue();if(this.stopSearchingForFlags(t))return this.flags;if(0===t.indexOf("--")){let n=e.getRange(),a=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=a.indexOf("="),c=!1,u=!1,g=-1;e:for(let e=0;e<a.length;e++)switch(a.charAt(e)){case"\\":case" ":case"\t":case"\r":case"\n":break;case"-":if(u){g=e;break e}c?u=!0:c=!0;break;default:g=e;break e}let l=this.document.positionAt(this.document.offsetAt(n.start)+g);if(-1===o)this.flags.push(new i.Flag(n,t.substring(2),r.Range.create(l,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(n,t.substring(2,o),r.Range.create(l,e),"",r.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(n,t.substring(2,s),r.Range.create(l,e),t.substring(s+1),r.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}}return this.flags}getArguments(){const e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}},289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(290),i=n(194);t.Arg=class extends i.PropertyInstruction{constructor(e,t,n,i,a,s){super(e,t,n,i,a,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new r.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(103);class a{constructor(e,t,n,i){this.name=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=a.getNameRange(e,n);let s=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=a.getValue(s,t),i)this.valueRange=i.getRange(),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.range=r.Range.create(this.nameRange.start,this.valueRange.end);else{let r=n.getRange();this.nameRange.start.line===r.start.line&&this.nameRange.start.character===r.start.character&&this.nameRange.end.line===r.end.line&&this.nameRange.end.character===r.end.character?this.valueRange=null:(this.valueRange=a.getValueRange(e,n),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t)),this.range=r}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));e:for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case this.escapeChar:for(let a=r+1;a<n.length;a++)switch(n.charAt(a)){case"\r":a++;case"\n":e=!0,r=a;continue e;case" ":case"\t":break;default:t+=i;continue e}t+=i;break;case"\r":case"\n":break;case" ":case"\t":e||(t+=i);break;case"#":if(e)for(let e=r+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":r=e;continue e}else t+=i;break;default:t+=i,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),i=n.indexOf("=");if(-1!==i){let a=n.charAt(0),s=n.charAt(i-1);if('"'===a&&'"'===s||"'"===a&&"'"===s||'"'!==a&&"'"!==a)return r.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+i))}return t.getRange()}static getValueRange(e,t){return r.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1;const r=i.Util.findLeadingNonWhitespace(e,t);0!==r&&"#"===e.charAt(r)&&(n=!0);let a=(e=e.substring(r)).charAt(0),s=e.charAt(e.length-1),o="'"===a||'"'===a,c="'"===a&&"'"===s,u=!1;if('"'===a)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(c||u)&&(e=e.substring(1,e.length-1));let g=-1,l="",h=0;e:for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case t:if(r+1===e.length){l+=t;break e}if(" "===(i=e.charAt(r+1))||"\t"===i)t:for(let a=r+2;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"\t":break;case"\r":a++;case"\n":n=!0,r=a;continue e;default:if(!u&&!c&&!o){s===t?(l+=i,r+=1):(l=l+i+s,r=a);continue e}break t}}if(u){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):'"'!==i&&(i===t&&r++,l+=t);continue e}if(c||o){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):l+=t;continue e}i===t?(l+=t,r++):"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,h=++r):(l+=i,r++);break;case" ":case"\t":n&&-1===g&&(g=r),l+=i;break;case"\r":r++;case"\n":n&&-1!==g&&(l=l.substring(0,l.length-(r-g-1)),g=-1);break;case"#":if(n){-1!==g&&(l=l.substring(0,l.length-(r-g)),g=-1);t:for(let t=r+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":r=t;break t}continue e}default:n&&(n=!1,g=-1),l+=i}}return l}}t.Property=a},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Cmd=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Copy=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return-1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}}},293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(194);t.Env=class extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getProperties(){return super.getProperties()}}},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Entrypoint=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(288);t.Healthcheck=class extends r.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(672),a=n(80);t.Onbuild=class extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return i.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,r.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}},297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(689),a=n(81);t.ModifiableInstruction=class extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getFlags(){if(!this.flags){this.flags=[];for(let e of this.getArguments()){let t=e.getValue();if(this.stopSearchingForFlags(t))return this.flags;if(0===t.indexOf("--")){let n=e.getRange(),a=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=a.indexOf("="),c=!1,u=!1,g=-1;e:for(let e=0;e<a.length;e++)switch(a.charAt(e)){case"\\":case" ":case"\t":case"\r":case"\n":break;case"-":if(u){g=e;break e}c?u=!0:c=!0;break;default:g=e;break e}let l=this.document.positionAt(this.document.offsetAt(n.start)+g);if(-1===o)this.flags.push(new i.Flag(n,t.substring(2),r.Range.create(l,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(n,t.substring(2,o),r.Range.create(l,e),"",r.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(n,t.substring(2,s),r.Range.create(l,e),t.substring(s+1),r.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}}return this.flags}getArguments(){const e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}},298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(299),i=n(197);t.Arg=class extends i.PropertyInstruction{constructor(e,t,n,i,a,s){super(e,t,n,i,a,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new r.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(104);class a{constructor(e,t,n,i){this.name=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=a.getNameRange(e,n);let s=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=a.getValue(s,t),i)this.valueRange=i.getRange(),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.range=r.Range.create(this.nameRange.start,this.valueRange.end);else{let r=n.getRange();this.nameRange.start.line===r.start.line&&this.nameRange.start.character===r.start.character&&this.nameRange.end.line===r.end.line&&this.nameRange.end.character===r.end.character?this.valueRange=null:(this.valueRange=a.getValueRange(e,n),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t)),this.range=r}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));e:for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case this.escapeChar:for(let a=r+1;a<n.length;a++)switch(n.charAt(a)){case"\r":a++;case"\n":e=!0,r=a;continue e;case" ":case"\t":break;default:t+=i;continue e}t+=i;break;case"\r":case"\n":break;case" ":case"\t":e||(t+=i);break;case"#":if(e)for(let e=r+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":r=e;continue e}else t+=i;break;default:t+=i,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),i=n.indexOf("=");if(-1!==i){let a=n.charAt(0),s=n.charAt(i-1);if('"'===a&&'"'===s||"'"===a&&"'"===s||'"'!==a&&"'"!==a)return r.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+i))}return t.getRange()}static getValueRange(e,t){return r.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1;const r=i.Util.findLeadingNonWhitespace(e,t);0!==r&&"#"===e.charAt(r)&&(n=!0);let a=(e=e.substring(r)).charAt(0),s=e.charAt(e.length-1),o="'"===a||'"'===a,c="'"===a&&"'"===s,u=!1;if('"'===a)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(c||u)&&(e=e.substring(1,e.length-1));let g=-1,l="",h=0;e:for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case t:if(r+1===e.length){l+=t;break e}if(" "===(i=e.charAt(r+1))||"\t"===i)t:for(let a=r+2;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"\t":break;case"\r":a++;case"\n":n=!0,r=a;continue e;default:if(!u&&!c&&!o){s===t?(l+=i,r+=1):(l=l+i+s,r=a);continue e}break t}}if(u){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):'"'!==i&&(i===t&&r++,l+=t);continue e}if(c||o){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):l+=t;continue e}i===t?(l+=t,r++):"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,h=++r):(l+=i,r++);break;case" ":case"\t":n&&-1===g&&(g=r),l+=i;break;case"\r":r++;case"\n":n&&-1!==g&&(l=l.substring(0,l.length-(r-g-1)),g=-1);break;case"#":if(n){-1!==g&&(l=l.substring(0,l.length-(r-g)),g=-1);t:for(let t=r+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":r=t;break t}continue e}default:n&&(n=!1,g=-1),l+=i}}return l}}t.Property=a},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Cmd=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Copy=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return-1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}}},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(197);t.Env=class extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getProperties(){return super.getProperties()}}},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Entrypoint=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(297);t.Healthcheck=class extends r.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(686),a=n(81);t.Onbuild=class extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return i.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,r.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(144),a=n(57),s=function(){function e(){}return e.prototype.computeBuildStageDefinition=function(e,t){for(var n=void 0,r=0,i=e.getCOPYs();r<i.length;r++){var a=(c=i[r]).getFromFlag();if(a)if((u=a.getValueRange())&&u.start.line===t.line&&u.start.character<=t.character&&t.character<=u.end.character){n=a.getValue();break}}for(var s=0,o=e.getFROMs();s<o.length;s++){var c,u;if((u=(c=o[s]).getBuildStageRange())&&(u.start.line===t.line&&u.start.character<=t.character&&t.character<=u.end.character||c.getBuildStage()===n))return u}return null},e.computeVariableDefinition=function(e,t){for(var n=null,r=0,s=e.getARGs();r<s.length;r++){if((l=s[r].getProperty())&&i.Util.isInsideRange(t,l.getNameRange())){n=l.getName();break}}if(null===n)e:for(var o=0,c=e.getENVs();o<c.length;o++)for(var u=0,g=c[o].getProperties();u<g.length;u++){var l=g[u];if(i.Util.isInsideRange(t,l.getNameRange())){n=l.getName();break e}}if(null===n)e:for(var h=0,d=e.getInstructions();h<d.length;h++)for(var m=0,f=(A=d[h]).getVariables();m<f.length;m++){var p=f[m];if(i.Util.isInsideRange(t,p.getNameRange())){n=p.getName();break e}}for(var _=0,R=e.getInstructions();_<R.length;_++){var A;if((A=R[_])instanceof a.Arg){if((l=A.getProperty())&&l.getName()===n)return l}else if(A instanceof a.Env)for(var v=0,b=A.getProperties();v<b.length;v++){if((l=b[v]).getName()===n)return l}}return null},e.findDefinition=function(t,n){for(var r=0,a=t.getFROMs();r<a.length;r++)for(var s=0,o=a[r].getVariables();s<o.length;s++){var c=o[s];if(i.Util.isInsideRange(n,c.getNameRange())){for(var u=0,g=t.getInitialARGs();u<g.length;u++){var l=g[u].getProperty();if(l&&l.getName()===c.getName())return l}return null}}var h=t.getContainingImage(n);return e.computeVariableDefinition(h,n)},e.prototype.computeVariableDefinition=function(t,n){var r=e.findDefinition(t,n);return r?r.getNameRange():null},e.prototype.computeDefinitionRange=function(e,t){var n=a.DockerfileParser.parse(e),r=this.computeBuildStageDefinition(n,t);return r||this.computeVariableDefinition(n,t)},e.prototype.computeDefinition=function(e,t,n){var i=a.DockerfileParser.parse(t),s=this.computeBuildStageDefinition(i,n);return null!==s?r.Location.create(e.uri,s):null!==(s=this.computeVariableDefinition(i,n))?r.Location.create(e.uri,s):null},e}();t.DockerDefinition=s},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:"Define a variable with an optional default value that users can override at build-time when using `docker build`.\n\nSince Docker 1.9\n\n",hoverCmd:"Provide defaults for an executing container. If an executable is not specified, then ENTRYPOINT must be specified as well. There can only be one CMD instruction in a Dockerfile.\n\n",hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:"Configures the container to be run as an executable.\n\n",hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. FROM must be the first instruction in a Dockerfile.\n\n",hoverHealthcheck:"Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's HEALTHCHECK instruction. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12\n\n",hoverLabel:"Adds metadata to an image.\n\nSince Docker 1.6\n\n",hoverMaintainer:"Set the Author field of the generated images. This instruction has been deprecated in favor of LABEL.\n\n",hoverOnbuild:"Add a trigger instruction to the image that will be executed when the image is used as a base image for another build.\n\n",hoverRun:"Execute any commands on top of the current image as a new layer and commit the results.\n\n",hoverShell:"Override the default shell used for the shell form of commands.\n\nSince Docker 1.12\n\n",hoverStopsignal:"Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the SIGNAME format such as SIGKILL.\n\nSince Docker 1.9\n\n",hoverUser:"Set the user name or UID to use when running the image in addition to any subsequent CMD, ENTRYPOINT, or RUN instructions that follow it in the Dockerfile.\n\n",hoverVolume:"Create a mount point with the specifid name and mark it as holding externally mounted volumes from the native host or from other containers.\n\n",hoverWorkdir:"Set the working directory for any subsequent ADD, COPY, CMD, ENTRYPOINT, or RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:"The previous build stage to use as the source location instead of the build's context.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartPeriod:"The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",signatureEscape:"Sets this Dockerfile's escape character. If unspecified, the default escape character is `\\`.",signatureEscape_Param:"The character to use to escape characters and newlines in this Dockerfile.",signatureAdd_Signature0:"Copy new files, directories or remote URLs to the image's filesystem.",signatureAdd_Signature0_Param1:"The resource to copy or unpack if it is a local tar archive in a recognized compression format.",signatureAdd_Signature0_Param3:"The name of the destination file or folder.",signatureArg_Signature0:"Define a variable that users can pass a value to at build-time with `docker build`.",signatureArg_Signature0_Param:"The name of the variable.",signatureArg_Signature1:"Define a variable with an optional default value that users can override at build-time with `docker build`.",signatureArg_Signature1_Param1:"The default value of the variable.",signatureCmd_Signature0:"Set the default executable and parameters for this executing container.",signatureCmd_Signature0_Param0:"The default executable for this executing container.",signatureCmd_Signature0_Param1:"A parameter to the default executable.",signatureCmd_Signature1:"Set the default parameters for this executing container. An ENTRYPOINT instruction must also be specified.",signatureCmd_Signature1_Param0:"A parameter to the entrypoint executable.",signatureCopy_Signature0:"Copy new files and directories to the image's filesystem.",signatureCopy_Signature0_Param0:"Optional flags to configure this instruction.",signatureCopy_Signature0_Param1:"The resource to copy.",signatureCopyFlagFrom:"Set the build stage to use as the source location of this copy instruction instead of the build's context.",signatureCopyFlagFrom_Param:"The build stage or image name to use as the source. Also may be a numeric index.",signatureEntrypoint_Signature0:"Configure this container for running as an executable.",signatureEntrypoint_Signature0_Param1:"The container's main executable.",signatureEntrypoint_Signature0_Param2:"A parameter to the entrypoint executable.",signatureEnv_Signature0:"Set an environment variable to the specified value. The value will be in the environment of any descendent Dockerfiles",signatureEnv_Signature0_Param0:"The name of the environment variable.",signatureEnv_Signature0_Param1:"The value to set the environment variable to.",signatureExpose:"Define network ports for this container to listen on at runtime.",signatureExpose_Param0:"The port that this container should listen on.",signatureFrom_Signature0:"Set the base image to use for any subsequent instructions that follow.",signatureFrom_Signature0_Param:"The name of the base image to use.",signatureFrom_Signature1_Param1:"The tag of the base image to use.",signatureFrom_Signature2_Param1:"The digest of the base image to use.",signatureFrom_Signature3:"Set the base image to use for any subsequent instructions that follow and also give this build stage a name.",signatureFrom_Signature3_Param2:"The name of this build stage.",signatureFrom_Param2:"The name of this build stage.",signatureHealthcheck_Signature0:"Define how Docker should test the container to check that it is still working.",signatureHealthcheck_Signature1_Param2:"The parameters to the CMD instruction for the healthcheck.",signatureHealthcheck_Signature2:"Disable the inherited HEALTHCHECK instruction from the base image.",signatureLabel_Signature0:"Set metadata to an image.",signatureLabel_Signature0_Param0:"The name of the metadata.",signatureLabel_Signature0_Param1:"The value of the metadata.",signatureMaintainer:'Set the "Author" field of this image.',signatureMaintainer_Param:"The name of this image's maintainer.",signatureOnbuild:"Register a build instruction as a trigger to be executed when this image is used as a base image for another build.",signatureOnbuild_Param:"The build instruction to register as a trigger instruction.",signatureRun_Signature0:"Execute commands inside a shell.",signatureRun_Signature0_Param0:"The command to run.",signatureRun_Signature0_Param1:"A parameter to the command.",signatureRun_Signature1:"Execute commands without invoking a command shell.",signatureShell:"Override default shell used for the shell form of commands.",signatureShell_Param1:"The shell executable to use.",signatureShell_Param2:"The parameters to the shell executable.",signatureStopsignal:"Set the system call signal to use to send to the container to exit.",signatureStopsignal_Param:"The signal to send to the container to exit. This may be an valid unsigned number or a signal name in the SIGNAME format such as SIGKILL.",signatureUser_Signature0:"Set the user name to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature0_Param:"The user name to use.",signatureUser_Signature1:"Set the user name and user group to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature1_Param1:"The group name to use.",signatureUser_Signature2:"Set the UID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature2_Param:"The UID to use.",signatureUser_Signature3:"Set the UID and GID to use for running any RUN, CMD, and ENTRYPOINT instructions that follow.",signatureUser_Signature3_Param1:"The GID to use.",signatureVolume_Signature0:"Create mount points for holding externally mounted volumes from the native host or other containers.",signatureVolume_Signature0_Param0:"The name of the mount point.",signatureWorkdir:"Set the working directory for any ADD, COPY, CMD, ENTRYPOINT, or RUN instructions that follow.",signatureWorkdir_Param:"The absolute or relative path to use as the working directory. Will be created if it does not exist.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:"Define how Docker should test the container to check that it is still working. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12\n\n",proposalHealthcheckNone:"Disable the HEALTHCHECK instruction inherited from the base image if one exists. There can only be one HEALTHCHECK instruction in a Dockerfile.\n\nSince Docker 1.12"},this.markdowns={ADD:this.dockerMessages.hoverAdd+"ADD hello.txt /absolute/path\nADD hello.txt relative/to/workdir",ADD_FlagChown:this.dockerMessages.hoverAddFlagChown,ARG:this.dockerMessages.hoverArg+"ARG userName\nARG testOutputDir=test",ARG_NameOnly:this.dockerMessages.proposalArgNameOnly+"ARG userName",ARG_DefaultValue:this.dockerMessages.proposalArgDefaultValue+"ARG testOutputDir=test",CMD:this.dockerMessages.hoverCmd+'CMD [ "/bin/ls", "-l" ]',COPY:this.dockerMessages.hoverCopy+"COPY hello.txt /absolute/path\nCOPY hello.txt relative/to/workdir",COPY_FlagChown:this.dockerMessages.hoverCopyFlagChown,COPY_FlagFrom:this.dockerMessages.hoverCopyFlagFrom,ENTRYPOINT:this.dockerMessages.hoverEntrypoint+'ENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]',ENV:this.dockerMessages.hoverEnv+"ENV buildTag=1.0",EXPOSE:this.dockerMessages.hoverExpose+"EXPOSE 8080\nEXPOSE 80 443 22\nEXPOSE 7000-8000",FROM:this.dockerMessages.hoverFrom+"FROM baseImage\nFROM baseImage:tag\nFROM baseImage@digest",HEALTHCHECK:this.dockerMessages.hoverHealthcheck+"HEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\nHEALTHCHECK NONE",HEALTHCHECK_CMD:this.dockerMessages.proposalHealthcheckExec+"HEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1",HEALTHCHECK_FlagInterval:this.dockerMessages.hoverHealthcheckFlagInterval,HEALTHCHECK_FlagRetries:this.dockerMessages.hoverHealthcheckFlagRetries,HEALTHCHECK_FlagStartPeriod:this.dockerMessages.hoverHealthcheckFlagStartPeriod,HEALTHCHECK_FlagTimeout:this.dockerMessages.hoverHealthcheckFlagTimeout,HEALTHCHECK_NONE:this.dockerMessages.proposalHealthcheckNone,LABEL:this.dockerMessages.hoverLabel+'LABEL version="1.0"',MAINTAINER:this.dockerMessages.hoverMaintainer+"MAINTAINER name",ONBUILD:this.dockerMessages.hoverOnbuild+"ONBUILD ADD . /opt/app/src/extensions\nONBUILD RUN /usr/local/bin/build.sh /opt/app",RUN:this.dockerMessages.hoverRun+"RUN apt-get update && apt-get install -y curl",SHELL:this.dockerMessages.hoverShell+'SHELL [ "powershell", "-command" ]',STOPSIGNAL:this.dockerMessages.hoverStopsignal+"STOPSIGNAL 9",USER:this.dockerMessages.hoverUser+"USER daemon",VOLUME:this.dockerMessages.hoverVolume+'VOLUME [ "/var/db" ]',WORKDIR:this.dockerMessages.hoverWorkdir+"WORKDIR /path/to/workdir\nWORKDIR relative/path",escape:this.dockerMessages.hoverEscape+"# escape=`",signatureEscape:this.dockerMessages.signatureEscape,signatureEscape_Param:this.dockerMessages.signatureEscape_Param,signatureAdd_Signature0:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature0_Param1:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureAdd_Signature1:this.dockerMessages.signatureAdd_Signature0,signatureAdd_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureAdd_Signature1_Param2:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param3:this.dockerMessages.signatureAdd_Signature0_Param1,signatureAdd_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureArg_Signature0:this.dockerMessages.signatureArg_Signature0,signatureArg_Signature0_Param:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1:this.dockerMessages.signatureArg_Signature1,signatureArg_Signature1_Param0:this.dockerMessages.signatureArg_Signature0_Param,signatureArg_Signature1_Param1:this.dockerMessages.signatureArg_Signature1_Param1,signatureCmd_Signature0:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature0_Param1:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature0_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature0_Param3:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature1:this.dockerMessages.signatureCmd_Signature1,signatureCmd_Signature1_Param1:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param2:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature1_Param3:this.dockerMessages.signatureCmd_Signature1_Param0,signatureCmd_Signature2:this.dockerMessages.signatureCmd_Signature0,signatureCmd_Signature2_Param0:this.dockerMessages.signatureCmd_Signature0_Param0,signatureCmd_Signature2_Param1:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCmd_Signature2_Param2:this.dockerMessages.signatureCmd_Signature0_Param1,signatureCopy_Signature0:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature0_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature0_Param1:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature0_Param3:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopy_Signature1:this.dockerMessages.signatureCopy_Signature0,signatureCopy_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureCopy_Signature1_Param2:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param3:this.dockerMessages.signatureCopy_Signature0_Param1,signatureCopy_Signature1_Param4:this.dockerMessages.signatureAdd_Signature0_Param3,signatureCopyFlagFrom:this.dockerMessages.signatureCopyFlagFrom,signatureCopyFlagFrom_Param:this.dockerMessages.signatureCopyFlagFrom_Param,signatureEntrypoint_Signature0:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature0_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature0_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature0_Param3:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1:this.dockerMessages.signatureEntrypoint_Signature0,signatureEntrypoint_Signature1_Param0:this.dockerMessages.signatureEntrypoint_Signature0_Param1,signatureEntrypoint_Signature1_Param1:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEntrypoint_Signature1_Param2:this.dockerMessages.signatureEntrypoint_Signature0_Param2,signatureEnv_Signature0:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature0_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature0_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature1:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature1_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature1_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2:this.dockerMessages.signatureEnv_Signature0,signatureEnv_Signature2_Param0:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param1:this.dockerMessages.signatureEnv_Signature0_Param1,signatureEnv_Signature2_Param2:this.dockerMessages.signatureEnv_Signature0_Param0,signatureEnv_Signature2_Param3:this.dockerMessages.signatureEnv_Signature0_Param1,signatureExpose:this.dockerMessages.signatureExpose,signatureExpose_Param0:this.dockerMessages.signatureExpose_Param0,signatureExpose_Param1:this.dockerMessages.signatureExpose_Param0,signatureFrom_Signature0:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature0_Param:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature1_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature1_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature2:this.dockerMessages.signatureFrom_Signature0,signatureFrom_Signature2_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature2_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature3:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature3_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature3_Param2:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature4:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature4_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature4_Param1:this.dockerMessages.signatureFrom_Signature1_Param1,signatureFrom_Signature4_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureFrom_Signature5:this.dockerMessages.signatureFrom_Signature3,signatureFrom_Signature5_Param0:this.dockerMessages.signatureFrom_Signature0_Param,signatureFrom_Signature5_Param1:this.dockerMessages.signatureFrom_Signature2_Param1,signatureFrom_Signature5_Param3:this.dockerMessages.signatureFrom_Signature3_Param2,signatureHealthcheck:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature0:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheck_Signature1_Param0:this.dockerMessages.signatureCopy_Signature0_Param0,signatureHealthcheck_Signature1_Param2:this.dockerMessages.signatureHealthcheck_Signature1_Param2,signatureHealthcheck_Signature2:this.dockerMessages.signatureHealthcheck_Signature0,signatureHealthcheckFlagInterval_Param:this.dockerMessages.hoverHealthcheckFlagInterval,signatureHealthcheckFlagRetries_Param:this.dockerMessages.hoverHealthcheckFlagRetries,signatureHealthcheckFlagStartPeriod_Param:this.dockerMessages.hoverHealthcheckFlagStartPeriod,signatureHealthcheckFlagTimeout_Param:this.dockerMessages.hoverHealthcheckFlagTimeout,signatureLabel_Signature0:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature0_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature0_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature1:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature1_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature1_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2:this.dockerMessages.signatureLabel_Signature0,signatureLabel_Signature2_Param0:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param1:this.dockerMessages.signatureLabel_Signature0_Param1,signatureLabel_Signature2_Param2:this.dockerMessages.signatureLabel_Signature0_Param0,signatureLabel_Signature2_Param3:this.dockerMessages.signatureLabel_Signature0_Param1,signatureMaintainer:this.dockerMessages.signatureMaintainer,signatureMaintainer_Param:this.dockerMessages.signatureMaintainer_Param,signatureOnbuild:this.dockerMessages.signatureOnbuild,signatureOnbuild_Param:this.dockerMessages.signatureOnbuild_Param,signatureRun_Signature0:this.dockerMessages.signatureRun_Signature0,signatureRun_Signature0_Param0:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature0_Param1:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature0_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1:this.dockerMessages.signatureRun_Signature1,signatureRun_Signature1_Param1:this.dockerMessages.signatureRun_Signature0_Param0,signatureRun_Signature1_Param2:this.dockerMessages.signatureRun_Signature0_Param1,signatureRun_Signature1_Param3:this.dockerMessages.signatureRun_Signature0_Param1,signatureShell:this.dockerMessages.signatureShell,signatureShell_Param1:this.dockerMessages.signatureShell_Param1,signatureShell_Param2:this.dockerMessages.signatureShell_Param2,signatureShell_Param3:this.dockerMessages.signatureShell_Param2,signatureStopsignal:this.dockerMessages.signatureStopsignal,signatureStopsignal_Param:this.dockerMessages.signatureStopsignal_Param,signatureUser_Signature0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature0_Param:this.dockerMessages.signatureUser_Signature0_Param,signatureUser_Signature1:this.dockerMessages.signatureUser_Signature1,signatureUser_Signature1_Param0:this.dockerMessages.signatureUser_Signature0,signatureUser_Signature1_Param1:this.dockerMessages.signatureUser_Signature1_Param1,signatureUser_Signature2:this.dockerMessages.signatureUser_Signature2,signatureUser_Signature2_Param:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3:this.dockerMessages.signatureUser_Signature3,signatureUser_Signature3_Param0:this.dockerMessages.signatureUser_Signature2_Param,signatureUser_Signature3_Param1:this.dockerMessages.signatureUser_Signature3_Param1,signatureVolume_Signature0:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature0_Param0:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature0_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1:this.dockerMessages.signatureVolume_Signature0,signatureVolume_Signature1_Param1:this.dockerMessages.signatureVolume_Signature0_Param0,signatureVolume_Signature1_Param2:this.dockerMessages.signatureVolume_Signature0_Param0,signatureWorkdir:this.dockerMessages.signatureWorkdir,signatureWorkdir_Param:this.dockerMessages.signatureWorkdir_Param}}return e.prototype.getDocumentation=function(e){return this.markdowns[e]},e}();t.PlainTextDocumentation=r},35:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(61),a=n(237);t.RequestType=a.RequestType,t.RequestType0=a.RequestType0,t.RequestType1=a.RequestType1,t.RequestType2=a.RequestType2,t.RequestType3=a.RequestType3,t.RequestType4=a.RequestType4,t.RequestType5=a.RequestType5,t.RequestType6=a.RequestType6,t.RequestType7=a.RequestType7,t.RequestType8=a.RequestType8,t.RequestType9=a.RequestType9,t.ResponseError=a.ResponseError,t.ErrorCodes=a.ErrorCodes,t.NotificationType=a.NotificationType,t.NotificationType0=a.NotificationType0,t.NotificationType1=a.NotificationType1,t.NotificationType2=a.NotificationType2,t.NotificationType3=a.NotificationType3,t.NotificationType4=a.NotificationType4,t.NotificationType5=a.NotificationType5,t.NotificationType6=a.NotificationType6,t.NotificationType7=a.NotificationType7,t.NotificationType8=a.NotificationType8,t.NotificationType9=a.NotificationType9;const s=n(99);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const o=n(100);t.MessageWriter=o.MessageWriter,t.StreamMessageWriter=o.StreamMessageWriter,t.IPCMessageWriter=o.IPCMessageWriter,t.SocketMessageWriter=o.SocketMessageWriter;const c=n(76);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const u=n(238);t.CancellationTokenSource=u.CancellationTokenSource,t.CancellationToken=u.CancellationToken;const g=n(239);var l,h,d,m,f,p,_;r(n(240)),r(n(241)),function(e){e.type=new a.NotificationType("$/cancelRequest")}(l||(l={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(d=t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(d=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new a.NotificationType("$/setTraceNotification")}(m=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new a.NotificationType("$/logTraceNotification")}(f=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(p=t.ConnectionErrors||(t.ConnectionErrors={}));class R extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,R.prototype)}}function A(e,t,n,r){let s=0,o=0,A=0;const v="2.0";let b,S,C=void 0,E=Object.create(null),D=void 0,I=Object.create(null),k=new g.LinkedMap,y=Object.create(null),T=Object.create(null),N=h.Off,O=d.Text,P=_.New,M=new c.Emitter,w=new c.Emitter,x=new c.Emitter,L=new c.Emitter;function F(e){return"req-"+e.toString()}function H(e,t){var n;a.isRequestMessage(t)?e.set(F(t.id),t):a.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++A).toString():"res-"+n.toString(),t):e.set("not-"+(++o).toString(),t)}function V(e){}function U(){return P===_.Listening}function q(){return P===_.Closed}function K(){return P===_.Disposed}function G(){P!==_.New&&P!==_.Listening||(P=_.Closed,w.fire(void 0))}function W(){b||0===k.size||(b=setImmediate(()=>{b=void 0,function(){if(0===k.size)return;let e=k.shift();try{a.isRequestMessage(e)?function(e){if(K())return;function n(n,r,i){let s={jsonrpc:v,id:e.id};n instanceof a.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,j(s,r,i),t.write(s)}function r(n,r,i){let a={jsonrpc:v,id:e.id,error:n.toJson()};j(a,r,i),t.write(a)}!function(e){if(N===h.Off||!S)return;if(O===d.Text){let t=void 0;N===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),S.log(`Received request '${e.method} - (${e.id})'.`,t)}else Y("receive-request",e)}(e);let s,o,c=E[e.method];c&&(s=c.type,o=c.handler);let g=Date.now();if(o||C){let c=new u.CancellationTokenSource,l=String(e.id);T[l]=c;try{let u,h=u=void 0===e.params||void 0!==s&&0===s.numberOfParams?o?o(c.token):C(e.method,c.token):i.array(e.params)&&(void 0===s||s.numberOfParams>1)?o?o(...e.params,c.token):C(e.method,...e.params,c.token):o?o(e.params,c.token):C(e.method,e.params,c.token);u?h.then?h.then(t=>{delete T[l],n(t,e.method,g)},t=>{delete T[l],t instanceof a.ResponseError?r(t,e.method,g):t&&i.string(t.message)?r(new a.ResponseError(a.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,g):r(new a.ResponseError(a.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,g)}):(delete T[l],n(u,e.method,g)):(delete T[l],function(n,r,i){void 0===n&&(n=null);let a={jsonrpc:v,id:e.id,result:n};j(a,r,i),t.write(a)}(u,e.method,g))}catch(t){delete T[l],t instanceof a.ResponseError?n(t,e.method,g):t&&i.string(t.message)?r(new a.ResponseError(a.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,g):r(new a.ResponseError(a.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,g)}}else r(new a.ResponseError(a.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,g)}(e):a.isNotificationMessage(e)?function(e){if(K())return;let t,r=void 0;if(e.method===l.type.method)t=(e=>{let t=e.id,n=T[String(t)];n&&n.cancel()});else{let n=I[e.method];n&&(t=n.handler,r=n.type)}if(t||D)try{!function(e){if(N===h.Off||!S||e.method===f.type.method)return;if(O===d.Text){let t=void 0;N===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),S.log(`Received notification '${e.method}'.`,t)}else Y("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():D(e.method):i.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):D(e.method,...e.params):t?t(e.params):D(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else x.fire(e)}(e):a.isResponseMessage(e)?function(e){if(K())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=y[t];if(function(e,t){if(N===h.Off||!S)return;if(O===d.Text){let n=void 0;if(N===h.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";S.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else S.log(`Received response ${e.id} without active response promise.`,n)}else Y("receive-response",e)}(e,r),r){delete y[t];try{if(e.error){let t=e.error;r.reject(new a.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(i.string(t.id)||i.number(t.id)){let e=String(t.id),n=y[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{W()}}()}))}e.onClose(G),e.onError(function(e){M.fire([e,void 0,void 0])}),t.onClose(G),t.onError(function(e){M.fire(e)});let B=e=>{try{if(a.isNotificationMessage(e)&&e.method===l.type.method){let n=F(e.params.id),i=k.get(n);if(a.isRequestMessage(i)){let a=r&&r.cancelUndispatched?r.cancelUndispatched(i,V):void 0;if(a&&(void 0!==a.error||void 0!==a.result))return k.delete(n),a.id=i.id,j(a,e.method,Date.now()),void t.write(a)}}H(k,e)}finally{W()}};function j(e,t,n){if(N!==h.Off&&S)if(O===d.Text){let r=void 0;N===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),S.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else Y("send-response",e)}function Y(e,t){if(!S||N===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};S.log(n)}function $(){if(q())throw new R(p.Closed,"Connection is closed.");if(K())throw new R(p.Disposed,"Connection is disposed.")}function J(e){return void 0===e?null:e}function Q(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=J(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(J(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let z={sendNotification:(e,...n)=>{let r,a;if($(),i.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:a=n[0];break;default:a=n}else r=e.method,a=Q(e,n);let s={jsonrpc:v,method:r,params:a};!function(e){if(N!==h.Off&&S)if(O===d.Text){let t=void 0;N===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),S.log(`Sending notification '${e.method}'.`,t)}else Y("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{$(),i.func(e)?D=e:t&&(i.string(e)?I[e]={type:void 0,handler:t}:I[e.method]={type:e,handler:t})},sendRequest:(e,...n)=>{let r,o;$(),function(){if(!U())throw new Error("Call listen() first.")}();let c=void 0;if(i.string(e))switch(r=e,n.length){case 0:o=null;break;case 1:u.CancellationToken.is(n[0])?(o=null,c=n[0]):o=J(n[0]);break;default:const t=n.length-1;u.CancellationToken.is(n[t])?(c=n[t],o=2===n.length?J(n[0]):n.slice(0,t).map(e=>J(e))):o=n.map(e=>J(e))}else{r=e.method,o=Q(e,n);let t=e.numberOfParams;c=u.CancellationToken.is(n[t])?n[t]:void 0}let g=s++,m=new Promise((e,n)=>{let i={jsonrpc:v,id:g,method:r,params:o},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(N!==h.Off&&S)if(O===d.Text){let t=void 0;N===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),S.log(`Sending request '${e.method} - (${e.id})'.`,t)}else Y("send-request",e)}(i);try{t.write(i)}catch(e){s.reject(new a.ResponseError(a.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(y[String(g)]=s)});return c&&c.onCancellationRequested(()=>{z.sendNotification(l.type,{id:g})}),m},onRequest:(e,t)=>{$(),i.func(e)?C=e:t&&(i.string(e)?E[e]={type:void 0,handler:t}:E[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,a=d.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,a=n.traceFormat||d.Text)),O=a,S=(N=e)===h.Off?void 0:t,!r||q()||K()||z.sendNotification(m.type,{value:h.toString(e)})},onError:M.event,onClose:w.event,onUnhandledNotification:x.event,onDispose:L.event,dispose:()=>{if(K())return;P=_.Disposed,L.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(y).forEach(e=>{y[e].reject(n)}),y=Object.create(null),T=Object.create(null),k=new g.LinkedMap,i.func(t.dispose)&&t.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{$(),function(){if(U())throw new R(p.AlreadyListening,"Connection is already listening")}(),P=_.Listening,e.listen(B)},inspect:()=>{console.log("inspect")}};return z.onNotification(f.type,e=>{N!==h.Off&&S&&S.log(e.message,N===h.Verbose?e.verbose:void 0)}),z}t.ConnectionError=R,function(e){e.is=function(e){let t=e;return t&&i.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(_||(_={})),t.createMessageConnection=function(e,n,r,i){var a;return r||(r=t.NullLogger),A(void 0!==(a=e).listen&&void 0===a.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new o.StreamMessageWriter(n),r,i)}},37:function(e,t){e.exports=require("https")},41:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(35);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.TraceFormat=i.TraceFormat,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(17)),r(n(242)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},47:function(e,t,n){"use strict";var r,i,a,s,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return h.defined(t)&&h.number(t.line)&&h.number(t.character)}}(r=t.Position||(t.Position={})),function(e){e.create=function(e,t,n,i){if(h.number(e)&&h.number(t)&&h.number(n)&&h.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return h.defined(t)&&r.is(t.start)&&r.is(t.end)}}(i=t.Range||(t.Range={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return h.defined(t)&&i.is(t.range)&&(h.string(t.uri)||h.undefined(t.uri))}}(t.Location||(t.Location={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(t.DiagnosticSeverity||(t.DiagnosticSeverity={})),function(e){e.create=function(e,t,n,r,i){var a={range:e,message:t};return h.defined(n)&&(a.severity=n),h.defined(r)&&(a.code=r),h.defined(i)&&(a.source=i),a},e.is=function(e){var t=e;return h.defined(t)&&i.is(t.range)&&h.string(t.message)&&(h.number(t.severity)||h.undefined(t.severity))&&(h.number(t.code)||h.string(t.code)||h.undefined(t.code))&&(h.string(t.source)||h.undefined(t.source))}}(a=t.Diagnostic||(t.Diagnostic={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return h.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return h.defined(t)&&h.string(t.title)&&h.string(t.title)}}(s=t.Command||(t.Command={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}}}(o=t.TextEdit||(t.TextEdit={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return h.defined(t)&&c.is(t.textDocument)&&Array.isArray(t.edits)}}(t.TextDocumentEdit||(t.TextDocumentEdit={}));var c,u=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(o.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(o.replace(e,t))},e.prototype.delete=function(e){this.edits.push(o.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),g=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){var n=new u(e.edits);t._textEditChanges[e.textDocument.uri]=n}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new u(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(c.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for versioned document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new u(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new u(i),this._textEditChanges[e]=r}return r},e}();t.WorkspaceChange=g,function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return h.defined(t)&&h.string(t.uri)}}(t.TextDocumentIdentifier||(t.TextDocumentIdentifier={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return h.defined(t)&&h.string(t.uri)&&h.number(t.version)}}(c=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return h.defined(t)&&h.string(t.uri)&&h.string(t.languageId)&&h.number(t.version)&&h.string(t.text)}}(t.TextDocumentItem||(t.TextDocumentItem={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(t.MarkupKind||(t.MarkupKind={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(t.CompletionItemKind||(t.CompletionItemKind={})),function(e){e.PlainText=1,e.Snippet=2}(t.InsertTextFormat||(t.InsertTextFormat={})),function(e){e.create=function(e){return{label:e}}}(t.CompletionItem||(t.CompletionItem={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(t.CompletionList||(t.CompletionList={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}}(t.MarkedString||(t.MarkedString={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(t.ParameterInformation||(t.ParameterInformation={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return h.defined(t)&&(i.documentation=t),h.defined(n)?i.parameters=n:i.parameters=[],i}}(t.SignatureInformation||(t.SignatureInformation={})),function(e){e.Text=1,e.Read=2,e.Write=3}(t.DocumentHighlightKind||(t.DocumentHighlightKind={})),function(e){e.create=function(e,t){var n={range:e};return h.number(t)&&(n.kind=t),n}}(t.DocumentHighlight||(t.DocumentHighlight={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(t.SymbolKind||(t.SymbolKind={})),function(e){e.create=function(e,t,n,r,i){var a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a}}(t.SymbolInformation||(t.SymbolInformation={})),function(e){e.create=function(e){return{diagnostics:e}},e.is=function(e){var t=e;return h.defined(t)&&h.typedArray(t.diagnostics,a.is)}}(t.CodeActionContext||(t.CodeActionContext={})),function(e){e.create=function(e,t){var n={range:e};return h.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return h.defined(t)&&i.is(t.range)&&(h.undefined(t.command)||s.is(t.command))}}(t.CodeLens||(t.CodeLens={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return h.defined(t)&&h.number(t.tabSize)&&h.boolean(t.insertSpaces)}}(t.FormattingOptions||(t.FormattingOptions={}));var l=function(){return function(){}}();t.DocumentLink=l,function(e){e.create=function(e,t){return{range:e,target:t}},e.is=function(e){var t=e;return h.defined(t)&&i.is(t.range)&&(h.undefined(t.target)||h.string(t.target))}}(l=t.DocumentLink||(t.DocumentLink={})),t.DocumentLink=l,t.EOL=["\n","\r\n","\r"],function(e){e.create=function(e,t,n,r){return new d(e,t,n,r)},e.is=function(e){var t=e;return!!(h.defined(t)&&h.string(t.uri)&&(h.undefined(t.languageId)||h.string(t.languageId))&&h.number(t.lineCount)&&h.func(t.getText)&&h.func(t.positionAt)&&h.func(t.offsetAt))}}(t.TextDocument||(t.TextDocument={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var h,d=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var a=Math.floor((n+i)/2);t[a]>e?i=a:n=a+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(h||(h={}))},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(145);t.Argument=r.Argument;var i=n(684);t.JSONArgument=i.JSONArgument;const a=n(685);t.Comment=a.Comment;const s=n(686);var o=n(689);t.Flag=o.Flag;const c=n(81);t.Instruction=c.Instruction;var u=n(196);t.Line=u.Line;const g=n(687);t.ParserDirective=g.ParserDirective;var l=n(299);t.Property=l.Property;var h=n(688);t.Variable=h.Variable;var d=n(690);t.Add=d.Add;const m=n(298);t.Arg=m.Arg;const f=n(300);t.Cmd=f.Cmd;const p=n(301);t.Copy=p.Copy;const _=n(303);t.Entrypoint=_.Entrypoint;const R=n(302);t.Env=R.Env;const A=n(198);t.From=A.From;const v=n(304);t.Healthcheck=v.Healthcheck;var b=n(96);t.JSONInstruction=b.JSONInstruction;var S=n(691);t.Label=S.Label;var C=n(297);t.ModifiableInstruction=C.ModifiableInstruction;var E=n(305);t.Onbuild=E.Onbuild;var D=n(197);t.PropertyInstruction=D.PropertyInstruction;var I=n(692);t.Shell=I.Shell;var k=n(693);t.Stopsignal=k.Stopsignal;var y=n(695);t.User=y.User;var T=n(696);t.Volume=T.Volume;var N=n(694);t.Workdir=N.Workdir,function(e){e.ADD="ARG",e.ARG="ARG",e.CMD="CMD",e.COPY="COPY",e.ENTRYPOINT="ENTRYPOINT",e.ENV="ENV",e.EXPOSE="EXPOSE",e.FROM="FROM",e.HEALTHCHECK="HEALTHCHECK",e.LABEL="LABEL",e.MAINTAINER="MAINTAINER",e.ONBUILD="ONBUILD",e.RUN="RUN",e.SHELL="SHELL",e.STOPSIGNAL="STOPSIGNAL",e.USER="USER",e.VOLUME="VOLUME",e.WORKDIR="WORKDIR"}(t.Keyword||(t.Keyword={})),function(e){e.escape="escape"}(t.Directive||(t.Directive={})),t.DefaultVariables=["FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],function(e){e.parse=function(e){return(new s.Parser).parse(e)}}(t.DockerfileParser||(t.DockerfileParser={}))},61:function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},64:function(e,t){e.exports=require("child_process")},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Object.prototype.toString;function i(e){return"[object String]"===r.call(e)}function a(e){return"[object Function]"===r.call(e)}function s(e){return Array.isArray(e)}t.defined=function(e){return void 0!==e},t.undefined=function(e){return void 0===e},t.nil=function(e){return null===e},t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"[object Number]"===r.call(e)},t.error=function(e){return"[object Error]"===r.call(e)},t.func=a,t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&a(e.then)}},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(143);t.JSONArgument=class extends r.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e=e.substring(1,e.length-1)}}},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(193),a=n(103);t.Comment=class extends i.Line{constructor(e,t){super(e,t)}toString(){const e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange();const t=this.document.offsetAt(e.start);let n=this.document.getText().substring(t,this.document.offsetAt(e.end)),i=-1,s=-1;for(let e=1;e<n.length;e++)if(!a.Util.isWhitespace(n.charAt(e))){i=e;break}if(-1===i)return null;for(let e=n.length-1;e>=1;e--)if(!a.Util.isWhitespace(n.charAt(e))){s=e+1;break}return r.Range.create(this.document.positionAt(t+i),this.document.positionAt(t+s))}}},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(671),a=n(673),s=n(80),o=n(95),c=n(676),u=n(289),g=n(291),l=n(292),h=n(293),d=n(294),m=n(195),f=n(295),p=n(677),_=n(296),R=n(678),A=n(679),v=n(680),b=n(681),S=n(682),C=n(1728),E=n(142);class D{static createInstruction(e,t,n,r,i,a){switch(i.toUpperCase()){case"ADD":return new c.Add(e,r,t,n,i,a);case"ARG":return new u.Arg(e,r,t,n,i,a);case"CMD":return new g.Cmd(e,r,t,n,i,a);case"COPY":return new l.Copy(e,r,t,n,i,a);case"ENTRYPOINT":return new d.Entrypoint(e,r,t,n,i,a);case"ENV":return new h.Env(e,r,t,n,i,a);case"FROM":return new m.From(e,r,t,n,i,a);case"HEALTHCHECK":return new f.Healthcheck(e,r,t,n,i,a);case"LABEL":return new p.Label(e,r,t,n,i,a);case"ONBUILD":return new _.Onbuild(e,r,t,n,i,a);case"RUN":return new o.JSONInstruction(e,r,t,n,i,a);case"SHELL":return new R.Shell(e,r,t,n,i,a);case"STOPSIGNAL":return new A.Stopsignal(e,r,t,n,i,a);case"WORKDIR":return new v.Workdir(e,r,t,n,i,a);case"USER":return new b.User(e,r,t,n,i,a);case"VOLUME":return new S.Volume(e,r,t,n,i,a)}return new s.Instruction(e,r,t,n,i,a)}getDirectiveSymbol(e,t){this.escapeChar="";e:for(let n=0;n<t.length;n++)switch(t.charAt(n)){case" ":case"\t":break;case"\r":case"\n":break e;case"#":let s=n,o=-1,c=-1;for(let u=n+1;u<t.length;u++){let n=t.charAt(u);switch(n){case" ":case"\t":-1!==o&&-1===c&&(c=u);break;case"\r":case"\n":return new i.Comment(e,r.Range.create(e.positionAt(s),e.positionAt(u)));case"=":let g=-1,l=-1;-1===c&&(c=u);let h=t.length;t:for(let e=u+1;e<t.length;e++)switch(n=t.charAt(e)){case"\r":case"\n":-1!==g&&-1===l&&(l=e),h=e;break t;case"\t":case" ":-1!==g&&-1===l&&(l=e);continue;default:-1===g&&(g=e)}let d=r.Range.create(e.positionAt(s),e.positionAt(h));if(-1===o)return new i.Comment(e,d);-1===g?(g=u+1,l=h):-1===l&&(l=t.length);let m=r.Range.create(e.positionAt(o),e.positionAt(c)),f=r.Range.create(e.positionAt(g),e.positionAt(l));return new a.ParserDirective(e,d,m,f);default:-1===o&&(o=u)}}break;default:break e}return null}parse(e){let t=r.TextDocument.create("","",0,e),n=new C.Dockerfile(t),s=this.getDirectiveSymbol(t,e),o=0;if(this.escapeChar="\\",s instanceof a.ParserDirective){let e=s;if(n.setDirective(e),E.Directive.escape===e.getDirective()){let t=e.getValue();"`"!==t&&"\\"!==t||(this.escapeChar=t)}o=t.offsetAt(s.getRange().end)}else s instanceof i.Comment&&(n.addComment(s),o=t.offsetAt(r.Position.create(1,0)));e:for(let a=o;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"\t":case"\r":case"\n":break;case"#":for(let o=a+1;o<e.length;o++)switch(s=e.charAt(o)){case"\r":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(a),t.positionAt(o)))),a=o+1;continue e;case"\n":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(a),t.positionAt(o)))),a=o;continue e}let o=r.Range.create(t.positionAt(a),t.positionAt(e.length));n.addComment(new i.Comment(t,o));break e;default:let c=s,u=a,g=-1,l=null,h=null;t:for(let o=a+1;o<e.length;o++)switch(s=e.charAt(o)){case this.escapeChar:if("\r"===(s=e.charAt(o+1)))o+=2;else if("\n"===s)o++;else{if(" "===s||"\t"===s){for(let t=o+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":o=t+1;continue t;case"\n":o=t;continue t;default:g=o+1,c+=this.escapeChar,o=t-2;continue t}g=o+1,c+=this.escapeChar;break t}g=o+1,c+=this.escapeChar}break;case" ":case"\t":-1===g&&(g=o);let d=!1;n:for(let s=o+1;s<e.length;s++)switch(e.charAt(s)){case"\r":case"\n":if(d)continue;a=s,l=r.Range.create(t.positionAt(u),t.positionAt(s)),h=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,h));continue e;case this.escapeChar:let o=e.charAt(s+1);if("\n"===o)d=!0,s++;else if("\r"===o)d=!0,s+=2;else if(" "===o||"\t"===o)r:for(let t=s+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":d=!0,s=t+1;break r;case"\n":d=!0,s=t;break r;default:s=t;break r}continue;case"#":if(d){for(let a=s+1;a<e.length;a++)switch(e.charAt(a)){case"\r":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(s),t.positionAt(a)))),s=a+1;continue n;case"\n":let o=r.Range.create(t.positionAt(s),t.positionAt(a));n.addComment(new i.Comment(t,o)),s=a;continue n}let a=r.Range.create(t.positionAt(s),t.positionAt(e.length));n.addComment(new i.Comment(t,a));break n}break;case" ":case"\t":break;default:d&&(d=!1)}l=r.Range.create(t.positionAt(u),t.positionAt(e.length)),h=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,h));break e;case"\r":-1===g&&(g=o),o++;case"\n":-1===g&&(g=o),l=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,l)),a=o;continue e;default:g=o+1,c+=s}-1===g&&(g=e.length),l=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,l));break e}}return n}}t.Parser=D},673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(142),i=n(193);t.ParserDirective=class extends i.Line{constructor(e,t,n,r){super(e,t),this.nameRange=n,this.valueRange=r}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){return r.Directive[this.getName().toLowerCase()]}}},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Variable=class{constructor(e,t,n,r,i,a,s,o,c,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=r,this.modifierRange=i,this.substitutionParameter=a,this.substitutionRange=s,this.defined=o,this.buildVariable=c,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return void 0!==this.buildVariable}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Flag=class{constructor(e,t,n,r,i){this.range=e,this.name=t,this.nameRange=n,this.value=r,this.valueRange=i}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Add=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return-1===e.indexOf("--")}}},677:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(194),i=n(103);t.Label=class extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getVariables(){const e=super.getVariables(),t=this.getProperties();for(const n of t){const t=n.getUnescapedValue();if(null!==t&&t.length>2&&"'"===t.charAt(0)&&"'"===t.charAt(t.length-1)){const t=n.getValueRange();for(let n=0;n<e.length;n++)i.Util.isInsideRange(e[n].getRange().start,t)&&(e.splice(n,1),n--)}}return e}getProperties(){return super.getProperties()}}},678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Shell=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(80);t.Stopsignal=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(80);t.Workdir=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(80);t.User=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.Volume=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1731);!function(e){e.LOWERCASE="docker.command.convertToLowercase",e.UPPERCASE="docker.command.convertToUppercase",e.EXTRA_ARGUMENT="docker.command.removeExtraArgument",e.DIRECTIVE_TO_BACKTICK="docker.command.directiveToBacktick",e.DIRECTIVE_TO_BACKSLASH="docker.command.directiveToBackslash",e.FLAG_TO_CHOWN="docker.command.flagToChown",e.FLAG_TO_COPY_FROM="docker.command.flagToCopyFrom",e.FLAG_TO_HEALTHCHECK_INTERVAL="docker.command.flagToHealthcheckInterval",e.FLAG_TO_HEALTHCHECK_RETRIES="docker.command.flagToHealthcheckRetries",e.FLAG_TO_HEALTHCHECK_START_PERIOD="docker.command.flagToHealthcheckStartPeriod",e.FLAG_TO_HEALTHCHECK_TIMEOUT="docker.command.flagToHealthcheckTimeout",e.REMOVE_EMPTY_CONTINUATION_LINE="docker.command.removeEmptyContinuationLine",e.CONVERT_TO_AS="docker.command.convertToAS"}(t.CommandIds||(t.CommandIds={})),function(e){e.createLanguageService=function(){return new r.LanguageService}}(t.DockerfileLanguageServiceFactory||(t.DockerfileLanguageServiceFactory={}))},684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(145);t.JSONArgument=class extends r.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e=e.substring(1,e.length-1)}}},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(196),a=n(104);t.Comment=class extends i.Line{constructor(e,t){super(e,t)}toString(){const e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange();const t=this.document.offsetAt(e.start);let n=this.document.getText().substring(t,this.document.offsetAt(e.end)),i=-1,s=-1;for(let e=1;e<n.length;e++)if(!a.Util.isWhitespace(n.charAt(e))){i=e;break}if(-1===i)return null;for(let e=n.length-1;e>=1;e--)if(!a.Util.isWhitespace(n.charAt(e))){s=e+1;break}return r.Range.create(this.document.positionAt(t+i),this.document.positionAt(t+s))}}},686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(685),a=n(687),s=n(81),o=n(96),c=n(690),u=n(298),g=n(300),l=n(301),h=n(302),d=n(303),m=n(198),f=n(304),p=n(691),_=n(305),R=n(692),A=n(693),v=n(694),b=n(695),S=n(696),C=n(1733),E=n(57);class D{static createInstruction(e,t,n,r,i,a){switch(i.toUpperCase()){case"ADD":return new c.Add(e,r,t,n,i,a);case"ARG":return new u.Arg(e,r,t,n,i,a);case"CMD":return new g.Cmd(e,r,t,n,i,a);case"COPY":return new l.Copy(e,r,t,n,i,a);case"ENTRYPOINT":return new d.Entrypoint(e,r,t,n,i,a);case"ENV":return new h.Env(e,r,t,n,i,a);case"FROM":return new m.From(e,r,t,n,i,a);case"HEALTHCHECK":return new f.Healthcheck(e,r,t,n,i,a);case"LABEL":return new p.Label(e,r,t,n,i,a);case"ONBUILD":return new _.Onbuild(e,r,t,n,i,a);case"RUN":return new o.JSONInstruction(e,r,t,n,i,a);case"SHELL":return new R.Shell(e,r,t,n,i,a);case"STOPSIGNAL":return new A.Stopsignal(e,r,t,n,i,a);case"WORKDIR":return new v.Workdir(e,r,t,n,i,a);case"USER":return new b.User(e,r,t,n,i,a);case"VOLUME":return new S.Volume(e,r,t,n,i,a)}return new s.Instruction(e,r,t,n,i,a)}getDirectiveSymbol(e,t){this.escapeChar="";e:for(let n=0;n<t.length;n++)switch(t.charAt(n)){case" ":case"\t":break;case"\r":case"\n":break e;case"#":let s=n,o=-1,c=-1;for(let u=n+1;u<t.length;u++){let n=t.charAt(u);switch(n){case" ":case"\t":-1!==o&&-1===c&&(c=u);break;case"\r":case"\n":return new i.Comment(e,r.Range.create(e.positionAt(s),e.positionAt(u)));case"=":let g=-1,l=-1;-1===c&&(c=u);let h=t.length;t:for(let e=u+1;e<t.length;e++)switch(n=t.charAt(e)){case"\r":case"\n":-1!==g&&-1===l&&(l=e),h=e;break t;case"\t":case" ":-1!==g&&-1===l&&(l=e);continue;default:-1===g&&(g=e)}let d=r.Range.create(e.positionAt(s),e.positionAt(h));if(-1===o)return new i.Comment(e,d);-1===g?(g=u+1,l=h):-1===l&&(l=t.length);let m=r.Range.create(e.positionAt(o),e.positionAt(c)),f=r.Range.create(e.positionAt(g),e.positionAt(l));return new a.ParserDirective(e,d,m,f);default:-1===o&&(o=u)}}break;default:break e}return null}parse(e){let t=r.TextDocument.create("","",0,e),n=new C.Dockerfile(t),s=this.getDirectiveSymbol(t,e),o=0;if(this.escapeChar="\\",s instanceof a.ParserDirective){let e=s;if(n.setDirective(e),E.Directive.escape===e.getDirective()){let t=e.getValue();"`"!==t&&"\\"!==t||(this.escapeChar=t)}o=t.offsetAt(s.getRange().end)}else s instanceof i.Comment&&(n.addComment(s),o=t.offsetAt(r.Position.create(1,0)));e:for(let a=o;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"\t":case"\r":case"\n":break;case"#":for(let o=a+1;o<e.length;o++)switch(s=e.charAt(o)){case"\r":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(a),t.positionAt(o)))),a=o+1;continue e;case"\n":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(a),t.positionAt(o)))),a=o;continue e}let o=r.Range.create(t.positionAt(a),t.positionAt(e.length));n.addComment(new i.Comment(t,o));break e;default:let c=s,u=a,g=-1,l=null,h=null;t:for(let o=a+1;o<e.length;o++)switch(s=e.charAt(o)){case this.escapeChar:if("\r"===(s=e.charAt(o+1)))o+=2;else if("\n"===s)o++;else{if(" "===s||"\t"===s){for(let t=o+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":o=t+1;continue t;case"\n":o=t;continue t;default:g=o+1,c+=this.escapeChar,o=t-2;continue t}g=o+1,c+=this.escapeChar;break t}g=o+1,c+=this.escapeChar}break;case" ":case"\t":-1===g&&(g=o);let d=!1;n:for(let s=o+1;s<e.length;s++)switch(e.charAt(s)){case"\r":case"\n":if(d)continue;a=s,l=r.Range.create(t.positionAt(u),t.positionAt(s)),h=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,h));continue e;case this.escapeChar:let o=e.charAt(s+1);if("\n"===o)d=!0,s++;else if("\r"===o)d=!0,s+=2;else if(" "===o||"\t"===o)r:for(let t=s+2;t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":break;case"\r":d=!0,s=t+1;break r;case"\n":d=!0,s=t;break r;default:s=t;break r}continue;case"#":if(d){for(let a=s+1;a<e.length;a++)switch(e.charAt(a)){case"\r":n.addComment(new i.Comment(t,r.Range.create(t.positionAt(s),t.positionAt(a)))),s=a+1;continue n;case"\n":let o=r.Range.create(t.positionAt(s),t.positionAt(a));n.addComment(new i.Comment(t,o)),s=a;continue n}let a=r.Range.create(t.positionAt(s),t.positionAt(e.length));n.addComment(new i.Comment(t,a));break n}break;case" ":case"\t":break;default:d&&(d=!1)}l=r.Range.create(t.positionAt(u),t.positionAt(e.length)),h=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,h));break e;case"\r":-1===g&&(g=o),o++;case"\n":-1===g&&(g=o),l=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,l)),a=o;continue e;default:g=o+1,c+=s}-1===g&&(g=e.length),l=r.Range.create(t.positionAt(u),t.positionAt(g)),n.addInstruction(D.createInstruction(t,n,this.escapeChar,l,c,l));break e}}return n}}t.Parser=D},687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(57),i=n(196);t.ParserDirective=class extends i.Line{constructor(e,t,n,r){super(e,t),this.nameRange=n,this.valueRange=r}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){return r.Directive[this.getName().toLowerCase()]}}},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Variable=class{constructor(e,t,n,r,i,a,s,o,c,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=r,this.modifierRange=i,this.substitutionParameter=a,this.substitutionRange=s,this.defined=o,this.buildVariable=c,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return void 0!==this.buildVariable}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Flag=class{constructor(e,t,n,r,i){this.range=e,this.name=t,this.nameRange=n,this.value=r,this.valueRange=i}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},69:function(e,t){e.exports=require("net")},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Add=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return-1===e.indexOf("--")}}},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(197),i=n(104);t.Label=class extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getVariables(){const e=super.getVariables(),t=this.getProperties();for(const n of t){const t=n.getUnescapedValue();if(null!==t&&t.length>2&&"'"===t.charAt(0)&&"'"===t.charAt(t.length-1)){const t=n.getValueRange();for(let n=0;n<e.length;n++)i.Util.isInsideRange(e[n].getRange().start,t)&&(e.splice(n,1),n--)}}return e}getProperties(){return super.getProperties()}}},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Shell=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(81);t.Stopsignal=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(81);t.Workdir=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(81);t.User=class extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(96);t.Volume=class extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}},697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(57),a=n(306),s=n(144),o=function(){function e(){}return e.prototype.computeHighlightRanges=function(e,t){var n=i.DockerfileParser.parse(e),o=(new a.DockerDefinition).computeDefinitionRange(e,t),c=null===o?n.getContainingImage(t):n.getContainingImage(o.start),u=[];if(null===o){for(var g=0,l=n.getCOPYs();g<l.length;g++){if(W=(Z=l[g]).getFromFlag())if((q=W.getValueRange())&&q.start.line===t.line&&q.start.character<=t.character&&t.character<=q.end.character){for(var h=W.getValue(),d=0,m=n.getCOPYs();d<m.length;d++){var f=m[d].getFromFlag();f&&f.getValue()===h&&u.push(r.DocumentHighlight.create(f.getValueRange(),r.DocumentHighlightKind.Read))}return u}}for(var p=0,_=n.getFROMs();p<_.length;p++)for(var R=0,A=_[p].getVariables();R<A.length;R++){var v=A[R];if(s.Util.isInsideRange(t,v.getNameRange())){for(var b=v.getName(),S=0,C=n.getFROMs();S<C.length;S++)for(var E=0,D=C[S].getVariables();E<D.length;E++){var I=D[E];I.getName()===b&&u.push(r.DocumentHighlight.create(I.getNameRange(),r.DocumentHighlightKind.Read))}return u}}for(var k=0,y=c.getInstructions();k<y.length;k++)for(var T=0,N=(Z=y[k]).getVariables();T<N.length;T++){v=N[T];if(s.Util.isInsideRange(t,v.getNameRange())){b=v.getName();for(var O=0,P=c.getInstructions();O<P.length;O++){var M=P[O];if(!(M instanceof i.From))for(var w=0,x=M.getVariables();w<x.length;w++){var L=x[w];L.getName()===b&&u.push(r.DocumentHighlight.create(L.getNameRange(),r.DocumentHighlightKind.Read))}}return u}}}else{for(var F=r.TextDocument.create("","",0,e),H=F.getText().substring(F.offsetAt(o.start),F.offsetAt(o.end)),V=0,U=n.getFROMs();V<U.length;V++){var q;if((q=U[V].getBuildStageRange())&&q.start.line===o.start.line){u.push(r.DocumentHighlight.create(o,r.DocumentHighlightKind.Write));for(var K=0,G=n.getCOPYs();K<G.length;K++){var W;(W=(Z=G[K]).getFromFlag())&&W.getValue()===H&&u.push(r.DocumentHighlight.create(W.getValueRange(),r.DocumentHighlightKind.Read))}return u}}for(var B=0,j=c.getARGs();B<j.length;B++){(ie=j[B].getProperty())&&ie.getName()===H&&u.push(r.DocumentHighlight.create(ie.getNameRange(),r.DocumentHighlightKind.Write))}for(var Y=0,$=c.getENVs();Y<$.length;Y++)for(var J=0,Q=$[Y].getProperties();J<Q.length;J++){(ie=Q[J]).getName()===H&&u.push(r.DocumentHighlight.create(ie.getNameRange(),r.DocumentHighlightKind.Write))}for(var z=0,X=c.getInstructions();z<X.length;z++){var Z;if(!((Z=X[z])instanceof i.From))for(var ee=0,te=Z.getVariables();ee<te.length;ee++){(v=te[ee]).getName()===H&&u.push(r.DocumentHighlight.create(v.getNameRange(),r.DocumentHighlightKind.Read))}}for(var ne=0,re=n.getInitialARGs();ne<re.length;ne++){var ie;if((ie=re[ne].getProperty())&&s.Util.rangeEquals(ie.getNameRange(),o))for(var ae=0,se=n.getFROMs();ae<se.length;ae++)for(var oe=0,ce=se[ae].getVariables();oe<ce.length;oe++){(v=ce[oe]).getName()===H&&u.push(r.DocumentHighlight.create(v.getNameRange(),r.DocumentHighlightKind.Read))}}}return u},e}();t.DockerHighlight=o},698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.dockerMessages={hoverAdd:"Copy files, folders, or remote URLs from `source` to the `dest` path in the image's filesystem.\n\n",hoverArg:"Define a variable with an optional default value that users can override at build-time when using `docker build`.\n\nSince Docker 1.9\n\n",hoverCmd:"Provide defaults for an executing container. If an executable is not specified, then `ENTRYPOINT` must be specified as well. There can only be one `CMD` instruction in a `Dockerfile`.\n\n",hoverCopy:"Copy files or folders from `source` to the `dest` path in the image's filesystem.\n\n",hoverEntrypoint:"Configures the container to be run as an executable.\n\n",hoverEnv:"Set the environment variable `key` to the value `value`.\n\n",hoverExpose:"Define the network `port`s that this container will listen on at runtime.\n\n",hoverFrom:"Set the `baseImage` to use for subsequent instructions. `FROM` must be the first instruction in a `Dockerfile`.\n\n",hoverHealthcheck:"Define how Docker should test the container to check that it is still working. Alternatively, disable the base image's `HEALTHCHECK` instruction. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",hoverLabel:"Adds metadata to an image.\n\nSince Docker 1.6\n\n",hoverMaintainer:"Set the _Author_ field of the generated images. This instruction has been deprecated in favor of `LABEL`.\n\n",hoverOnbuild:"Add a _trigger_ instruction to the image that will be executed when the image is used as a base image for another build.\n\n",hoverRun:"Execute any commands on top of the current image as a new layer and commit the results.\n\n",hoverShell:"Override the default shell used for the _shell_ form of commands.\n\nSince Docker 1.12\n\n",hoverStopsignal:"Set the system call signal to use to send to the container to exit. Signals can be valid unsigned numbers or a signal name in the `SIGNAME` format such as `SIGKILL`.\n\nSince Docker 1.9\n\n",hoverUser:"Set the user name or UID to use when running the image in addition to any subsequent `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverVolume:"Create a mount point with the specifid name and mark it as holding externally mounted volumes from the native host or from other containers.\n\n",hoverWorkdir:"Set the working directory for any subsequent `ADD`, `COPY`, `CMD`, `ENTRYPOINT`, or `RUN` instructions that follow it in the `Dockerfile`.\n\n",hoverEscape:"Sets the character to use to escape characters and newlines in this Dockerfile. If unspecified, the default escape character is `\\`.\n\n",hoverOnlineDocumentationFooter:"\n\n[Online documentation](${0})",hoverAddFlagChown:"The username, groupname, or UID/GID combination to own the added content.",hoverCopyFlagChown:"The username, groupname, or UID/GID combination to own the copied content.",hoverCopyFlagFrom:"The previous build stage to use as the source location instead of the build's context.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagInterval:"The seconds to wait for the health check to run after the container has started, and then again the number of seconds to wait before running again after the previous check has completed.",hoverHealthcheckFlagRetries:"The number of consecutive failures of this health check before the container is considered to be `unhealthy`.",hoverHealthcheckFlagStartPeriod:"The number of seconds to wait for the container to startup. Failures during this grace period will not count towards the maximum number of retries. However, should a health check succeed during this period then any subsequent failures will count towards the maximum number of retries.\n\nSince Docker 17.05.0-ce.",hoverHealthcheckFlagTimeout:"The number of seconds to wait for the check to complete before considering it to have failed.",proposalArgNameOnly:"Define a variable that users can set at build-time when using `docker build`.\n\n",proposalArgDefaultValue:"Define a variable with the given default value that users can override at build-time when using `docker build`.\n\n",proposalHealthcheckExec:"Define how Docker should test the container to check that it is still working. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12\n\n",proposalHealthcheckNone:"Disable the `HEALTHCHECK` instruction inherited from the base image if one exists. There can only be one `HEALTHCHECK` instruction in a `Dockerfile`.\n\nSince Docker 1.12"},this.markdowns={ADD:{contents:this.dockerMessages.hoverAdd+"```\nADD hello.txt /absolute/path\nADD hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#add")},ADD_FlagChown:{contents:this.dockerMessages.hoverAddFlagChown},ARG:{contents:this.dockerMessages.hoverArg+"```\nARG userName\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_NameOnly:{contents:this.dockerMessages.proposalArgNameOnly+"```\nARG userName\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},ARG_DefaultValue:{contents:this.dockerMessages.proposalArgDefaultValue+"```\nARG testOutputDir=test\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#arg")},CMD:{contents:this.dockerMessages.hoverCmd+'```\nCMD [ "/bin/ls", "-l" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},COPY:{contents:this.dockerMessages.hoverCopy+"```\nCOPY hello.txt /absolute/path\nCOPY hello.txt relative/to/workdir\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#copy")},COPY_FlagChown:{contents:this.dockerMessages.hoverCopyFlagChown},COPY_FlagFrom:{contents:this.dockerMessages.hoverCopyFlagFrom},ENTRYPOINT:{contents:this.dockerMessages.hoverEntrypoint+'```\nENTRYPOINT [ "/opt/app/run.sh", "--port", "8080" ]\n```'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#entrypoint")},ENV:{contents:this.dockerMessages.hoverEnv+"```\nENV buildTag=1.0\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#env")},EXPOSE:{contents:this.dockerMessages.hoverExpose+"```\nEXPOSE 8080\nEXPOSE 80 443 22\nEXPOSE 7000-8000\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#expose")},FROM:{contents:this.dockerMessages.hoverFrom+"```\nFROM baseImage\nFROM baseImage:tag\nFROM baseImage@digest\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#from")},HEALTHCHECK:{contents:this.dockerMessages.hoverHealthcheck+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_CMD:{contents:this.dockerMessages.proposalHealthcheckExec+"```\nHEALTHCHECK --interval=10m --timeout=5s \\\n    CMD curl -f http://localhost/ || exit 1\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},HEALTHCHECK_FlagInterval:{contents:this.dockerMessages.hoverHealthcheckFlagInterval},HEALTHCHECK_FlagRetries:{contents:this.dockerMessages.hoverHealthcheckFlagRetries},HEALTHCHECK_FlagStartPeriod:{contents:this.dockerMessages.hoverHealthcheckFlagStartPeriod},HEALTHCHECK_FlagTimeout:{contents:this.dockerMessages.hoverHealthcheckFlagTimeout},HEALTHCHECK_NONE:{contents:this.dockerMessages.proposalHealthcheckNone+"```\nHEALTHCHECK NONE\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#healthcheck")},LABEL:{contents:this.dockerMessages.hoverLabel+'```\nLABEL version="1.0"\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#label")},MAINTAINER:{contents:this.dockerMessages.hoverMaintainer+"```\nMAINTAINER name\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#maintainer")},ONBUILD:{contents:this.dockerMessages.hoverOnbuild+"```\nONBUILD ADD . /opt/app/src/extensions\nONBUILD RUN /usr/local/bin/build.sh /opt/app```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#cmd")},RUN:{contents:this.dockerMessages.hoverRun+"```\nRUN apt-get update && apt-get install -y curl\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#run")},SHELL:{contents:this.dockerMessages.hoverShell+'```\nSHELL [ "powershell", "-command" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#shell")},STOPSIGNAL:{contents:this.dockerMessages.hoverStopsignal+"```\nSTOPSIGNAL 9\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#stopsignal")},USER:{contents:this.dockerMessages.hoverUser+"```\nUSER daemon\n```\n"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#user")},VOLUME:{contents:this.dockerMessages.hoverVolume+'```\nVOLUME [ "/var/db" ]\n```\n'+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#volume")},WORKDIR:{contents:this.dockerMessages.hoverWorkdir+"```\nWORKDIR /path/to/workdir\nWORKDIR relative/path\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#workdir")},escape:{contents:this.dockerMessages.hoverEscape+"```\n# escape=`\n```"+this.formatMessage(this.dockerMessages.hoverOnlineDocumentationFooter,"https://docs.docker.com/engine/reference/builder/#escape")}}}return e.prototype.formatMessage=function(e,t){return e.replace("${0}",t)},e.prototype.getMarkdown=function(e){return this.markdowns[e]},e}();t.MarkdownDocumentation=r},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),i=0,a=n.length;i<a;i++)try{t.push(n[i].apply(r[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(e){this._options=e}get event(){return this._event||(this._event=((e,t,n)=>{let a;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),a={dispose:()=>{this._callbacks.remove(e,t),a.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(a),a})),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i._noop=function(){},t.Emitter=i},8:function(e,t){e.exports=require("fs")},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(103),a=n(193),s=n(143),o=n(674);t.Instruction=class extends a.Line{constructor(e,t,n,r,i,a){super(e,t),this.dockerfile=n,this.escapeChar=r,this.instruction=i,this.instructionRange=a}toString(){let e=this.getKeyword();for(let t of this.getArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,a=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(s.end)-this.document.offsetAt(s.start),c=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,g=!1,l=!1;for(let e=0;e<c.length;e++){let s=c.charAt(e);if(s===this.escapeChar){let i=c.charAt(e+1);if(" "===i||"\t"===i)e:for(let i=e+2;i<c.length;i++)switch(c.charAt(i)){case" ":case"\t":continue;case"\r":i++;case"\n":t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e=i;break e;default:break e}else"\r"===i?(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e+=2):"\n"===i?(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e++):e++}else if(i.Util.isNewline(s))l&&(a&&t.push(r.Range.create(a,this.document.positionAt(u+n))),a=null,g=!0,l=!1);else if(!l){if(null===a){"#"===s&&(l=!0);let t=this.document.positionAt(u+e);0!==t.character&&(a=r.Position.create(t.line,0))}n=e}}return t.push(r.Range.create(a,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let r of t)e+=n.substring(this.document.offsetAt(r.start),this.document.offsetAt(r.end));return e}getArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),a=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,c=!1,u=!1,g=-1,l=!1,h=!1,d=-1,m="";for(let t=0;t<a.length;t++){let n=a.charAt(t);if(i.Util.isWhitespace(n)){if(h){l=!0,i.Util.isNewline(n)&&(l=!1,u&&(u=!1));continue}-1!==g&&(-1===d?e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+t)))):e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),d=-1,m="",g=-1)}else if(n===this.escapeChar){let i=a.charAt(t+1);if(" "===i||"\t"===i)e:for(let e=t+2;e<a.length;e++)switch(a.charAt(e)){case" ":case"\t":continue;case"\r":e++;case"\n":h=!0,c=!0,-1!==g&&(d=t),t=e;break e;default:d=t,-1===g&&(t=e-1);break e}else"\r"===i?(h=!0,c=!0,-1!==g&&(d=t),t+=2):"\n"===i?(h=!0,c=!0,-1!==g&&(d=t),t++):(l&&-1!==d&&(e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),m="",g=-1),l=!1,h=!1,"$"===i?m=m+n+i:m+=i,-1===g&&(g=t),t++)}else u||(c&&"#"===n?(c=!1,u=!0):(l&&-1!==d&&(e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),m="",g=-1),l=!1,h=!1,d=-1,m+=n,-1===g&&(g=t)))}return-1!==g&&(-1===d?e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+a.length)))):e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){const n=e[t].getRange();let r=this.document.offsetAt(n.start);const i=this.parseVariables(r,e[t].getValue()),a=[];let o=!1;for(let e of i){const t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);a.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<a.length;e++){const t=i[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);a[e]?(o+=this.document.getText().substring(r,n),o+=a[e],r=s):(o+=this.document.getText().substring(r,s),r=s)}e[t]=new s.Argument(o,n)}}return e}getVariables(){const e=[],t=this.getArguments();for(const n of t){let t=n.getRange(),r=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));const i=this.parseVariables(this.document.offsetAt(n.getRange().start),r);for(const t of i)e.push(t)}return e}parseVariables(e,t){let n=[];e:for(let a=0;a<t.length;a++)switch(t.charAt(a)){case this.escapeChar:"$"===t.charAt(a+1)&&a++;break;case"$":if("{"===t.charAt(a+1)){let i="${",s="",c=-1,u="",g=-1,l=-1,h=-1;t:for(let d=a+2;d<t.length;d++){let m=t.charAt(d);switch(m){case this.escapeChar:for(let e=d+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":d=e;continue t}break;case"}":i+="}";let f=null,p=null,_=-1!==h?u:null,R=null;-1===c?c=d:c+1===d?(f="",p=r.Range.create(this.document.positionAt(e+c+1),this.document.positionAt(e+c+1))):(-1===g?(g=h+1,l=h+1):l+=1,f=t.substring(h,h+1),p=r.Range.create(this.document.positionAt(e+h),this.document.positionAt(e+h+1)),R=r.Range.create(this.document.positionAt(e+g),this.document.positionAt(e+l)));let A=this.document.positionAt(e+a);n.push(new o.Variable(s,r.Range.create(this.document.positionAt(e+a+2),this.document.positionAt(e+c)),r.Range.create(A,this.document.positionAt(e+d+1)),f,p,_,R,void 0!==this.dockerfile.resolveVariable(s,A.line),this.isBuildVariable(s,A.line),i)),a=d;continue e;case":":-1===c?c=d:-1!==h?(-1===g?(g=d,l=d):l=d,u+=":"):h=d,i+=":";break;case"\n":case"\r":case" ":case"\t":break;default:-1===c?s+=m:-1!==h?(-1===g?(g=d,l=d):l=d,u+=m):h=d,i+=m}}break e}if(i.Util.isWhitespace(t.charAt(a+1))||a===t.length-1)continue;{let i="";t:for(let s=a+1;s<t.length;s++){let c=t.charAt(s);switch(c){case"\r":case"\n":case" ":case"\t":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+s)),r.Range.create(u,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,u.line),this.isBuildVariable(i,u.line),"$"+i)),a=s-1;continue e;case this.escapeChar:for(let e=s+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":s=e;continue t}let g=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+s)),r.Range.create(g,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,g.line),this.isBuildVariable(i,g.line),"$"+i));break e}i+=c}let s=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+t.length)),r.Range.create(s,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,s.line),this.isBuildVariable(i,s.line),"$"+i))}break e}return n}isBuildVariable(e,t){let n=this.dockerfile.getContainingImage(r.Position.create(t,0)),i=n.getENVs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t))for(let t of i[n].getProperties())if(t.getName()===e)return!1;let a=n.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return!0}}}},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(104),a=n(196),s=n(145),o=n(688);t.Instruction=class extends a.Line{constructor(e,t,n,r,i,a){super(e,t),this.dockerfile=n,this.escapeChar=r,this.instruction=i,this.instructionRange=a}toString(){let e=this.getKeyword();for(let t of this.getArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,a=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(s.end)-this.document.offsetAt(s.start),c=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,g=!1,l=!1;for(let e=0;e<c.length;e++){let s=c.charAt(e);if(s===this.escapeChar){let i=c.charAt(e+1);if(" "===i||"\t"===i)e:for(let i=e+2;i<c.length;i++)switch(c.charAt(i)){case" ":case"\t":continue;case"\r":i++;case"\n":t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e=i;break e;default:break e}else"\r"===i?(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e+=2):"\n"===i?(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,g=!0,l=!1,e++):e++}else if(i.Util.isNewline(s))l&&(a&&t.push(r.Range.create(a,this.document.positionAt(u+n))),a=null,g=!0,l=!1);else if(!l){if(null===a){"#"===s&&(l=!0);let t=this.document.positionAt(u+e);0!==t.character&&(a=r.Position.create(t.line,0))}n=e}}return t.push(r.Range.create(a,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let r of t)e+=n.substring(this.document.offsetAt(r.start),this.document.offsetAt(r.end));return e}getArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),a=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,c=!1,u=!1,g=-1,l=!1,h=!1,d=-1,m="";for(let t=0;t<a.length;t++){let n=a.charAt(t);if(i.Util.isWhitespace(n)){if(h){l=!0,i.Util.isNewline(n)&&(l=!1,u&&(u=!1));continue}-1!==g&&(-1===d?e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+t)))):e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),d=-1,m="",g=-1)}else if(n===this.escapeChar){let i=a.charAt(t+1);if(" "===i||"\t"===i)e:for(let e=t+2;e<a.length;e++)switch(a.charAt(e)){case" ":case"\t":continue;case"\r":e++;case"\n":h=!0,c=!0,-1!==g&&(d=t),t=e;break e;default:d=t,-1===g&&(t=e-1);break e}else"\r"===i?(h=!0,c=!0,-1!==g&&(d=t),t+=2):"\n"===i?(h=!0,c=!0,-1!==g&&(d=t),t++):(l&&-1!==d&&(e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),m="",g=-1),l=!1,h=!1,"$"===i?m=m+n+i:m+=i,-1===g&&(g=t),t++)}else u||(c&&"#"===n?(c=!1,u=!0):(l&&-1!==d&&(e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d)))),m="",g=-1),l=!1,h=!1,d=-1,m+=n,-1===g&&(g=t)))}return-1!==g&&(-1===d?e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+a.length)))):e.push(new s.Argument(m,r.Range.create(this.document.positionAt(o+g),this.document.positionAt(o+d))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){const n=e[t].getRange();let r=this.document.offsetAt(n.start);const i=this.parseVariables(r,e[t].getValue()),a=[];let o=!1;for(let e of i){const t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);a.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<a.length;e++){const t=i[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);a[e]?(o+=this.document.getText().substring(r,n),o+=a[e],r=s):(o+=this.document.getText().substring(r,s),r=s)}e[t]=new s.Argument(o,n)}}return e}getVariables(){const e=[],t=this.getArguments();for(const n of t){let t=n.getRange(),r=this.document.getText().substring(this.document.offsetAt(t.start),this.document.offsetAt(t.end));const i=this.parseVariables(this.document.offsetAt(n.getRange().start),r);for(const t of i)e.push(t)}return e}parseVariables(e,t){let n=[];e:for(let a=0;a<t.length;a++)switch(t.charAt(a)){case this.escapeChar:"$"===t.charAt(a+1)&&a++;break;case"$":if("{"===t.charAt(a+1)){let i="${",s="",c=-1,u="",g=-1,l=-1,h=-1;t:for(let d=a+2;d<t.length;d++){let m=t.charAt(d);switch(m){case this.escapeChar:for(let e=d+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":d=e;continue t}break;case"}":i+="}";let f=null,p=null,_=-1!==h?u:null,R=null;-1===c?c=d:c+1===d?(f="",p=r.Range.create(this.document.positionAt(e+c+1),this.document.positionAt(e+c+1))):(-1===g?(g=h+1,l=h+1):l+=1,f=t.substring(h,h+1),p=r.Range.create(this.document.positionAt(e+h),this.document.positionAt(e+h+1)),R=r.Range.create(this.document.positionAt(e+g),this.document.positionAt(e+l)));let A=this.document.positionAt(e+a);n.push(new o.Variable(s,r.Range.create(this.document.positionAt(e+a+2),this.document.positionAt(e+c)),r.Range.create(A,this.document.positionAt(e+d+1)),f,p,_,R,void 0!==this.dockerfile.resolveVariable(s,A.line),this.isBuildVariable(s,A.line),i)),a=d;continue e;case":":-1===c?c=d:-1!==h?(-1===g?(g=d,l=d):l=d,u+=":"):h=d,i+=":";break;case"\n":case"\r":case" ":case"\t":break;default:-1===c?s+=m:-1!==h?(-1===g?(g=d,l=d):l=d,u+=m):h=d,i+=m}}break e}if(i.Util.isWhitespace(t.charAt(a+1))||a===t.length-1)continue;{let i="";t:for(let s=a+1;s<t.length;s++){let c=t.charAt(s);switch(c){case"\r":case"\n":case" ":case"\t":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+s)),r.Range.create(u,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,u.line),this.isBuildVariable(i,u.line),"$"+i)),a=s-1;continue e;case this.escapeChar:for(let e=s+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"\t":case"\r":continue;case"\n":s=e;continue t}let g=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+s)),r.Range.create(g,this.document.positionAt(e+s)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,g.line),this.isBuildVariable(i,g.line),"$"+i));break e}i+=c}let s=this.document.positionAt(e+a);n.push(new o.Variable(i,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+t.length)),r.Range.create(s,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(i,s.line),this.isBuildVariable(i,s.line),"$"+i))}break e}return n}isBuildVariable(e,t){let n=this.dockerfile.getContainingImage(r.Position.create(t,0)),i=n.getENVs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t))for(let t of i[n].getProperties())if(t.getName()===e)return!1;let a=n.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return!0}}}},95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(143),a=n(670),s=n(288);t.JSONInstruction=class extends s.ModifiableInstruction{constructor(e,t,n,s,o,c){super(e,t,n,s,o,c),this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const g=this.getArguments();if(1===g.length&&"[]"===g[0].getValue()){let e=g[0].getRange();return this.openingBracket=new i.Argument("[",r.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),void(this.closingBracket=new i.Argument("]",r.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character)))}if(2===g.length&&"["===g[0].getValue()&&"]"===g[1].getValue())return this.openingBracket=g[0],void(this.closingBracket=g[1]);const l=e.offsetAt(this.getArgumentsRange().start);let h=-1,d="",m=!1,f="";e:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===d)this.openingBracket=new i.Argument("[",r.Range.create(e.positionAt(l+t),e.positionAt(l+t+1))),d="[";else{if(!m)break e;f+=n}break;case'"':if("["===d||","===d){h=t,m=!0,d='"',f+=n;continue}if('"'!==d)break e;if(!m)break e;f+=n,m=!1,this.jsonStrings.push(new a.JSONArgument(f,r.Range.create(e.positionAt(l+h),e.positionAt(l+t+1)),r.Range.create(e.positionAt(l+h+1),e.positionAt(l+t)))),f="";break;case",":if(m)f+=n;else{if('"'!==d)break e;d=","}break;case"]":if(m)f+=n;else if(""!==d){this.closingBracket=new i.Argument("]",r.Range.create(e.positionAt(l+t),e.positionAt(l+t+1)));break e}break;case" ":case"\t":break;case"\\":if(m)switch(u.charAt(t+1)){case'"':case"\\":f+=u.charAt(t+1),t++;continue;case" ":case"\t":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break e;default:if(!m)break e;f+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(145),a=n(684),s=n(297);t.JSONInstruction=class extends s.ModifiableInstruction{constructor(e,t,n,s,o,c){super(e,t,n,s,o,c),this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const g=this.getArguments();if(1===g.length&&"[]"===g[0].getValue()){let e=g[0].getRange();return this.openingBracket=new i.Argument("[",r.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),void(this.closingBracket=new i.Argument("]",r.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character)))}if(2===g.length&&"["===g[0].getValue()&&"]"===g[1].getValue())return this.openingBracket=g[0],void(this.closingBracket=g[1]);const l=e.offsetAt(this.getArgumentsRange().start);let h=-1,d="",m=!1,f="";e:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===d)this.openingBracket=new i.Argument("[",r.Range.create(e.positionAt(l+t),e.positionAt(l+t+1))),d="[";else{if(!m)break e;f+=n}break;case'"':if("["===d||","===d){h=t,m=!0,d='"',f+=n;continue}if('"'!==d)break e;if(!m)break e;f+=n,m=!1,this.jsonStrings.push(new a.JSONArgument(f,r.Range.create(e.positionAt(l+h),e.positionAt(l+t+1)),r.Range.create(e.positionAt(l+h+1),e.positionAt(l+t)))),f="";break;case",":if(m)f+=n;else{if('"'!==d)break e;d=","}break;case"]":if(m)f+=n;else if(""!==d){this.closingBracket=new i.Argument("]",r.Range.create(e.positionAt(l+t),e.positionAt(l+t+1)));break e}break;case" ":case"\t":break;case"\\":if(m)switch(u.charAt(t+1)){case'"':case"\\":f+=u.charAt(t+1),t++;continue;case" ":case"\t":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue e;case" ":case"\t":break;default:break t}break e;default:if(!m)break e;f+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(76),i=n(61);let a=8192,s=Buffer.from("\r","ascii")[0],o=Buffer.from("\n","ascii")[0],c="\r\n";class u{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(a)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/a)+1)*a;0===this.index?(this.buffer=Buffer.allocUnsafe(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==o||this.buffer[t+2]!==s||this.buffer[t+3]!==o);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(c).forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class g{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=g;class l extends g{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new u(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=l;t.IPCMessageReader=class extends g{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends l{constructor(e,t="utf-8"){super(e,t)}}}});
//# sourceMappingURL=server.js.map